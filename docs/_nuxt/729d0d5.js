/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{197:function(e,t,n){(function(e){!function(){var n="undefined"!=typeof window?window:e,r={};for(var o in function(e,t,n){var p;function r(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){return a==Array.prototype||a==Object.prototype||(a[b]=e.value),a};var c=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var b=0;b<a.length;++b){var n=a[b];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function l(a,b){if(b)e:{for(var e=c,t=a.split("."),n=0;n<t.length-1;n++){var r=t[n];if(!(r in e))break e;e=e[r]}(r=b(n=e[t=t[t.length-1]]))!=n&&null!=r&&o(e,t,{configurable:!0,writable:!0,value:r})}}function d(a){return(a={next:a})[Symbol.iterator]=function(){return this},a}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:r(a)}}function f(a){if(!(a instanceof Array)){a=q(a);for(var b,e=[];!(b=a.next()).done;)e.push(b.value);a=e}return a}l("Symbol",(function(a){function e(e,t){this.a=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(a)return a;e.prototype.toString=function(){return this.a};var t=0;return function b(n){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new e("jscomp_symbol_"+(n||"")+"_"+t++,n)}})),l("Symbol.iterator",(function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<b.length;e++){var t=c[b[e]];"function"==typeof t&&"function"!=typeof t.prototype[a]&&o(t.prototype,a,{configurable:!0,writable:!0,value:function(){return d(r(this))}})}return a}));var h,m="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b};if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var v;e:{var y={};try{y.__proto__={Ve:!0},v=y.Ve;break e}catch(e){}v=!1}h=v?function(a,b){if(a.__proto__=b,a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var E=h;function T(a,b){if(a.prototype=m(b.prototype),a.prototype.constructor=a,E)E(a,b);else for(var e in b)if("prototype"!=e)if(Object.defineProperties){var t=Object.getOwnPropertyDescriptor(b,e);t&&Object.defineProperty(a,e,t)}else a[e]=b[e];a.Ug=b.prototype}function A(){this.o=!1,this.g=null,this.b=void 0,this.a=1,this.f=this.l=0,this.A=this.c=null}function w(a){if(a.o)throw new TypeError("Generator is already running");a.o=!0}function S(a,b){a.c={me:b,ve:!0},a.a=a.l||a.f}function I(a,b,e){return a.a=e,{value:b}}function x(a){a.a=0}function k(a,b,e){a.l=b,null!=e&&(a.f=e)}function C(a){a.l=0,a.f=2}function N(a,b){a.a=b,a.l=0}function M(a){a.l=0;var b=a.c.me;return a.c=null,b}function _(a){a.A=[a.c],a.l=0,a.f=0}function R(a,b){var e=a.A.splice(0)[0];(e=a.c=a.c||e)?e.ve?a.a=a.l||a.f:null!=e.u&&a.f<e.u?(a.a=e.u,a.c=null):a.a=a.f:a.a=b}function L(a){this.a=new A,this.b=a}function P(a,b,e,t){try{var n=b.call(a.a.g,e);if(!(n instanceof Object))throw new TypeError("Iterator result "+n+" is not an object");if(!n.done)return a.a.o=!1,n;var r=n.value}catch(e){return a.a.g=null,S(a.a,e),D(a)}return a.a.g=null,t.call(a.a,r),D(a)}function D(a){for(;a.a.a;)try{var b=a.b(a.a);if(b)return a.a.o=!1,{value:b.value,done:!1}}catch(e){a.a.b=void 0,S(a.a,e)}if(a.a.o=!1,a.a.c){if(b=a.a.c,a.a.c=null,b.ve)throw b.me;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function O(a){this.next=function(b){return w(a.a),a.a.g?b=P(a,a.a.g.next,b,a.a.s):(a.a.s(b),b=D(a)),b},this.throw=function(b){return w(a.a),a.a.g?b=P(a,a.a.g.throw,b,a.a.s):(S(a.a,b),b=D(a)),b},this.return=function(b){return function(a,b){w(a.a);var e=a.a.g;return e?P(a,"return"in e?e.return:function(e){return{value:e,done:!0}},b,a.a.return):(a.a.return(b),D(a))}(a,b)},this[Symbol.iterator]=function(){return this}}function U(a,b){var e=new O(new L(b));return E&&a.prototype&&E(e,a.prototype),e}function B(a){return function(a){function b(e){return a.next(e)}function e(e){return a.throw(e)}return new Promise((function(t,n){!function r(g){g.done?t(g.value):Promise.resolve(g.value).then(b,e).then(r,n)}(a.next())}))}(new O(new L(a)))}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){a instanceof String&&(a+="");var e=0,t=!1,n={next:function(){if(!t&&e<a.length){var n=e++;return{value:b(n,a[n]),done:!1}}return t=!0,{done:!0,value:void 0}}};return n[Symbol.iterator]=function(){return n},n}function G(a,b,e){a instanceof String&&(a=String(a));for(var t=a.length,n=0;n<t;n++){var r=a[n];if(b.call(e,r,n,a))return{na:n,Se:r}}return{na:-1,Se:void 0}}function K(a,b,e){if(null==a)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return a+""}A.prototype.s=function(a){this.b=a},A.prototype.return=function(a){this.c={return:a},this.a=this.f},A.prototype.u=function(a){this.a=a},l("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[],this.o=!1;var e=this.f();try{g(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function t(g){return g instanceof b?g:new b((function(e){e(g)}))}if(a)return a;e.prototype.b=function(g){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(g)};var n=c.setTimeout;e.prototype.c=function(g){n(g,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var e=0;e<g.length;++e){var t=g[e];g[e]=null;try{t()}catch(e){this.f(e)}}}this.a=null},e.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(n){return function(r){t||(t=!0,n.call(e,r))}}var e=this,t=!1;return{resolve:g(this.G),reject:g(this.g)}},b.prototype.G=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.L(g);else{e:switch(typeof g){case"object":var e=null!=g;break e;case"function":e=!0;break e;default:e=!1}e?this.F(g):this.l(g)}},b.prototype.F=function(g){var e=void 0;try{e=g.then}catch(e){return void this.g(e)}"function"==typeof e?this.M(e,g):this.l(g)},b.prototype.g=function(g){this.s(2,g)},b.prototype.l=function(g){this.s(1,g)},b.prototype.s=function(g,e){if(0!=this.b)throw Error("Cannot settle("+g+", "+e+"): Promise already settled in state"+this.b);this.b=g,this.c=e,2===this.b&&this.J(),this.A()},b.prototype.J=function(){var g=this;n((function(){if(g.C()){var e=c.console;void 0!==e&&e.error(g.c)}}),1)},b.prototype.C=function(){if(this.o)return!1;var g=c.CustomEvent,e=c.Event,t=c.dispatchEvent;return void 0===t||("function"==typeof g?g=new g("unhandledrejection",{cancelable:!0}):"function"==typeof e?g=new e("unhandledrejection",{cancelable:!0}):(g=c.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,g),g.promise=this,g.reason=this.c,t(g))},b.prototype.A=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new e;return b.prototype.L=function(g){var e=this.f();g.Mc(e.resolve,e.reject)},b.prototype.M=function(g,e){var t=this.f();try{g.call(e,t.resolve,t.reject)}catch(e){t.reject(e)}},b.prototype.then=function(g,e){function t(e,u){return"function"==typeof e?function(t){try{n(e(t))}catch(e){r(e)}}:u}var n,r,o=new b((function(e,u){n=e,r=u}));return this.Mc(t(g,n),t(e,r)),o},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Mc=function(g,e){function t(){switch(n.b){case 1:g(n.c);break;case 2:e(n.c);break;default:throw Error("Unexpected state: "+n.b)}}var n=this;null==this.a?r.b(t):this.a.push(t),this.o=!0},b.resolve=t,b.reject=function(g){return new b((function(e,t){t(g)}))},b.race=function(g){return new b((function(e,n){for(var r=q(g),o=r.next();!o.done;o=r.next())t(o.value).Mc(e,n)}))},b.all=function(g){var e=q(g),n=e.next();return n.done?t([]):new b((function(r,o){function c(e){return function(t){l[e]=t,0==--u&&r(l)}}var l=[],u=0;do{l.push(void 0),u++,t(n.value).Mc(c(l.length-1),o),n=e.next()}while(!n.done)}))},b})),l("WeakMap",(function(a){function b(e){if(this.a=(c+=Math.random()+1).toString(),e){e=q(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function e(){}function t(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function n(t){if(!F(t,g)){var n=new e;o(t,g,{value:n})}}function r(t){var r=Object[t];r&&(Object[t]=function(t){return t instanceof e?t:(Object.isExtensible(t)&&n(t),r(t))})}if(function(){if(!a||!Object.seal)return!1;try{var e=Object.seal({}),t=Object.seal({}),n=new a([[e,2],[t,3]]);return 2==n.get(e)&&3==n.get(t)&&(n.delete(e),n.set(t,4),!n.has(e)&&4==n.get(t))}catch(e){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var c=0;return b.prototype.set=function(e,r){if(!t(e))throw Error("Invalid WeakMap key");if(n(e),!F(e,g))throw Error("WeakMap key fail: "+e);return e[g][this.a]=r,this},b.prototype.get=function(e){return t(e)&&F(e,g)?e[g][this.a]:void 0},b.prototype.has=function(e){return t(e)&&F(e,g)&&F(e[g],this.a)},b.prototype.delete=function(e){return!!(t(e)&&F(e,g)&&F(e[g],this.a))&&delete e[g][this.a]},b})),l("Map",(function(a){function b(){var e={};return e.Ya=e.next=e.head=e}function e(e,t){var n=e.a;return d((function(){if(n){for(;n.head!=e.a;)n=n.Ya;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function t(e,t){var n=t&&typeof t;"object"==n||"function"==n?r.has(t)?n=r.get(t):(n=""+ ++g,r.set(t,n)):n="p_"+t;var o=e.b[n];if(o&&F(e.b,n))for(var c=0;c<o.length;c++){var l=o[c];if(t!=t&&l.key!=l.key||t===l.key)return{id:n,list:o,index:c,ma:l}}return{id:n,list:o,index:-1,ma:void 0}}function n(e){if(this.b={},this.a=b(),this.size=0,e){e=q(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),t=new a(q([[e,"s"]]));if("s"!=t.get(e)||1!=t.size||t.get({x:4})||t.set({x:4},"t")!=t||2!=t.size)return!1;var n=t.entries(),r=n.next();return!r.done&&r.value[0]==e&&"s"==r.value[1]&&!((r=n.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!n.next().done)}catch(e){return!1}}())return a;var r=new WeakMap;n.prototype.set=function(e,n){var r=t(this,e=0===e?0:e);return r.list||(r.list=this.b[r.id]=[]),r.ma?r.ma.value=n:(r.ma={next:this.a,Ya:this.a.Ya,head:this.a,key:e,value:n},r.list.push(r.ma),this.a.Ya.next=r.ma,this.a.Ya=r.ma,this.size++),this},n.prototype.delete=function(e){return!(!(e=t(this,e)).ma||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.ma.Ya.next=e.ma.next,e.ma.next.Ya=e.ma.Ya,e.ma.head=null,this.size--,!0)},n.prototype.clear=function(){this.b={},this.a=this.a.Ya=b(),this.size=0},n.prototype.has=function(e){return!!t(this,e).ma},n.prototype.get=function(e){return(e=t(this,e).ma)&&e.value},n.prototype.entries=function(){return e(this,(function(e){return[e.key,e.value]}))},n.prototype.keys=function(){return e(this,(function(e){return e.key}))},n.prototype.values=function(){return e(this,(function(e){return e.value}))},n.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},n.prototype[Symbol.iterator]=n.prototype.entries;var g=0;return n})),l("Set",(function(a){function b(e){if(this.a=new Map,e){e=q(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),t=new a(q([e]));if(!t.has(e)||1!=t.size||t.add(e)!=t||1!=t.size||t.add({x:4})!=t||2!=t.size)return!1;var n=t.entries(),r=n.next();return!r.done&&r.value[0]==e&&r.value[1]==e&&(!(r=n.next()).done&&r.value[0]!=e&&4==r.value[0].x&&r.value[1]==r.value[0]&&n.next().done)}catch(e){return!1}}()?a:(b.prototype.add=function(e){return e=0===e?0:e,this.a.set(e,e),this.size=this.a.size,this},b.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},b.prototype.clear=function(){this.a.clear(),this.size=0},b.prototype.has=function(e){return this.a.has(e)},b.prototype.entries=function(){return this.a.entries()},b.prototype.values=function(){return this.a.values()},b.prototype.keys=b.prototype.values,b.prototype[Symbol.iterator]=b.prototype.values,b.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(r){return e.call(t,r,r,n)}))},b)})),l("Array.prototype.keys",(function(a){return a||function(){return j(this,(function(b){return b}))}})),l("Array.from",(function(a){return a||function(b,e,t){e=null!=e?e:function(e){return e};var n=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof r){b=r.call(b);for(var g=0;!(r=b.next()).done;)n.push(e.call(t,r.value,g++))}else for(r=b.length,g=0;g<r;g++)n.push(e.call(t,b[g],g));return n}})),l("Array.prototype.findIndex",(function(a){return a||function(b,e){return G(this,b,e).na}})),l("Promise.prototype.finally",(function(a){return a||function(b){return this.then((function(e){return Promise.resolve(b()).then((function(){return e}))}),(function(e){return Promise.resolve(b()).then((function(){throw e}))}))}})),l("Object.is",(function(a){return a||function(b,e){return b===e?0!==b||1/b==1/e:b!=b&&e!=e}})),l("Array.prototype.includes",(function(a){return a||function(b,e){var t=this;t instanceof String&&(t=String(t));var n=t.length,r=e||0;for(0>r&&(r=Math.max(r+n,0));r<n;r++){var g=t[r];if(g===b||Object.is(g,b))return!0}return!1}})),l("String.prototype.includes",(function(a){return a||function(b,e){return-1!==K(this,b,"includes").indexOf(b,e||0)}})),l("Array.prototype.values",(function(a){return a||function(){return j(this,(function(b,e){return e}))}})),l("Array.prototype.find",(function(a){return a||function(b,e){return G(this,b,e).Se}})),l("Math.log2",(function(a){return a||function(b){return Math.log(b)/Math.LN2}}));var z="function"==typeof Object.assign?Object.assign:function(a,b){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)F(t,n)&&(a[n]=t[n])}return a};l("Object.assign",(function(a){return a||z})),l("Object.values",(function(a){return a||function(b){var e,t=[];for(e in b)F(b,e)&&t.push(b[e]);return t}})),l("String.prototype.startsWith",(function(a){return a||function(b,e){for(var t=K(this,b,"startsWith"),n=t.length,r=b.length,g=Math.max(0,Math.min(0|e,t.length)),o=0;o<r&&g<n;)if(t[g++]!=b[o++])return!1;return o>=r}}));var V=this||self;function H(a,b){var e,t=a.split("."),n=V;t[0]in n||void 0===n.execScript||n.execScript("var "+t[0]);for(;t.length&&(e=t.shift());)t.length||void 0===b?n=n[e]&&n[e]!==Object.prototype[e]?n[e]:n[e]={}:n[e]=b}function X(a,b){for(var t in b=void 0===b?{}:b)Object.defineProperty(this,t,{value:b[t],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=a,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function W(){}function Y(){}function $(){}function J(){}X.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},X.prototype.stopImmediatePropagation=function(){this.a=!0},X.prototype.stopPropagation=function(){},H("shaka.util.FakeEvent",X);var Q=new Set;if(e.console&&e.console.log.bind){var Z={},ee=(Z[1]=console.error.bind(console),Z[2]=console.warn.bind(console),Z[3]=console.info.bind(console),Z[4]=console.log.bind(console),Z[5]=console.debug.bind(console),Z[6]=console.debug.bind(console),Z);$=ee[2],Y=ee[1]}function te(){this.a={}}function ne(){this.td=new te,this.Jc=this}function ie(a,b){for(var e=[],t=q(a),n=t.next();!n.done;n=t.next())e.push(b(n.value));return e}function re(a,b){for(var e=[],t=q(a),n=t.next();!n.done;n=t.next())b(n=n.value)&&e.push(n);return e}te.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]},te.prototype.get=function(a){return(a=this.a[a])?a.slice():null},te.prototype.remove=function(a,b){a in this.a&&(this.a[a]=this.a[a].filter((function(e){return e!=b})))},ne.prototype.addEventListener=function(a,b){this.td.push(a,b)},ne.prototype.removeEventListener=function(a,b){this.td.remove(a,b)},ne.prototype.dispatchEvent=function(a){for(var b=this.td.get(a.type)||[],e=(b=q(b)).next();!e.done;e=b.next()){e=e.value,a.target=this.Jc,a.currentTarget=this.Jc;try{e.handleEvent?e.handleEvent(a):e.call(this,a)}catch(e){}if(a.a)break}return a.defaultPrevented};var ae=function e(a){var t;return U(e,(function(e){return 1==e.a&&(t=0),3!=e.a?t<a?I(e,t,3):e.u(0):(t++,e.u(2))}))},oe=function e(a){var t,n,r,o,g,c;return U(e,(function(e){return 1==e.a&&(t=-1,r=n=void 0,o=q(a),g=o.next()),5!=e.a?g.done?-1==t?e.u(0):I(e,{na:t,Uf:n,item:r,next:void 0},0):(c=g.value,0<=t?I(e,{na:t,item:r,Uf:n,next:c},5):e.u(5)):(t++,n=r,r=c,g=o.next(),e.u(2))}))},se=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ue(a){var b;a instanceof ue?(ce(this,a.Ma),this.Ab=a.Ab,this.La=a.La,le(this,a.Xb),this.Aa=a.Aa,de(this,a.a.clone()),this.pb=a.pb):a&&(b=String(a).match(se))?(ce(this,b[1]||"",!0),this.Ab=fe(b[2]||""),this.La=fe(b[3]||"",!0),le(this,b[4]),this.Aa=fe(b[5]||"",!0),de(this,b[6]||"",!0),this.pb=fe(b[7]||"")):this.a=new Ee(null)}function ce(a,b,e){a.Ma=e?fe(b,!0):b,a.Ma&&(a.Ma=a.Ma.replace(/:$/,""))}function le(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.Xb=b}else a.Xb=null}function de(a,b,e){b instanceof Ee?a.a=b:(e||(b=he(b,ye)),a.a=new Ee(b))}function fe(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function he(a,b,e){return null!=a?(a=encodeURI(a).replace(b,pe),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function pe(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}(p=ue.prototype).Ma="",p.Ab="",p.La="",p.Xb=null,p.Aa="",p.pb="",p.toString=function(){var a=[],b=this.Ma;if(b&&a.push(he(b,me,!0),":"),b=this.La){a.push("//");var e=this.Ab;e&&a.push(he(e,me,!0),"@"),a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(b=this.Xb)&&a.push(":",String(b))}return(b=this.Aa)&&(this.La&&"/"!=b.charAt(0)&&a.push("/"),a.push(he(b,"/"==b.charAt(0)?ge:ve,!0))),(b=this.a.toString())&&a.push("?",b),(b=this.pb)&&a.push("#",he(b,be)),a.join("")},p.resolve=function(a){var b=this.clone();"data"===b.Ma&&(b=new ue);var e=!!a.Ma;e?ce(b,a.Ma):e=!!a.Ab,e?b.Ab=a.Ab:e=!!a.La,e?b.La=a.La:e=null!=a.Xb;var t=a.Aa;if(e)le(b,a.Xb);else if(e=!!a.Aa){if("/"!=t.charAt(0))if(this.La&&!this.Aa)t="/"+t;else{var n=b.Aa.lastIndexOf("/");-1!=n&&(t=b.Aa.substr(0,n+1)+t)}if(".."==t||"."==t)t="";else if(-1!=t.indexOf("./")||-1!=t.indexOf("/.")){n=0==t.lastIndexOf("/",0),t=t.split("/");for(var r=[],g=0;g<t.length;){var o=t[g++];"."==o?n&&g==t.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),n&&g==t.length&&r.push("")):(r.push(o),n=!0)}t=r.join("/")}}return e?b.Aa=t:e=""!==a.a.toString(),e?de(b,a.a.clone()):e=!!a.pb,e&&(b.pb=a.pb),b},p.clone=function(){return new ue(this)};var me=/[#\/\?@]/g,ve=/[#\?:]/g,ge=/[#\?]/g,ye=/[#\?@]/g,be=/#/g;function Ee(a){this.a=a||null}function Te(a,b){this.a=a,this.b=b}function Ae(a,b){var e=new Te(4,0),t=Ie,n=t.a,r=e.b-n.b;(0<(e.a-n.a||r)?t.c:t.b)(t.a,e,a,b)}function we(a,b,e,t){$([e,"has been deprecated and will be removed in",b,". We are currently at version",a,". Additional information:",t].join(" "))}function Se(a,b,e,t){Y([e,"has been deprecated and has been removed in",b,". We are now at version",a,". Additional information:",t].join(""))}(p=Ee.prototype).xa=null,p.Oc=null,p.add=function(a,b){if(!this.xa&&(this.xa={},this.Oc=0,this.a))for(var e=this.a.split("&"),t=0;t<e.length;t++){var n=e[t].indexOf("="),r=null;if(0<=n){var g=e[t].substring(0,n);r=e[t].substring(n+1)}else g=e[t];g=decodeURIComponent(g.replace(/\+/g," ")),r=r||"",this.add(g,decodeURIComponent(r.replace(/\+/g," ")))}return this.a=null,(e=this.xa.hasOwnProperty(a)&&this.xa[a])||(this.xa[a]=e=[]),e.push(b),this.Oc++,this},p.toString=function(){if(this.a)return this.a;if(!this.xa)return"";var b,a=[];for(b in this.xa)for(var e=encodeURIComponent(b),t=this.xa[b],n=0;n<t.length;n++){var r=e;""!==t[n]&&(r+="="+encodeURIComponent(t[n])),a.push(r)}return this.a=a.join("&")},p.clone=function(){var a=new Ee;if(a.a=this.a,this.xa){var e,b={};for(e in this.xa)b[e]=this.xa[e].concat();a.xa=b,a.Oc=this.Oc}return a},Te.prototype.toString=function(){return"v"+this.a+"."+this.b};var Ie=null;function xe(a,b){return a.concat(b)}function ke(){}function Ce(a){return null!=a}function Ne(a){var b=Object.create(a.prototype||Object.prototype);try{var e=a.call(b);e||(Ae("Factories requiring new","Factories should be plain functions"),e=b)}catch(t){Ae("Factories requiring new","Factories should be plain functions"),e=new a}return e}function Me(a,b){if(0==b.length)return a;var e=b.map((function(e){return new ue(e)}));return a.map((function(e){return new ue(e)})).map((function(t){return e.map((function(e){return t.resolve(e)}))})).reduce(xe,[]).map((function(e){return e.toString()}))}function _e(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[],keyIds:new Set}}var Re={Ua:"video",Ib:"audio",qa:"text",zg:"image",qg:"application"};function Le(a,b){return a=Oe(a),b=Oe(b),a.split("-")[0]==b.split("-")[0]}function Pe(a,b){a=Oe(a),b=Oe(b);var e=a.split("-"),t=b.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function De(a,b){a=Oe(a),b=Oe(b);var e=a.split("-"),t=b.split("-");return 2==e.length&&2==t.length&&e[0]==t[0]}function Oe(a){var b=a.split("-");return a=b[0]||"",b=b[1]||"",a=a.toLowerCase(),a=Ge.get(a)||a,(b=b.toUpperCase())?a+"-"+b:a}function Ue(a,b){return a=Oe(a),(b=Oe(b))==a?4:Pe(b,a)?3:De(b,a)?2:Pe(a,b)?1:0}function Be(a){var b=a.indexOf("-");return a=(a=0<=b?a.substring(0,b):a).toLowerCase(),Ge.get(a)||a}function Fe(a){return a.language?Oe(a.language):a.audio&&a.audio.language?Oe(a.audio.language):a.video&&a.video.language?Oe(a.video.language):"und"}function je(a,b){for(var e=Oe(a),t=new Set,n=q(b),r=n.next();!r.done;r=n.next())t.add(Oe(r.value));for(r=(n=q(t)).next();!r.done;r=n.next())if((r=r.value)==e)return r;for(r=(n=q(t)).next();!r.done;r=n.next())if(Pe(r=r.value,e))return r;for(r=(n=q(t)).next();!r.done;r=n.next())if(De(r=r.value,e))return r;for(r=(t=q(t)).next();!r.done;r=t.next())if(Pe(e,r=r.value))return r;return null}var Ge=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ke(a){this.g=Oe(a),this.f=new Map,this.b=new Set,this.c=new Map,this.a=new ne}function ze(a){for(var b=a.c,e=a.g,t=a.b,n=new Set,r={},g=q(t),o=g.next();!o.done;r={Fb:r.Fb},o=g.next()){r.Fb=o.value,n.add(r.Fb),n.add(Be(r.Fb)),(o=re(b.keys(),function(e){return function(t){var n=e.Fb,r=Be(t),u=Be(n);return t!=r&&n!=u&&r==u}}(r))).sort();var c=q(o);for(o=c.next();!o.done;o=c.next())n.add(o.value);for((o=re(b.keys(),function(e){return function(t){return Be(t)==e.Fb}}(r))).sort(),o=(c=q(o)).next();!o.done;o=c.next())n.add(o.value)}for(n.add(e),e=[],o=(n=q(n)).next();!o.done;o=n.next())(o=b.get(o.value))&&e.push(o);for(e.reverse(),a.f.clear(),o=(b=q(e)).next();!o.done;o=b.next())o.value.forEach((function(e,t){a.f.set(t,e)}));for(b=a.f.keys(),n=new Set,o=(e=q(a.b)).next();!o.done;o=e.next())Ve(o=a.c.get(o.value)||new Map,b,n);0<n.size&&(t={locales:Array.from(t),missing:Array.from(n)},a.a.dispatchEvent(new X("missing-localizations",t)))}function Ve(a,b,e){for(var t=(b=q(b)).next();!t.done;t=b.next())t=t.value,a.get(t)||e.add(t)}(p=Ke.prototype).addEventListener=function(a,b,e){this.a.addEventListener(a,b,e)},p.removeEventListener=function(a,b,e){this.a.removeEventListener(a,b,e||void 0)},p.dispatchEvent=function(a){return this.a.dispatchEvent(a)},p.fe=function(a){var b=this;this.b.clear();for(var e=(a=q(a)).next();!e.done;e=a.next())this.b.add(Oe(e.value));ze(this),(a=re(this.b,(function(e){return!b.c.has(e)}))).length&&this.a.dispatchEvent(new X("unknown-locales",{locales:a})),a=re(this.b,(function(e){return b.c.has(e)})),this.a.dispatchEvent(new X("locale-changed",{locales:a.length?a:[this.g]}))},p.Y=function(a,b,e){a=Oe(a),void 0===e&&(e=He);var t=this.c.get(a)||new Map;return b.forEach((function(n,r){t.has(r)&&e!=He||t.set(r,n)})),this.c.set(a,t),ze(this),this.a.dispatchEvent(new X("locale-updated")),this},p.cg=function(a){for(var b=q(a.keys()),e=b.next();!e.done;e=b.next())e=e.value,a.set(e,this.resolve(e))},p.resolve=function(a){var b=this.f.get(a);return b||(a={locales:Array.from(this.b),missing:a},this.a.dispatchEvent(new X("unknown-localization",a)),"")},H("shaka.ui.Localization",Ke),Ke.prototype.resolve=Ke.prototype.resolve,Ke.prototype.resolveDictionary=Ke.prototype.cg,Ke.prototype.insert=Ke.prototype.Y,Ke.prototype.changeLocale=Ke.prototype.fe,Ke.prototype.dispatchEvent=Ke.prototype.dispatchEvent,Ke.prototype.removeEventListener=Ke.prototype.removeEventListener,Ke.prototype.addEventListener=Ke.prototype.addEventListener;var He=1;function qe(a){this.c=Math.exp(Math.log(.5)/a),this.b=this.a=0}function Xe(a,b,e){var t=Math.pow(a.c,b);e=e*(1-t)+t*a.a,isNaN(e)||(a.a=e,a.b+=b)}function We(a){return a.a/(1-Math.pow(a.c,a.b))}function Ye(){this.b=new qe(2),this.c=new qe(5),this.a=0}function $e(){}function Je(a,b){if(!a&&!b)return!0;if(!a||!b||a.byteLength!=b.byteLength)return!1;if(Qe(a)==Qe(b)&&(a.byteOffset||0)==(b.byteOffset||0))return!0;for(var e=et(a),t=et(b),n=q(ae(a.byteLength)),r=n.next();!r.done;r=n.next())if(e[r=r.value]!=t[r])return!1;return!0}function Qe(a){return a instanceof ArrayBuffer?a:a.buffer}function Ze(a){return a instanceof ArrayBuffer?a:0==a.byteOffset&&a.byteLength==a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer}function et(a,b,e){return nt(a,void 0===b?0:b,e=void 0===e?1/0:e,Uint8Array)}function tt(a,b,e){return nt(a,void 0===b?0:b,e=void 0===e?1/0:e,DataView)}function nt(a,b,e,t){var n=(a.byteOffset||0)+a.byteLength;return b=Math.max(0,Math.min((a.byteOffset||0)+b,n)),new t(Qe(a),b,Math.min(b+Math.max(e,0),n)-b)}function it(a,b,e,t){for(var n=[],r=3;r<arguments.length;++r)n[r-3]=arguments[r];this.severity=a,this.category=b,this.code=e,this.data=n,this.handled=!1}function at(){var a,b,e=new Promise((function(e,t){a=e,b=t}));return e.resolve=a,e.reject=b,e}function ot(a){this.b=a,this.a=void 0}function st(){}function ut(a){if(!a)return"";239==(a=et(a))[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3)),a=pt(a),a=escape(a);try{return decodeURIComponent(a)}catch(e){throw new it(2,2,2004)}}function ct(a,b,e){if(!a)return"";if(!e&&0!=a.byteLength%2)throw new it(2,2,2004);var t=Math.floor(a.byteLength/2);e=new Uint16Array(t),a=tt(a);for(var n=(t=q(ae(t))).next();!n.done;n=t.next())e[n=n.value]=a.getUint16(2*n,b);return pt(e)}function lt(a){function b(t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}if(!a)return"";var e=et(a);if(239==e[0]&&187==e[1]&&191==e[2])return ut(e);if(254==e[0]&&255==e[1])return ct(e.subarray(2),!1);if(255==e[0]&&254==e[1])return ct(e.subarray(2),!0);if(0==e[0]&&0==e[2])return ct(a,!1);if(0==e[1]&&0==e[3])return ct(a,!0);if(b(0)&&b(1)&&b(2)&&b(3))return ut(a);throw new it(2,2,2003)}function ft(a){a=encodeURIComponent(a);var b=unescape(a);a=new Uint8Array(b.length);for(var e=(b=q(oe(b))).next();!e.done;e=b.next())a[(e=e.value).na]=e.item.charCodeAt(0);return Ze(a)}function ht(a,b){for(var e=new ArrayBuffer(2*a.length),t=new DataView(e),n=q(oe(a)),r=n.next();!r.done;r=n.next())r=r.value,t.setUint16(2*r.na,r.item.charCodeAt(0),b);return e}function pt(a){return mt.value()(a)}Ke.ConflictResolution={USE_OLD:0,USE_NEW:He},Ke.UNKNOWN_LOCALES="unknown-locales",Ke.UNKNOWN_LOCALIZATION="unknown-localization",Ke.MISSING_LOCALIZATIONS="missing-localizations",Ke.LOCALE_CHANGED="locale-changed",Ke.LOCALE_UPDATED="locale-updated",Ye.prototype.getBandwidthEstimate=function(a){return 128e3>this.a?a:Math.min(We(this.b),We(this.c))},H("shaka.util.BufferUtils",$e),$e.toDataView=tt,$e.toUint8=et,$e.toArrayBuffer=Ze,$e.equal=Je,it.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},H("shaka.util.Error",it),it.Severity={RECOVERABLE:1,CRITICAL:2},it.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},it.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},at.prototype.resolve=function(){},at.prototype.reject=function(){},ot.prototype.value=function(){return null==this.a&&(this.a=this.b()),this.a},H("shaka.util.StringUtils",st),st.resetFromCharCode=function(){mt.a=void 0},st.toUTF16=ht,st.toUTF8=ft,st.fromBytesAutoDetect=lt,st.fromUTF16=ct,st.fromUTF8=ut;var mt=new ot((function(){function a(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var b={ab:65536};0<b.ab;(b={ab:b.ab}).ab/=2)if(a(b.ab))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.ab)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.ab));return n}}(b);return null}));function vt(){}function gt(a){return a=pt(et(a)),btoa(a)}function yt(a,b){b=null==b||b;var e=gt(a).replace(/\+/g,"-").replace(/\//g,"_");return b?e:e.replace(/[=]*$/,"")}function bt(a){var b=e.atob(a.replace(/-/g,"+").replace(/_/g,"/"));a=new Uint8Array(b.length);for(var t=(b=q(oe(b))).next();!t.done;t=b.next())a[(t=t.value).na]=t.item.charCodeAt(0);return a}function Et(a){for(var b=a.length/2,t=new Uint8Array(b),n=(b=q(ae(b))).next();!n.done;n=b.next())t[n=n.value]=e.parseInt(a.substr(2*n,2),16);return t}function Tt(a){var b=et(a);a="";for(var e=(b=q(b)).next();!e.done;e=b.next())1==(e=(e=e.value).toString(16)).length&&(e="0"+e),a+=e;return a}function At(a){for(var b=[],e=0;e<arguments.length;++e)b[e]=arguments[e];var t=0,n=q(b);for(e=n.next();!e.done;e=n.next())t+=e.value.byteLength;for(t=new Uint8Array(t),n=0,e=(b=q(b)).next();!e.done;e=b.next())e=e.value,t.set(et(e),n),n+=e.byteLength;return t}function wt(){var a=this;this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.l=[],this.c=[],this.g=[],this.f=!1,this.a.on("data",(function(b){a.c=b.captions,a.g=b.metadata,a.l.push(At(b.initSegment,b.data))})),this.a.on("done",(function(){var b={data:At.apply(vt,f(a.l)),captions:a.c,metadata:a.g};a.b.resolve(b),a.f=!1}))}function St(a,b){if(!e.muxjs||"mp2t"!=a.toLowerCase().split(";")[0].split("/")[1])return!1;if(b)return MediaSource.isTypeSupported(It(b,a));var t=It("audio",a),n=It("video",a);return MediaSource.isTypeSupported(t)||MediaSource.isTypeSupported(n)}function It(a,b){var e=b.replace(/mp2t/i,"mp4");"audio"==a&&(e=e.replace("video","audio"));var t=/avc1\.(66|77|100)\.(\d+)/.exec(e);if(t){var n="avc1.",r=t[1],g=Number(t[2]);n=("66"==r?n+"4200":"77"==r?n+"4d00":n+"6400")+(g>>4).toString(16),n+=(15&g).toString(16),e=e.replace(t[0],n)}return e}function xt(a){this.b=a,this.a=null}function kt(a){this.b=a,this.a=null}function Ct(a,b){var e={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.o=null==a.maxAttempts?e.maxAttempts:a.maxAttempts,this.f=null==a.baseDelay?e.baseDelay:a.baseDelay,this.l=null==a.fuzzFactor?e.fuzzFactor:a.fuzzFactor,this.g=null==a.backoffFactor?e.backoffFactor:a.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==b&&b)&&(this.a=1)}function Nt(a){var b,e;return B((function(t){if(1==t.a){if(a.a>=a.o){if(!a.c)throw new it(2,7,1010);a.a=1,a.b=a.f}return b=a.a,a.a++,0==b?t.return():(e=a.b*(1+(2*Math.random()-1)*a.l),I(t,new Promise((function(t){new kt(t).P(e/1e3)})),2))}a.b*=a.g,x(t)}))}function Mt(a,b){this.promise=a,this.c=b,this.a=!1}function _t(a){return new Mt(Promise.reject(a),(function(){return Promise.resolve()}))}function Rt(){var a=Promise.reject(new it(2,7,7001));return a.catch((function(){})),new Mt(a,(function(){return Promise.resolve()}))}function Lt(a){return new Mt(Promise.resolve(a),(function(){return Promise.resolve()}))}function Pt(a){return new Mt(a,(function(){return a.catch((function(){}))}))}function Dt(a){return new Mt(Promise.all(a.map((function(b){return b.promise}))),(function(){return Promise.all(a.map((function(b){return b.abort()})))}))}function Ot(a){var e=new Set;return function b(t){switch(typeof t){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return t;default:if(!t||t.buffer&&t.buffer.constructor==ArrayBuffer)return t;if(e.has(t))return null;var n=t.constructor==Array;if(t.constructor!=Object&&!n)return null;e.add(t);var g,r=n?[]:{};for(g in t)r[g]=b(t[g]);return n&&(r.length=t.length),r}}(a)}function Ut(a){var e,b={};for(e in a)b[e]=a[e];return b}function Bt(a,b){return!("number"!=typeof a||"number"!=typeof b||!isNaN(a)||!isNaN(b))||a===b}function Ft(a,b){var e=a.indexOf(b);-1<e&&a.splice(e,1)}function jt(a,b,e){if(e||(e=Bt),a.length!=b.length)return!1;b=b.slice();for(var t={},n=(a=q(a)).next();!n.done;t={ld:t.ld},n=a.next()){if(t.ld=n.value,-1==(n=b.findIndex(function(t){return function(g){return e(t.ld,g)}}(t))))return!1;b[n]=b[b.length-1],b.pop()}return 0==b.length}function Gt(a,b,e){if(e||(e=Bt),a.length!=b.length)return!1;for(var t=0;t<a.length;t++)if(!e(a[t],b[t]))return!1;return!0}function Kt(){this.a=[]}function zt(a,b){a.a.push(b.finally((function(){Ft(a.a,b)})))}function Vt(a){ne.call(this),this.f=!1,this.g=new Kt,this.a=new Set,this.b=new Set,this.c=a||null}function Ht(a,b,e){e=e||$t;var t=Jt[a];(!t||e>=t.priority)&&(Jt[a]={priority:e,Tf:b})}function qt(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b,licenseRequestType:null,sessionId:null}}function Xt(){this.a=0}function Wt(a,b,e){Mt.call(this,a,b),this.b=e}H("shaka.util.Uint8ArrayUtils",vt),vt.concat=At,vt.toHex=Tt,vt.fromHex=Et,vt.fromBase64=bt,vt.toBase64=yt,vt.toStandardBase64=gt,vt.equal=function(a,b){return Ae("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),Je(a,b)},wt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},xt.prototype.P=function(a){var b=this;this.stop();var t=!0,n=null;return this.a=function(){e.clearTimeout(n),t=!1},n=e.setTimeout((function(){t&&b.b()}),1e3*a),this},xt.prototype.stop=function(){this.a&&(this.a(),this.a=null)},kt.prototype.ua=function(){return this.stop(),this.b(),this},kt.prototype.P=function(a){var b=this;return this.stop(),this.a=new xt((function(){b.b()})).P(a),this},kt.prototype.Z=function(a){var b=this;return this.stop(),this.a=new xt((function(){b.a.P(a),b.b()})).P(a),this},kt.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},H("shaka.util.Timer",kt),kt.prototype.stop=kt.prototype.stop,kt.prototype.tickEvery=kt.prototype.Z,kt.prototype.tickAfter=kt.prototype.P,kt.prototype.tickNow=kt.prototype.ua,Mt.prototype.abort=function(){return this.a=!0,this.c()},Mt.prototype.finally=function(a){return this.promise.then((function(){return a(!0)}),(function(){return a(!1)})),this},Mt.prototype.aa=function(a,b){function e(e){return function(o){if(n.a&&e)r.reject(g);else{var c=e?a:b;c?t=function(a,b,e){try{var t=a(b);return t&&t.promise&&t.abort?(e.resolve(t.promise),function(){return t.abort()}):(e.resolve(t),function(){return Promise.resolve(t).then((function(){}),(function(){}))})}catch(t){return e.reject(t),function(){return Promise.resolve()}}}(c,o,r):(e?r.resolve:r.reject)(o)}}}function t(){return r.reject(g),n.abort()}var n=this,r=new at,g=new it(2,7,7001);return this.promise.then(e(!0),e(!1)),new Mt(r,(function(){return t()}))},H("shaka.util.AbortableOperation",Mt),Mt.prototype.chain=Mt.prototype.aa,Mt.prototype.finally=Mt.prototype.finally,Mt.all=Dt,Mt.prototype.abort=Mt.prototype.abort,Mt.notAbortable=Pt,Mt.completed=Lt,Mt.aborted=Rt,Mt.failed=_t,Kt.prototype.destroy=function(){for(var a=[],b=q(this.a),e=b.next();!e.done;e=b.next())(e=e.value).promise.catch((function(){})),a.push(e.abort());return this.a=[],Promise.all(a)},T(Vt,ne),(p=Vt.prototype).Vf=function(a){this.a.add(a)},p.mg=function(a){this.a.delete(a)},p.Ze=function(){this.a.clear()},p.Wf=function(a){this.b.add(a)},p.ng=function(a){this.b.delete(a)},p.$e=function(){this.b.clear()},p.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},p.request=function(a,b){var e=this,t=new Xt;if(this.f){var n=Promise.reject(new it(2,7,7001));return n.catch((function(){})),new Wt(n,(function(){return Promise.resolve()}),t)}b.method=b.method||"GET",b.headers=b.headers||{},b.retryParameters=b.retryParameters?Ot(b.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},b.uris=Ot(b.uris);var r=(n=function(a,b,e){for(var t=Lt(void 0),n={},r=(a=q(a.a)).next();!r.done;n={pd:n.pd},r=a.next())n.pd=r.value,t=t.aa(function(g){return function(){return e.body&&(e.body=Ze(e.body)),g.pd(b,e)}}(n));return t.aa(void 0,(function(g){if(g instanceof it&&7001==g.code)throw g;throw new it(2,1,1006,g)}))}(this,a,b)).aa((function(){return function e(a,b,t,n,r,o,g){var c=new ue(t.uris[r]),l=c.Ma,d=!1;l||(l=(l=location.protocol).slice(0,-1),ce(c,l),t.uris[r]=c.toString()),l=l.toLowerCase();var f,h=(l=Jt[l])?l.Tf:null;return h?Pt(Nt(n)).aa((function(){return a.f?Rt():(f=Date.now(),h(t.uris[r],t,b,(function(e,u,t){a.c&&b==Yt&&(a.c(e,u),d=!0,g.a=t)})))})).aa((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-f),{response:e,If:d}}),(function(c){if(a.f)return Rt();if(c instanceof it){if(7001==c.code)throw c;if(1010==c.code)throw o;if(1==c.severity){var u=new X("retry",{error:c});return a.dispatchEvent(u),r=(r+1)%t.uris.length,e(a,b,t,n,r,c,g)}}throw c})):_t(new it(2,1,1e3,c))}(e,a,b,new Ct(b.retryParameters,!1),0,null,t)})),g=r.aa((function(t){return function(a,b,e){for(var t=Lt(void 0),n={},r=(a=q(a.b)).next();!r.done;n={qd:n.qd},r=a.next())n.qd=r.value,t=t.aa(function(g){return function(){var t=e.response;return t.data&&(t.data=Ze(t.data)),g.qd(b,t)}}(n));return t.aa((function(){return e}),(function(g){var e=2;if(g instanceof it){if(7001==g.code)throw g;e=g.severity}throw new it(e,1,1007,g)}))}(e,a,t)})),o=Date.now(),c=0;n.promise.then((function(){c=Date.now()-o}),(function(){}));var l=0;r.promise.then((function(){l=Date.now()}),(function(){}));var d=g.aa((function(t){var n=Date.now()-l,u=t.response;return u.timeMs+=c,u.timeMs+=n,t.If||!e.c||u.fromCache||a!=Yt||e.c(u.timeMs,u.data.byteLength),u}),(function(e){throw e&&(e.severity=2),e}));return n=new Wt(d.promise,(function(){return d.abort()}),t),zt(this.g,n),n},H("shaka.net.NetworkingEngine",Vt),Vt.prototype.request=Vt.prototype.request,Vt.prototype.destroy=Vt.prototype.destroy,Vt.makeRequest=qt,Vt.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},Vt.prototype.clearAllResponseFilters=Vt.prototype.$e,Vt.prototype.unregisterResponseFilter=Vt.prototype.ng,Vt.prototype.registerResponseFilter=Vt.prototype.Wf,Vt.prototype.clearAllRequestFilters=Vt.prototype.Ze,Vt.prototype.unregisterRequestFilter=Vt.prototype.mg,Vt.prototype.registerRequestFilter=Vt.prototype.Vf,Vt.unregisterScheme=function(a){delete Jt[a]},Vt.registerScheme=Ht,Vt.NumBytesRemainingClass=Xt,T(Wt,Mt),Vt.PendingRequest=Wt;var Yt=1;Vt.RequestType={MANIFEST:0,SEGMENT:Yt,LICENSE:2,APP:3,TIMING:4};var $t=3;Vt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:$t};var Jt={};function Qt(a){this.a=!1,this.b=new at,this.c=a}function Zt(a,b){if(a.a){if(b instanceof it&&7003==b.code)throw b;throw new it(2,7,7003,b)}}function en(){this.a=new te}function tn(a,b,e,t){this.target=a,this.type=b,this.listener=e,this.a=function(a,b){if(null==b)return!1;if("boolean"==typeof b)return b;var e=new Set(["passive","capture"]);return Object.keys(b).filter((function(t){return!e.has(t)})),function(a){var b=nn;if(null==b){b=!1;try{var e={},t={get:function(){return b=!0,!1}};Object.defineProperty(e,"passive",t),Object.defineProperty(e,"capture",t),t=function(){},a.addEventListener("test",t,e),a.removeEventListener("test",t,e)}catch(e){b=!1}nn=b}return b||!1}(a)?b:b.capture||!1}(a,t),this.target.addEventListener(b,e,this.a)}Qt.prototype.destroy=function(){var a=this;return this.a?this.b:(this.a=!0,this.c().then((function(){a.b.resolve()}),(function(){a.b.resolve()})))},(p=en.prototype).release=function(){this.yb(),this.a=null},p.h=function(a,b,e,t){this.a&&(a=new tn(a,b,e,t),this.a.push(b,a))},p.ya=function(a,b,e,t){var n=this;this.h(a,b,(function t(g){n.Da(a,b,t),e(g)}),t)},p.Da=function(a,b,e){if(this.a)for(var t=this.a.get(b)||[],n=(t=q(t)).next();!n.done;n=t.next())(n=n.value).target!=a||e!=n.listener&&e||(n.Da(),this.a.remove(b,n))},p.yb=function(){if(this.a){var e,a=this.a,b=[];for(e in a.a)b.push.apply(b,f(a.a[e]));for(b=(a=q(b)).next();!b.done;b=a.next())b.value.Da();this.a.a={}}},H("shaka.util.EventManager",en),en.prototype.removeAll=en.prototype.yb,en.prototype.unlisten=en.prototype.Da,en.prototype.listenOnce=en.prototype.ya,en.prototype.listen=en.prototype.h,en.prototype.release=en.prototype.release,tn.prototype.Da=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var nn=void 0;function rn(){}function an(a){return new ue(a=lt(a)).La}function on(a,b,e){function t(e){tt(r).setUint32(g,e.byteLength,!0),g+=4,r.set(et(e),g),g+=e.byteLength}if(!e||!e.byteLength)throw new it(2,6,6015);var n;n="string"==typeof b?ht(b,!0):b,a=ht(a=lt(a),!0);var r=new Uint8Array(12+a.byteLength+n.byteLength+e.byteLength),g=0;return t(a),t(n),t(e),r}function sn(a){for(var b=new Map,e=q(Object.keys(a)),t=e.next();!t.done;t=e.next())t=t.value,b.set(t,a[t]);return b}function un(a){var b={};return a.forEach((function(e,t){b[t]=e})),b}function td(a,b){if(!a&&!b)return!0;if(a&&!b||b&&!a)return!1;if(a.size!=b.size)return!1;for(var e=q(a),t=e.next();!t.done;t=e.next()){var n=q(t.value);if(t=n.next().value,n=n.next().value,!b.has(t))return!1;if((t=b.get(t))!=n||null==t)return!1}return!0}function cn(a,b){var e=a;return b&&(e+='; codecs="'+b+'"'),e}function ln(a){var b=(a=a.split("."))[0];return a.pop(),b}H("shaka.util.FairPlayUtils",rn),rn.initDataTransform=on,rn.defaultGetContentId=an;var dn=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function fn(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function hn(a){return""!=yn().canPlayType(a)}function pn(){return gn("Tizen")}function mn(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!pn()}function vn(){if(!mn())return null;var a=navigator.userAgent.match(/Version\/(\d+)/);return a||(a=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(a[1],10):null}function gn(a){return(navigator.userAgent||"").includes(a)}function yn(){return En||(bn||(bn=new kt((function(){En=null}))),(En=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(En=document.createElement("video")),bn.P(1),En)}var bn=null,En=null;function Tn(a,b){var e=this;b=void 0===b?1:b,this.B=a,this.s=new Set,this.a=this.l=null,this.M=!1,this.G=0,this.c=null,this.b=new en,this.f=new Map,this.A=[],this.o=new at,this.m=null,this.g=function(t){e.o.reject(t),a.onError(t)},this.X=new Map,this.R=new Map,this.L=new kt((function(){return function(a){var b=a.X,e=a.R;e.clear(),b.forEach((function(t,n){return e.set(n,t)})),(b=Array.from(e.values())).length&&b.every((function(e){return"expired"==e}))&&a.g(new it(2,6,6014)),a.B.Vc(un(e))}(e)})),this.C=!1,this.F=[],this.J=!1,this.V=new kt((function(){!function(a){a.f.forEach((function(b,e){var t=b.Hd,n=e.expiration;isNaN(n)&&(n=1/0),n!=t&&(a.B.onExpirationUpdated(e.sessionId,n),b.Hd=n)}))}(e)})).Z(b),this.o.catch((function(){})),this.I=new Qt((function(){return function(a){return B((function(b){switch(b.a){case 1:return a.b.release(),a.b=null,a.o.reject(),a.V.stop(),a.V=null,a.L.stop(),a.L=null,I(b,On(a),2);case 2:if(!a.a){b.u(3);break}return k(b,4),I(b,a.a.setMediaKeys(null),6);case 6:N(b,5);break;case 4:M(b);case 5:a.a=null;case 3:a.c=null,a.s.clear(),a.l=null,a.A=[],a.m=null,a.g=function(){},a.B=null,x(b)}}))}(e)}))}function An(a,b,e){return a.A=e,a.C=0<e.length,wn(a,b)}function wn(a,b){var t=function(a){if(0==(a=sn(a.m.clearKeys)).size)return null;var b=[],t=[];a.forEach((function(e,n){var g=Et(n),r=Et(e);g={kty:"oct",kid:yt(g,!1),k:yt(r,!1)},b.push(g),t.push(g.kid)})),a=JSON.stringify({keys:b});var n=JSON.stringify({kids:t});return n=[{initData:et(ft(n)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:n,keyIds:new Set(t)}}(a);if(t)for(var n=q(b),r=n.next();!r.done;r=n.next())(r=r.value).video&&(r.video.drmInfos=[t]),r.audio&&(r.audio.drmInfos=[t]);for((t=b.some((function(g){return!!(g.video&&g.video.drmInfos.length||g.audio&&g.audio.drmInfos.length)})))||function(a,b){var e=[];b.forEach((function(t,g){e.push({keySystem:g,licenseServerUri:t,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})}));for(var t=q(a),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.drmInfos=e),n.audio&&(n.audio.drmInfos=e)}(b,n=sn(a.m.servers)),r=(n=q(b)).next();!r.done;r=n.next())for(var o=(r=q(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]))).next();!o.done;o=r.next())jn(o.value,sn(a.m.servers),sn(a.m.advanced||{}));return(n=function(a,b){for(var e=new Set,t=q(b),n=t.next();!n.done;n=t.next()){var r=q(((n=n.value).video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[]));for(n=r.next();!n.done;n=r.next())e.add(n.value)}for(t=q(e),n=t.next();!n.done;n=t.next())jn(n.value,sn(a.m.servers),sn(a.m.advanced||{}));r=a.C?"required":"optional";var g=a.C?["persistent-license"]:["temporary"];for(t=new Map,e=q(e),n=e.next();!n.done;n=e.next())n=n.value,t.set(n.keySystem,{initDataTypes:["cenc"],audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:r,sessionTypes:g,label:n.keySystem,drmInfos:[]});for(e=q(b),n=e.next();!n.done;n=e.next())for(n=n.value,r=q([n.audio,n.video]),n=r.next();!n.done;n=r.next())if(g=n.value){var o=Mn(g),c=null;"ac-3"==g.codecs.toLowerCase()&&pn()&&(c=Mn(g,"ec-3"));var l=q(g.drmInfos);for(n=l.next();!n.done;n=l.next()){var d=n.value;(n=t.get(d.keySystem)).drmInfos.push(d),d.initData&&d.initData.length&&(n.initDataTypes=f(new Set(d.initData.map((function(e){return e.initDataType})))).concat()),d.distinctiveIdentifierRequired&&(n.distinctiveIdentifier="required"),d.persistentStateRequired&&(n.persistentState="required");var h={robustness:(d="audio"==g.type?d.audioRobustness:d.videoRobustness)||"",contentType:o};"audio"==g.type?n.audioCapabilities.push(h):n.videoCapabilities.push(h),c&&(d={robustness:d||"",contentType:c},"audio"==g.type?n.audioCapabilities.push(d):n.videoCapabilities.push(d))}}return t}(a,b)).size?(n=_n(a,n),t?n:n.catch((function(){}))):(a.M=!0,Promise.resolve())}function Sn(a){return B((function(e){if(1==e.a)return a.l&&a.c&&a.c.serverCertificate&&a.c.serverCertificate.length?(k(e,3),I(e,a.l.setServerCertificate(a.c.serverCertificate),5)):e.u(0);if(3!=e.a)return N(e,0);throw new it(2,6,6004,M(e).message)}))}function In(a){for(var b=(a.c?a.c.initData:[])||[],e=q(b),t=e.next();!t.done;t=e.next())xn(a,(t=t.value).initDataType,t.initData);for(t=(e=q(a.A)).next();!t.done;t=e.next())Rn(a,t.value);return b.length||a.A.length||a.o.resolve(),a.o}function xn(a,b,e){for(var t=a.f.values(),n=(t=q(t)).next();!n.done;n=t.next())if(Je(e,n.value.initData)&&!gn("Tizen 2"))return;!function(a,b,e){try{var t=a.C?a.l.createSession("persistent-license"):a.l.createSession()}catch(e){return void a.g(new it(2,6,6005,e.message))}a.b.h(t,"message",(function(e){a.a&&a.m.delayLicenseRequestUntilPlayed&&a.a.paused&&!a.J?a.F.push(e):Pn(a,e)})),a.b.h(t,"keystatuseschange",(function(e){return Dn(a,e)})),a.f.set(t,{initData:e,loaded:!1,Hd:1/0,Ra:null});try{e=a.m.initDataTransform(e,b,a.c)}catch(e){return b=e,e instanceof it||(b=new it(2,6,6016,e)),void a.g(b)}a.m.logLicenseExchange&&yt(e),t.generateRequest(b,e).catch((function(e){if(!a.I.a){a.f.delete(t);var n=e.errorCode;if(n&&n.systemCode){var g=n.systemCode;0>g&&(g+=Math.pow(2,32)),g="0x"+g.toString(16)}a.g(new it(2,6,6006,e.message,e,g))}}))}(a,b,e)}function kn(a){return a?a.keySystem:""}function Cn(a,b){if(navigator.userAgent.match(/Edge\//))return!0;if(b=b.toLowerCase(),pn()&&b.includes('codecs="ac-3"')){var e=b.replace("ac-3","ec-3");return a.s.has(b)||a.s.has(e)}return a.s.has(b)}function Nn(a){return a=ie(a=a.f.keys(),(function(b){return b.sessionId})),Array.from(a)}function Mn(a,b){var e=cn(a.mimeType,b||a.codecs);return St(e)?It(a.type,e):e}function _n(a,b){var e,t,n,r,g,o,c,l,d,f,h,m,v,y,E,T,A,w,S,x,C;return B((function(_){switch(_.a){case 1:if(1==b.size&&b.has(""))throw new it(2,6,6e3);for(e=q(b.values()),t=e.next();!t.done;t=e.next())0==(n=t.value).audioCapabilities.length&&delete n.audioCapabilities,0==n.videoCapabilities.length&&delete n.videoCapabilities;g=q([!0,!1]),o=g.next();case 2:if(o.done){_.u(4);break}c=o.value,l=q(b.keys()),d=l.next();case 5:if(d.done){_.u(7);break}if(f=d.value,h=b.get(f),h.drmInfos.some((function(e){return!!e.licenseServerUri}))!=c){_.u(6);break}return k(_,8),I(_,navigator.requestMediaKeySystemAccess(f,[h]),10);case 10:r=_.b,_.u(7);break;case 8:M(_);case 9:Zt(a.I);case 6:d=l.next(),_.u(5);break;case 7:if(r){_.u(4);break}o=g.next(),_.u(2);break;case 4:if(!r)throw new it(2,6,6001);for(Zt(a.I),k(_,11),a.s.clear(),m=r.getConfiguration(),v=m.audioCapabilities||[],y=m.videoCapabilities||[],E=q(v),T=E.next();!T.done;T=E.next())A=T.value,a.s.add(A.contentType.toLowerCase());for(w=q(y),T=w.next();!T.done;T=w.next())S=T.value,a.s.add(S.contentType.toLowerCase());if(a.c=function(a,b){var e=[],t=[],n=[],r=new Set;return function(a,b,e,t,n){for(var r={},g=(a=q(a)).next();!g.done;r={Ea:r.Ea},g=a.next()){if(r.Ea=g.value,b.includes(r.Ea.licenseServerUri)||b.push(r.Ea.licenseServerUri),r.Ea.serverCertificate&&(e.some(function(e){return function(t){return Je(t,e.Ea.serverCertificate)}}(r))||e.push(r.Ea.serverCertificate)),r.Ea.initData){g={};for(var o=q(r.Ea.initData),c=o.next();!c.done;g={Ec:g.Ec},c=o.next())g.Ec=c.value,t.some(function(e){return function(t){var n=e.Ec;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Je(t.initData,n.initData)}}(g))||t.push(g.Ec)}if(r.Ea.keyIds)for(g=q(r.Ea.keyIds),o=g.next();!o.done;o=g.next())n.add(o.value)}}(b.drmInfos,e,t,n,r),{keySystem:a,licenseServerUri:e[0],distinctiveIdentifierRequired:"required"==b.distinctiveIdentifier,persistentStateRequired:"required"==b.persistentState,audioRobustness:(b.audioCapabilities?b.audioCapabilities[0].robustness:"")||"",videoRobustness:(b.videoCapabilities?b.videoCapabilities[0].robustness:"")||"",serverCertificate:t[0],initData:n,keyIds:r}}(r.keySystem,b.get(r.keySystem)),!a.c.licenseServerUri)throw new it(2,6,6012,a.c.keySystem);return I(_,r.createMediaKeys(),13);case 13:return x=_.b,Zt(a.I),a.l=x,a.M=!0,I(_,Sn(a),14);case 14:Zt(a.I),N(_,0);break;case 11:if(C=M(_),Zt(a.I,C),a.c=null,a.s.clear(),C instanceof it)throw C;throw new it(2,6,6002,C.message)}}))}function Rn(a,b){var e,t,n,r,g;return B((function(o){switch(o.a){case 1:try{e=a.l.createSession("persistent-license")}catch(e){return t=new it(2,6,6005,e.message),a.g(t),o.return(Promise.reject(t))}return a.b.h(e,"message",(function(e){a.a&&a.m.delayLicenseRequestUntilPlayed&&a.a.paused&&!a.J?a.F.push(e):Pn(a,e)})),a.b.h(e,"keystatuseschange",(function(e){return Dn(a,e)})),n={initData:null,loaded:!1,Hd:1/0,Ra:null},a.f.set(e,n),k(o,2),I(o,e.load(b),4);case 4:return r=o.b,Zt(a.I),r?(n.loaded=!0,Fn(a)&&a.o.resolve(),o.return(e)):(a.f.delete(e),a.g(new it(2,6,6013)),o.return(Promise.resolve()));case 2:g=M(o),Zt(a.I,g),a.f.delete(e),a.g(new it(2,6,6005,g.message));case 3:return o.return(Promise.resolve())}}))}function Ln(a,b,e){return"skd"==b&&(b=e.serverCertificate,a=on(a,e=an(a),b)),a}function Pn(a,b){var e,t,n,r,g,o,c,l,d,f,u,h;B((function(m){switch(m.a){case 1:return e=b.target,a.m.logLicenseExchange&&yt(b.message),t=a.f.get(e),n=a.c.licenseServerUri,r=a.m.advanced[a.c.keySystem],"individualization-request"==b.messageType&&r&&r.individualizationServer&&(n=r.individualizationServer),(g=qt([n],a.m.retryParameters)).body=b.message,g.method="POST",g.licenseRequestType=b.messageType,g.sessionId=e.sessionId,"com.microsoft.playready"!=a.c.keySystem&&"com.chromecast.playready"!=a.c.keySystem||function(a){var b=ct(a.body,!0,!0);if(b.includes("PlayReadyKeyMessage")){for(var e=q((b=(new DOMParser).parseFromString(b,"application/xml")).getElementsByTagName("HttpHeader")),t=e.next();!t.done;t=e.next())t=t.value,a.headers[t.getElementsByTagName("name")[0].textContent]=t.getElementsByTagName("value")[0].textContent;a.body=bt(b.getElementsByTagName("Challenge")[0].textContent)}else a.headers["Content-Type"]="text/xml; charset=utf-8"}(g),o=Date.now(),k(m,2),I(m,a.B.Ub.request(2,g).promise,4);case 4:c=m.b,N(m,3);break;case 2:return l=M(m),d=new it(2,6,6007,l),a.g(d),t&&t.Ra&&t.Ra.reject(d),m.return();case 3:return a.I.a?m.return():(a.G+=(Date.now()-o)/1e3,a.m.logLicenseExchange&&yt(c.data),k(m,5),I(m,e.update(c.data),7));case 7:N(m,6);break;case 5:return f=M(m),u=new it(2,6,6008,f.message),a.g(u),t&&t.Ra&&t.Ra.reject(u),m.return();case 6:h=new X("drmsessionupdate"),a.B.onEvent(h),t&&(t.Ra&&t.Ra.resolve(),new kt((function(){t.loaded=!0,Fn(a)&&a.o.resolve()})).P(Kn)),x(m)}}))}function Dn(a,b){var e=b.target,t=a.f.get(e),n=!1;e.keyStatuses.forEach((function(g,e){if("string"==typeof e){var r=e;e=g,g=r}if("com.microsoft.playready"==a.c.keySystem&&16==e.byteLength&&(gn("Trident/")||navigator.userAgent.match(/Edge?\//))){var o=(r=tt(e)).getUint32(0,!0),c=r.getUint16(4,!0),l=r.getUint16(6,!0);r.setUint32(0,o,!1),r.setUint16(4,c,!1),r.setUint16(6,l,!1)}"com.microsoft.playready"==a.c.keySystem&&"status-pending"==g&&(g="usable"),"status-pending"!=g&&(t.loaded=!0),"expired"==g&&(n=!0),r=Tt(e),a.X.set(r,g)}));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&t&&!t.Ra&&(a.f.delete(e),e.close().catch((function(){}))),Fn(a)&&(a.o.resolve(),a.L.P(zn))}function On(a){var b;return B((function(e){return b=Array.from(a.f.keys()),a.f.clear(),I(e,Promise.all(b.map((function(e){return B((function(t){return 1==t.a?(k(t,2),I(t,function(a){var b;return B((function(e){return 1==e.a?(b=new Promise((function(e,t){new kt(t).P(Gn)})),k(e,2),I(e,Promise.race([Promise.all([a.close(),a.closed]),b]),4)):2!=e.a?N(e,0):(M(e),void x(e))}))}(e),4)):2!=t.a?N(t,0):(M(t),void x(t))}))}))),0)}))}function Un(a,b){var e=b.audio,t=b.video;if(e&&e.encrypted){var n=Mn(e);if(!Cn(a,n))return!1}if(t&&t.encrypted&&!Cn(a,n=Mn(t)))return!1;var r=kn(a.c);return 0==(e=(t?t.drmInfos:[]).concat(e?e.drmInfos:[])).length||e.some((function(g){return g.keySystem==r}))}function Bn(a,b){if(!a.length)return b;if(!b.length)return a;for(var e=[],t=q(a),n=t.next();!n.done;n=t.next()){n=n.value;for(var r=q(b),g=r.next();!g.done;g=r.next())if(g=g.value,n.keySystem==g.keySystem){r=(r=(r=[]).concat(n.initData||[])).concat(g.initData||[]);var o=n.keyIds&&g.keyIds?new Set(f(n.keyIds).concat(f(g.keyIds))):n.keyIds||g.keyIds;e.push({keySystem:n.keySystem,licenseServerUri:n.licenseServerUri||g.licenseServerUri,distinctiveIdentifierRequired:n.distinctiveIdentifierRequired||g.distinctiveIdentifierRequired,persistentStateRequired:n.persistentStateRequired||g.persistentStateRequired,videoRobustness:n.videoRobustness||g.videoRobustness,audioRobustness:n.audioRobustness||g.audioRobustness,serverCertificate:n.serverCertificate||g.serverCertificate,initData:r,keyIds:o});break}}return e}function Fn(a){return function(a,b){for(var e=q(a),t=e.next();!t.done;t=e.next())if(!b(t.value))return!1;return!0}(a=a.f.values(),(function(b){return b.loaded}))}function jn(a,b,t){!a.keySystem||"org.w3.clearkey"==a.keySystem&&a.licenseServerUri||(b.size&&(b=b.get(a.keySystem)||"",a.licenseServerUri=b),a.keyIds||(a.keyIds=new Set),(t=t.get(a.keySystem))&&(a.distinctiveIdentifierRequired||(a.distinctiveIdentifierRequired=t.distinctiveIdentifierRequired),a.persistentStateRequired||(a.persistentStateRequired=t.persistentStateRequired),a.videoRobustness||(a.videoRobustness=t.videoRobustness),a.audioRobustness||(a.audioRobustness=t.audioRobustness),a.serverCertificate||(a.serverCertificate=t.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a.keySystem&&(a.keySystem="com.chromecast.playready"))}Tn.prototype.destroy=function(){return this.I.destroy()},Tn.prototype.configure=function(a){this.m=a},Tn.prototype.fc=function(a){var e,b=this;return B((function(t){if(1==t.a)return b.l?(b.a=a,b.b.ya(b.a,"play",(function(){for(var e=q(b.F),g=e.next();!g.done;g=e.next())Pn(b,g.value);b.J=!0,b.F=[]})),"webkitCurrentPlaybackTargetIsWireless"in b.a&&b.b.h(b.a,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return On(b)})),I(t,b.a.setMediaKeys(b.l).catch((function(e){return Promise.reject(new it(2,6,6003,e.message))})),2)):(b.b.ya(a,"encrypted",(function(){b.g(new it(2,6,6010))})),t.return());Zt(b.I),In(b),b.c.initData.length||b.A.length||(e=function(e){return xn(b,e.initDataType,et(e.initData))},b.b.h(b.a,"encrypted",e)),x(t)}))},Tn.prototype.lc=function(){for(var a=1/0,b=this.f.keys(),e=(b=q(b)).next();!e.done;e=b.next())e=e.value,isNaN(e.expiration)||(a=Math.min(a,e.expiration));return a};var Gn=1,Kn=5,zn=.5,Vn=new ot((function(){return Ze(new Uint8Array([0]))}));function Hn(a,b){this.W=tt(a),this.a=b==Xn,this.H=0}function qn(){return new it(2,3,3e3)}(p=Hn.prototype).Na=function(){return this.H<this.W.byteLength},p.Af=function(){return this.H},p.pf=function(){return this.W.byteLength},p.Ha=function(){try{var a=this.W.getUint8(this.H);return this.H+=1,a}catch(e){throw qn()}},p.yc=function(){try{var a=this.W.getUint16(this.H,this.a);return this.H+=2,a}catch(e){throw qn()}},p.N=function(){try{var a=this.W.getUint32(this.H,this.a);return this.H+=4,a}catch(e){throw qn()}},p.Ee=function(){try{var a=this.W.getInt32(this.H,this.a);return this.H+=4,a}catch(e){throw qn()}},p.Yb=function(){try{if(this.a)var a=this.W.getUint32(this.H,!0),b=this.W.getUint32(this.H+4,!0);else b=this.W.getUint32(this.H,!1),a=this.W.getUint32(this.H+4,!1)}catch(e){throw qn()}if(2097151<b)throw new it(2,3,3001);return this.H+=8,b*Math.pow(2,32)+a},p.xb=function(a){if(this.H+a>this.W.byteLength)throw qn();var b=et(this.W,this.H,a);return this.H+=a,b},p.skip=function(a){if(this.H+a>this.W.byteLength)throw qn();this.H+=a},p.Ge=function(a){if(this.H<a)throw qn();this.H-=a},p.seek=function(a){if(0>a||a>this.W.byteLength)throw qn();this.H=a},p.Kd=function(){for(var a=this.H;this.Na()&&0!=this.W.getUint8(this.H);)this.H+=1;return a=et(this.W,a,this.H-a),this.H+=1,ut(a)},H("shaka.util.DataViewReader",Hn),Hn.prototype.readTerminatedString=Hn.prototype.Kd,Hn.prototype.seek=Hn.prototype.seek,Hn.prototype.rewind=Hn.prototype.Ge,Hn.prototype.skip=Hn.prototype.skip,Hn.prototype.readBytes=Hn.prototype.xb,Hn.prototype.readUint64=Hn.prototype.Yb,Hn.prototype.readInt32=Hn.prototype.Ee,Hn.prototype.readUint32=Hn.prototype.N,Hn.prototype.readUint16=Hn.prototype.yc,Hn.prototype.readUint8=Hn.prototype.Ha,Hn.prototype.getLength=Hn.prototype.pf,Hn.prototype.getPosition=Hn.prototype.Af,Hn.prototype.hasMoreData=Hn.prototype.Na;var Xn=1;function Wn(){this.c=[],this.b=[],this.a=!1}function Yn(a){for(var b=ei(a);a.reader.Na()&&!a.parser.a;)a.parser.Xc(a.start+b,a.reader,a.partialOkay)}function $n(a){for(var b=ei(a),e=a.reader.N(),t=(e=q(ae(e))).next();!t.done&&(a.parser.Xc(a.start+b,a.reader,a.partialOkay),!a.parser.a);t=e.next());}function Jn(a){return function(b){a(b.reader.xb(b.reader.W.byteLength-b.reader.H))}}function Qn(a){for(var b=0,e=(a=q(a)).next();!e.done;e=a.next())b=b<<8|e.value.charCodeAt(0);return b}function Zn(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a)}function ei(a){return 8+(a.has64BitSize?8:0)+(null!=a.flags?4:0)}Hn.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Xn},(p=Wn.prototype).box=function(a,b){var e=Qn(a);return this.c[e]=ti,this.b[e]=b,this},p.ba=function(a,b){var e=Qn(a);return this.c[e]=ni,this.b[e]=b,this},p.stop=function(){this.a=!0},p.parse=function(a,b){var e=new Hn(a,0);for(this.a=!1;e.Na()&&!this.a;)this.Xc(0,e,b)},p.Xc=function(a,b,e){var t=b.H,n=b.N(),r=b.N(),g=!1;switch(n){case 0:n=b.W.byteLength-t;break;case 1:n=b.Yb(),g=!0}var o=this.b[r];if(o){var c=null,l=null;this.c[r]==ni&&(c=(l=b.N())>>>24,l&=16777215),r=t+n,e&&r>b.W.byteLength&&(r=b.W.byteLength),o({parser:this,partialOkay:e||!1,version:c,flags:l,reader:b=new Hn(b=0<(r-=b.H)?b.xb(r):new Uint8Array(0),0),size:n,start:t+a,has64BitSize:g})}else b.skip(Math.min(t+n-b.H,b.W.byteLength-b.H))},H("shaka.util.Mp4Parser",Wn),Wn.headerSize=ei,Wn.typeToString=Zn,Wn.allData=Jn,Wn.sampleDescription=$n,Wn.children=Yn,Wn.prototype.parseNext=Wn.prototype.Xc,Wn.prototype.parse=Wn.prototype.parse,Wn.prototype.stop=Wn.prototype.stop,Wn.prototype.fullBox=Wn.prototype.ba,Wn.prototype.box=Wn.prototype.box;var ti=0,ni=1;function ii(a,b,e,t,n){var r=ai.value(),g=a.subarray(e.start,e.start+e.size),o=tt(g),c=new Uint8Array(e.size+r.byteLength);for(c.set(g,0),(g=tt(c)).setUint32(4,n),c.set(r,e.size),n=o.getUint32(4),g.setUint32(e.size+16,n),ri(c,0,c.byteLength),n=new Uint8Array(a.byteLength+c.byteLength),e=gn("Xbox One")?e.start:e.start+e.size,r=a.subarray(e),n.set(a.subarray(0,e)),n.set(c,e),n.set(r,e+c.byteLength),t=(a=q(t)).next();!t.done;t=a.next())ri(n,(t=t.value).start,t.size+c.byteLength);return c=tt(n,b.start),b=ei(b),a=c.getUint32(b),c.setUint32(b,a+1),n}function ri(a,b,e){0!=(b=(a=tt(a,b)).getUint32(0))&&(1==b?(a.setUint32(8,e>>32),a.setUint32(12,4294967295&e)):a.setUint32(0,e))}var ai=new ot((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function oi(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function si(){}function ui(a){return!a||1==a.length&&1e-6>a.end(0)-a.start(0)?null:a.length?a.end(a.length-1):null}function ci(a,b,e){return e=void 0===e?0:e,!(!a||!a.length||1==a.length&&1e-6>a.end(0)-a.start(0)||b>a.end(a.length-1))&&b+e>=a.start(0)}function di(a,b){if(!a||!a.length||1==a.length&&1e-6>a.end(0)-a.start(0))return 0;for(var e=0,t=q(fi(a)),n=t.next();!n.done;n=t.next()){var r=n.value;n=r.start,(r=r.end)>b&&(e+=r-Math.max(n,b))}return e}function fi(a){if(!a)return[];for(var b=[],e=q(ae(a.length)),t=e.next();!t.done;t=e.next())t=t.value,b.push({start:a.start(t),end:a.end(t)});return b}function hi(a,b,e){this.startTime=a,this.direction=Ei,this.endTime=b,this.payload=e,this.region=new Ci,this.position=null,this.positionAlign=mi,this.size=0,this.textAlign=vi,this.writingMode=Ti,this.lineInterpretation=Ai,this.line=null,this.lineHeight="",this.lineAlign=wi,this.displayAlign=yi,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Ii,this.fontStyle=xi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1,this.cellResolution={columns:32,rows:15}}function pi(a,b){if(a.startTime!=b.startTime||a.endTime!=b.endTime||a.payload!=b.payload)return!1;for(var e in a)if("startTime"!=e&&"endTime"!=e&&"payload"!=e)if("nestedCues"==e){if(!Gt(a.nestedCues,b.nestedCues,pi))return!1}else if("region"==e||"cellResolution"==e){for(var t in a[e])if(a[e][t]!=b[e][t])return!1}else if(Array.isArray(a[e])){if(!Gt(a[e],b[e]))return!1}else if(a[e]!=b[e])return!1;return!0}oi.prototype.init=function(a){var b=muxjs.mp4.probe;a=et(a),this.g=b.videoTrackIds(a),this.f=b.timescale(a),this.a.init()},oi.prototype.b=function(a,b){var e=et(a);(e=this.a.parse(e,this.g,this.f))&&e.captions&&b(e.captions),this.a.clearParsedCaptions()},oi.prototype.c=function(){this.a.resetCaptionStream()},si.prototype.init=function(){},si.prototype.b=function(){},si.prototype.c=function(){},hi.prototype.clone=function(){var b,a=new hi(0,0,"");for(b in this)a[b]=this[b],a[b]&&a[b].constructor==Array&&(a[b]=a[b].slice());return a},H("shaka.text.Cue",hi);var mi="auto";hi.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:mi};var vi="center",gi={LEFT:"left",RIGHT:"right",CENTER:vi,START:"start",END:"end"};hi.textAlign=gi;var yi="after",bi={BEFORE:"before",CENTER:"center",AFTER:yi};hi.displayAlign=bi;var Ei="ltr";hi.direction={HORIZONTAL_LEFT_TO_RIGHT:Ei,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ti="horizontal-tb";hi.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ti,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Ai=0;hi.lineInterpretation={LINE_NUMBER:Ai,PERCENTAGE:1};var wi="start",Si={CENTER:"center",START:wi,END:"end"};hi.lineAlign=Si;var Ii=400;hi.fontWeight={NORMAL:Ii,BOLD:700};var xi="normal",ki={NORMAL:xi,ITALIC:"italic",OBLIQUE:"oblique"};function Ci(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ni,this.scroll=Mi}hi.fontStyle=ki,hi.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},H("shaka.text.CueRegion",Ci);var Ni=1;Ci.units={PX:0,PERCENTAGE:Ni,LINES:2};var Mi="";function _i(a){this.s=null,this.c=a,this.f=this.A=0,this.g=1/0,this.b=this.a=null,this.o="",this.l=new Map}function Ri(a){return!!(Pi[a]||e.muxjs&&"application/cea-608"==a)}function Li(a,b,e,t,n){for(var r=e+" "+t,g=new Map,o=(b=q(b)).next();!o.done;o=b.next()){var c=o.value;o=c.stream,g.has(o)||g.set(o,new Map),g.get(o).has(r)||g.get(o).set(r,[]),c.startTime+=n,c.endTime+=n,c.startTime>=a.f&&c.startTime<a.g&&(c=new hi(c.startTime,c.endTime,c.text),g.get(o).get(r).push(c),o==a.o&&a.c.append([c]))}for(r=(n=q(g.keys())).next();!r.done;r=n.next())for(r=r.value,a.l.has(r)||a.l.set(r,new Map),o=(b=q(g.get(r).keys())).next();!o.done;o=b.next())o=o.value,c=g.get(r).get(o),a.l.get(r).set(o,c);a.a=null==a.a?Math.max(e,a.f):Math.min(a.a,Math.max(e,a.f)),a.b=Math.max(a.b,Math.min(t,a.g))}Ci.scrollMode={NONE:Mi,UP:"up"},_i.prototype.destroy=function(){return this.c=this.s=null,this.l.clear(),Promise.resolve()},_i.prototype.remove=function(a,b){var e=this;return B((function(t){if(1==t.a)return I(t,Promise.resolve(),2);!e.c||!e.c.remove(a,b)||null==e.a||b<=e.a||a>=e.b||(a<=e.a&&b>=e.b?e.a=e.b=null:a<=e.a&&b<e.b?e.a=b:a>e.a&&b>=e.b&&(e.b=a)),x(t)}))},H("shaka.text.TextEngine",_i),_i.prototype.destroy=_i.prototype.destroy,_i.unregisterParser=function(a){delete Pi[a]},_i.registerParser=function(a,b){Pi[a]=b};var Pi={};function Di(a,b,e,t){var n=this;this.a=a,this.l=e,this.f={},this.G={},this.c=null,this.J=t||function(){},this.g={},this.b=new en,this.s={},this.A=b,this.C=new at,this.o=function(a,b){var e=new MediaSource;return a.b.ya(e,"sourceopen",(function(){URL.revokeObjectURL(a.F),b.resolve()})),a.F=Ji(e),a.a.src=a.F,e}(this,this.C),this.I=new Qt((function(){return function(a){var b,e,t,n,r,g,o;return B((function(c){if(1==c.a){for(e in b=[],a.g)for(t=a.g[e],n=t[0],a.g[e]=t.slice(0,1),n&&b.push(n.p.catch(ke)),r=q(t.slice(1)),g=r.next();!g.done;g=r.next())g.value.p.reject(new it(2,7,7003,void 0));for(o in a.c&&b.push(a.c.destroy()),a.l&&b.push(a.l.destroy()),a.s)b.push(a.s[o].destroy());return I(c,Promise.all(b),2)}a.b&&(a.b.release(),a.b=null),a.a&&(a.a.removeAttribute("src"),a.a.load(),a.a=null),a.o=null,a.c=null,a.l=null,a.f={},a.s={},a.A=null,a.g={},x(c)}))}(n)})),this.F=""}function Oi(a){var b=cn(a.mimeType,a.codecs),e=function(a){var b=[a.mimeType];return dn.forEach((function(e,t){var n=a[t];n&&b.push(e+'="'+n+'"')})),b.join(";")}(a);return Ri(b)||MediaSource.isTypeSupported(e)||St(b,a.type)}function Ui(a,b){a.c||(a.c=new _i(a.l)),"application/cea-608"!=b&&(a.c.s=Ne(Pi[b]))}function Bi(a){return!a.o||"ended"==a.o.readyState}function Fi(a,b){if("text"==b)var e=a.c.a;else e=!(e=Gi(a,b))||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null;return e}function ji(a,b){return"text"==b?a.c.b:ui(Gi(a,b))}function Gi(a,b){try{return a.f[b].buffered}catch(e){return null}}function Ki(a,b,t,n,r,o){var g,c,l,d,f;return B((function(h){return 1==h.a?b==(g=Re).qa?I(h,function(a,b,e,t){var n,r,g;return B((function(o){return 1==o.a?I(o,Promise.resolve(),2):a.s&&a.c?null==e||null==t?(a.s.parseInit(et(b)),o.return()):(n={periodStart:a.A,segmentStart:e,segmentEnd:t},r=a.s.parseMedia(et(b),n),g=r.filter((function(e){return e.startTime>=a.f&&e.startTime<a.g})),a.c.append(g),null==a.a&&(a.a=Math.max(e,a.f)),a.b=Math.min(t,a.g),void x(o)):o.return()}))}(a.c,t,n,r),0):a.s[b]?I(h,function(a,b){a.f=!0,a.b=new at,a.l=[],a.c=[],a.g=[];var e=et(b);return a.a.push(e),a.a.flush(),a.f&&a.b.reject(new it(2,3,3018)),a.b}(a.s[b],t),10):o&&e.muxjs?(a.c||Ui(a,"text/vtt"),null==n&&null==r?a.A.init(t):a.A.b(t,(function(e){e.length&&Li(a.c,e,n,r,a.f[g.Ua].timestampOffset)})),t=$i(a,t,n,b),I(h,qi(a,b,(function(){a.f[b].appendBuffer(t)})),0)):(t=$i(a,t,n,b),I(h,qi(a,b,(function(){a.f[b].appendBuffer(t)})),0)):(c=h.b,a.c||Ui(a,"text/vtt"),c.metadata&&(l=a.f[b].timestampOffset,a.J(c.metadata,l,r)),c.captions&&c.captions.length&&(d=a.f[g.Ua].timestampOffset,Li(a.c,c.captions,n,r,d)),f=c.data,f=$i(a,f,n,b),I(h,qi(a,b,(function(){a.f[b].appendBuffer(f)})),0))}))}function zi(a,b){var e=ji(a,"video")||0;!function(a,b,e){if(a.o=b,b=a.l.get(b))for(var t=q(b.keys()),n=t.next();!n.done;n=t.next())(n=b.get(n.value).filter((function(t){return t.endTime<=e})))&&a.c.append(n)}(a.c,b,e)}function Vi(a,b){return B((function(e){return b==Re.qa?a.c?I(e,a.c.remove(0,1/0),0):e.return():I(e,qi(a,b,(function(){var e=a.o.duration;0>=e?Hi(a,b):a.f[b].remove(0,e)})),0)}))}function Hi(a,b){var e=a.g[b][0];e&&(e.p.resolve(),Wi(a,b))}function qi(a,b,e){return Zt(a.I),e={start:e,p:new at},a.g[b].push(e),1==a.g[b].length&&Yi(a,b),e.p}function Xi(a,b){var e,t,n,r,o;return B((function(c){switch(c.a){case 1:for(n in Zt(a.I),e=[],t={},a.f)t.cc=new at,r={start:function(e){return function(){return e.cc.resolve()}}(t),p:t.cc},a.g[n].push(r),e.push(t.cc),1==a.g[n].length&&r.start(),t={cc:t.cc};return k(c,2),I(c,Promise.all(e),4);case 4:N(c,3);break;case 2:throw M(c);case 3:try{b()}catch(e){throw new it(2,3,3015,e)}finally{for(o in a.f)Wi(a,o)}x(c)}}))}function Wi(a,b){a.g[b].shift(),Yi(a,b)}function Yi(a,b){var e=a.g[b][0];if(e)try{e.start()}catch(t){"QuotaExceededError"==t.name?e.p.reject(new it(2,3,3017,b)):e.p.reject(new it(2,3,3015,t)),Wi(a,b)}}function $i(a,b,e,t){var n=a.a.mediaKeys;return null==e&&n&&(pn()||gn("Xbox One"))&&"mp4"==a.G[t].split(";")[0].split("/")[1]&&(b=function(a){function b(){n=!0}function e(e){r.push(e),Yn(e)}a=et(a);var t,n=!1,r=[],g=[];if((new Wn).box("moov",e).box("trak",e).box("mdia",e).box("minf",e).box("stbl",e).ba("stsd",(function(e){t=e,r.push(e),$n(e)})).ba("encv",b).ba("enca",b).ba("avc1",(function(e){g.push({box:e,Ae:1701733238})})).ba("mp4a",(function(e){g.push({box:e,Ae:1701733217})})).parse(a),n)return a;if(0==g.length||!t)throw Tt(a),new it(2,3,3019);g.reverse();for(var o=q(g),c=o.next();!c.done;c=o.next())c=c.value,a=ii(a,t,c.box,r,c.Ae);return a}(b)),b}(p=Di.prototype).destroy=function(){return this.I.destroy()},p.init=function(a,b){var e,t,n,g,r,o,c,l=this;return B((function(d){if(1==d.a)return e=Re,I(d,l.C,2);for(t={},n=q(a.keys()),g=n.next();!g.done;t={va:t.va},g=n.next())t.va=g.value,r=a.get(t.va),o=cn(r.mimeType,r.codecs),t.va==e.qa?Ui(l,o):(!b&&MediaSource.isTypeSupported(o)||!St(o,t.va)||(l.s[t.va]=new wt,o=It(t.va,o)),c=l.o.addSourceBuffer(o),l.b.h(c,"error",function(e){return function(){l.g[e.va][0].p.reject(new it(2,3,3014,l.a.error?l.a.error.code:0))}}(t)),l.b.h(c,"updateend",function(e){return function(){return Hi(l,e.va)}}(t)),l.f[t.va]=c,l.G[t.va]=o,l.g[t.va]=[]);x(d)}))},p.Qc=function(){var a={total:fi(this.a.buffered),audio:fi(Gi(this,"audio")),video:fi(Gi(this,"video")),text:[]};if(this.c){var b=this.c.a,e=this.c.b;null!=b&&null!=e&&a.text.push({start:b,end:e})}return a},p.remove=function(a,b,e){var t=this;return B((function(n){return I(n,a==Re.qa?t.c.remove(b,e):qi(t,a,(function(){e<=b?Hi(t,a):t.f[a].remove(b,e)})),0)}))},p.flush=function(a){var b=this;return B((function(e){return a==Re.qa?e.return():I(e,qi(b,a,(function(){b.a.currentTime-=.001,Hi(b,a)})),0)}))},p.endOfStream=function(a){var b=this;return B((function(e){return I(e,Xi(b,(function(){Bi(b)||(a?b.o.endOfStream(a):b.o.endOfStream())})),0)}))},p.Qa=function(a){var b=this;return B((function(e){return I(e,Xi(b,(function(){b.o.duration=a})),0)}))},p.getDuration=function(){return this.o.duration};var Ji=e.URL.createObjectURL;function Qi(a,b){function e(e){var t="";e.video&&(t=ln(e.video.codecs));var n="";return e.audio&&(n=ln(e.audio.codecs)),t+"-"+n}for(var t=ur(a.variants,b),n=new te,r=(t=q(t)).next();!r.done;r=t.next()){var g=e(r=r.value);n.push(g,r)}var o=null,c=1/0;!function(a,b){for(var e in a.a)b(e,a.a[e])}(n,(function(e,t){for(var n=0,r=0,u=q(t),l=u.next();!l.done;l=u.next())n+=l.value.bandwidth||0,++r;(n/=r)<c&&(o=e,c=n)})),a.variants=a.variants.filter((function(t){return e(t)==o}))}function Zi(a,b,e){function t(e,g,t){return e>=g&&e<=t}var n=a.video;return!(n&&n.width&&n.height&&(!t(n.width,b.minWidth,Math.min(b.maxWidth,e.width))||!t(n.height,b.minHeight,Math.min(b.maxHeight,e.height))||!t(n.width*n.height,b.minPixels,b.maxPixels))||a&&a.video&&a.video.frameRate&&!t(a.video.frameRate,b.minFrameRate,b.maxFrameRate)||!t(a.bandwidth,b.minBandwidth,b.maxBandwidth))}function er(a,b){return a.mimeType==b.mimeType&&a.codecs.split(".")[0]==b.codecs.split(".")[0]}function nr(a){var b=a.audio,e=a.video,t=b?b.codecs:null,n=e?e.codecs:null,r=[];n&&r.push(n),t&&r.push(t);var g=[];e&&g.push(e.mimeType),b&&g.push(b.mimeType),g=g[0]||null;var o=[];b&&o.push(b.kind),e&&o.push(e.kind),o=o[0]||null;var c=new Set;if(b)for(var l=q(b.roles),d=l.next();!d.done;d=l.next())c.add(d.value);if(e)for(d=(l=q(e.roles)).next();!d.done;d=l.next())c.add(d.value);return a={id:a.id,active:!1,type:"variant",bandwidth:a.bandwidth,language:a.language,label:null,kind:o,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:g,codecs:r.join(", "),audioCodec:t,videoCodec:n,primary:a.primary,roles:Array.from(c),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},e&&(a.videoId=e.id,a.originalVideoId=e.originalId,a.width=e.width||null,a.height=e.height||null,a.frameRate=e.frameRate||null,a.pixelAspectRatio=e.pixelAspectRatio||null,a.videoBandwidth=e.bandwidth||null),b&&(a.audioId=b.id,a.originalAudioId=b.originalId,a.channelsCount=b.channelsCount,a.audioSamplingRate=b.audioSamplingRate,a.audioBandwidth=b.bandwidth||null,a.label=b.label,a.audioRoles=b.roles),a}function ir(a){return{id:a.id,active:!1,type:"text",bandwidth:0,language:a.language,label:a.label,kind:a.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:a.mimeType,codecs:a.codecs||null,audioCodec:null,videoCodec:null,primary:a.primary,roles:a.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:a.originalId}}function rr(a){return a.__shaka_id||(a.__shaka_id=dr++),a.__shaka_id}function ar(a){var b=or(a);return b.active=a.enabled,b.type="variant",b.originalAudioId=a.id,"main"==a.kind&&(b.primary=!0),a.kind&&(b.roles=[a.kind],b.audioRoles=[a.kind]),b}function or(a){return{id:rr(a),active:!1,type:"",bandwidth:0,language:Oe(a.language),label:a.label,kind:a.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function sr(a){return a.allowedByApplication&&a.allowedByKeySystem}function ur(a,b){for(var e=a.filter((function(g){return g.audio&&g.audio.channelsCount})),t=new Map,n=(e=q(e)).next();!n.done;n=e.next()){var r=(n=n.value).audio.channelsCount;t.has(r)||t.set(r,[]),t.get(r).push(n)}return 0==(e=Array.from(t.keys())).length?a:(n=e.filter((function(g){return g<=b}))).length?t.get(Math.max.apply(Math,f(n))):t.get(Math.min.apply(Math,f(e)))}function cr(a,b,e){var t=a,n=a.filter((function(e){return e.primary}));n.length&&(t=n);var r=t.length?t[0].language:"";if(t=t.filter((function(e){return e.language==r})),b){var g=je(Oe(b),a.map((function(e){return e.language})));g&&(t=a.filter((function(e){return Oe(e.language)==g})))}if(e){if((a=lr(t,e)).length)return a}else if((a=t.filter((function(e){return 0==e.roles.length}))).length)return a;return(a=t.map((function(e){return e.roles})).reduce(xe,[])).length?lr(t,a[0]):t}function lr(a,b){return a.filter((function(e){return e.roles.includes(b)}))}var dr=0;function fr(){this.l=null,this.g=!1,this.a=new Ye,this.b=[],this.f=1,this.o=!1,this.m=this.c=null}function pr(a,b){return a&&(b=b.filter((function(e){return Zi(e,a,{width:1/0,height:1/0})}))),b.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function mr(a,b){this.a=a,this.b=new Set([a]);for(var e=q(b=b||[]),t=e.next();!t.done;t=e.next())this.add(t.value)}function vr(a,b){var e;if(!(e=!!a.audio!=!!b.audio||!!a.video!=!!b.video||a.language!=b.language)&&(e=a.audio&&b.audio)){e=a.audio;var t=b.audio;e=!(e.channelsCount==t.channelsCount&&gr(e,t)&&yr(e.roles,t.roles))}return!e&&(e=a.video&&b.video)&&(e=!(gr(e=a.video,t=b.video)&&yr(e.roles,t.roles))),!e}function gr(a,b){if(a.mimeType!=b.mimeType)return!1;var e=a.codecs.split(",").map((function(g){return ln(g)})),t=b.codecs.split(",").map((function(g){return ln(g)}));if(e.length!=t.length)return!1;e.sort(),t.sort();for(var n=q(ae(e.length)),r=n.next();!r.done;r=n.next())if(e[r=r.value]!=t[r])return!1;return!0}function yr(a,b){var e=new Set(a),t=new Set(b);if(e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=q(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Er(a){this.a=a,this.b=new Tr(a.language,"",a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,"")}function Tr(a,b,e,t){this.c=a,this.f=b,this.a=e,this.b=void 0===t?"":t}function Ar(){this.a=Ir,this.b=(new Map).set(Ir,2).set(Sr,1)}function wr(a,b,e){a.b.set(Ir,e).set(Sr,b)}(p=fr.prototype).stop=function(){this.l=null,this.g=!1,this.b=[],this.f=1,this.c=null},p.init=function(a){this.l=a},p.chooseVariant=function(){var a=pr(this.m.restrictions,this.b),b=this.a.getBandwidthEstimate(this.m.defaultBandwidthEstimate);this.b.length&&!a.length&&(a=[(a=pr(null,this.b))[0]]);for(var e=a[0]||null,t=(a=q(oe(a))).next();!t.done;t=a.next()){var n=t.value;t=n.item;var r=isNaN(this.f)?1:Math.abs(this.f);n=r*(n.next||{bandwidth:1/0}).bandwidth/this.m.bandwidthUpgradeTarget,b>=r*t.bandwidth/this.m.bandwidthDowngradeTarget&&b<=n&&(e=t)}return this.c=Date.now(),e},p.enable=function(){this.g=!0},p.disable=function(){this.g=!1},p.segmentDownloaded=function(a,b){var e=this.a;if(!(16e3>b)){var t=8e3*b/a,n=a/1e3;e.a+=b,Xe(e.b,n,t),Xe(e.c,n,t)}if(null!=this.c&&this.g)e:{if(this.o){if(Date.now()-this.c<1e3*this.m.switchInterval)break e}else{if(!(128e3<=this.a.a))break e;this.o=!0}e=this.chooseVariant(),this.a.getBandwidthEstimate(this.m.defaultBandwidthEstimate),e&&this.l(e)}},p.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate(this.m.defaultBandwidthEstimate)},p.setVariants=function(a){this.b=a},p.playbackRateChanged=function(a){this.f=a},p.configure=function(a){this.m=a},H("shaka.abr.SimpleAbrManager",fr),fr.prototype.configure=fr.prototype.configure,fr.prototype.playbackRateChanged=fr.prototype.playbackRateChanged,fr.prototype.setVariants=fr.prototype.setVariants,fr.prototype.getBandwidthEstimate=fr.prototype.getBandwidthEstimate,fr.prototype.segmentDownloaded=fr.prototype.segmentDownloaded,fr.prototype.disable=fr.prototype.disable,fr.prototype.enable=fr.prototype.enable,fr.prototype.chooseVariant=fr.prototype.chooseVariant,fr.prototype.init=fr.prototype.init,fr.prototype.stop=fr.prototype.stop,mr.prototype.add=function(a){return!!vr(this.a,a)&&(this.b.add(a),!0)},mr.prototype.values=function(){return this.b.values()},Er.prototype.create=function(a){var b=this,e=a.filter((function(e){return vr(b.a,e)}));return e.length?new mr(e[0],e):this.b.create(a)},Tr.prototype.create=function(a){var b=[];b=function(a,b){var e=je(Oe(b),a.map((function(e){return Fe(e)})));return e?a.filter((function(t){return e==Fe(t)})):[]}(a,this.c);var e=a.filter((function(e){return e.primary}));for((a=function(a,b){return a.filter((function(e){return!!e.audio&&(b?e.audio.roles.includes(b):0==e.audio.roles.length)}))}(b=b.length?b:e.length?e:a,this.f)).length&&(b=a),this.a&&((a=ur(b,this.a)).length&&(b=a)),this.b&&((a=function(a,b){return a.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==b.toLowerCase()}))}(b,this.b)).length&&(b=a)),a=new mr(b[0]),e=(b=q(b)).next();!e.done;e=b.next())e=e.value,vr(a.a,e)&&a.add(e);return a};var Sr=0,Ir=1;function xr(){}function kr(a,b,e,t){var n,r,g,o;return B((function(c){if(1==c.a)return t&&(n=Nr[t.toLowerCase()])?c.return(n):(r=Cr(a))&&(g=Mr[r])?c.return(g):t?c.u(2):I(c,function(a,b,e){var t,n,r;return B((function(g){return 1==g.a?((t=qt([a],e)).method="HEAD",I(g,b.request(0,t).promise,2)):(n=g.b,r=n.headers["content-type"],g.return(r?r.toLowerCase().split(";").shift():""))}))}(a,b,e),3);if(2!=c.a&&(t=c.b)&&(o=Nr[t]))return c.return(o);throw new it(2,4,4e3,a)}))}function Cr(a){return 1==(a=new ue(a).Aa.split("/").pop().split(".")).length?"":a.pop().toLowerCase()}H("shaka.media.ManifestParser",xr),xr.unregisterParserByMime=function(a){delete Nr[a]},xr.registerParserByMime=function(a,b){Nr[a]=b},xr.registerParserByExtension=function(a,b){Mr[a]=b};var Nr={},Mr={};function _r(a,b,e){this.c=a,this.b=b,this.a=e}function Rr(a,b,e,t,n,r,g,o,c){this.startTime=a,this.endTime=b,this.c=e,this.b=t,this.a=n,this.f=r,this.timestampOffset=g,this.appendWindowStart=o,this.appendWindowEnd=c}function Lr(a,b,e){this.f=a,this.Yc=b,this.l=this.g=1/0,this.a=1,this.b=this.c=null,this.o=0,this.s=!0,this.A=0,this.C=void 0===e||e}function Pr(a,b){this.g=a,this.l=Or(a),this.a=a.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.o=b,this.c=function(){}}function Dr(a){this.a=a}function Or(a){if(a.a.paused||0==a.a.playbackRate||0==a.a.buffered.length)var b=!1;else e:{b=a.a.currentTime;for(var e=(a=q(fi(a.a.buffered))).next();!e.done;e=a.next())if(!(b<(e=e.value).start-.1||b>e.end-.5)){b=!0;break e}b=!1}return b}function Ur(a,b,e,t,n){var r=this;this.a=a,this.C=b,this.m=e,this.A=n,this.b=new en,this.o=!1,this.s=a.readyState,this.f=!1,this.c=t,this.l=!1,this.b.h(a,"waiting",(function(){return Br(r)})),this.g=new kt((function(){Br(r)})).Z(.25)}function Br(a){if(0!=a.a.readyState){if(a.a.seeking){if(!a.o)return}else a.o=!1;if(!a.a.paused){var b;if(a.a.readyState!=a.s&&(a.f=!1,a.s=a.a.readyState),!(b=!a.c)){var e=(b=a.c).g,t=Or(e),n=e.a.currentTime,r=Date.now()/1e3;b.a==n&&b.l==t||(b.f=r,b.a=n,b.l=t,b.b=!1),(t=(n=r-b.f)>=b.o&&t&&!b.b)&&(b.c(b.a,n),b.b=!0,b.a=e.a.currentTime),b=!t}if(b){var g=a.m.smallGapLimit;if(n=a.a.currentTime,!(null==(e=function(a,b){if(!a||!a.length||1==a.length&&1e-6>a.end(0)-a.start(0))return null;var e=navigator.userAgent.match(/Edge\//)||gn("Trident/")||pn()||gn("CrKey")?.5:.1,t=fi(a).findIndex((function(t,n,g){return t.start>b&&(0==n||g[n-1].end-b<=e)}));return 0<=t?t:null}(b=a.a.buffered,n))||0==e&&!a.l||(t=b.start(e),t>=a.C.Wa()))){g=(r=t-n)<=g;var o=!1;.001>r||(g||a.f||(a.f=!0,(n=new X("largegap",{currentTime:n,gapSize:r})).cancelable=!0,a.A(n),a.m.jumpLargeGaps&&!n.defaultPrevented&&(o=!0)),!g&&!o)||(0!=e&&b.end(e-1),a.a.currentTime=t)}}}}}function Fr(a,b,e,t){b==HTMLMediaElement.HAVE_NOTHING||a.readyState>=b?t():(b=jr.value().get(b),e.ya(a,b,t))}_r.prototype.qc=function(){return this.b},_r.prototype.kc=function(){return this.a},H("shaka.media.InitSegmentReference",_r),_r.prototype.getEndByte=_r.prototype.kc,_r.prototype.getStartByte=_r.prototype.qc,Rr.prototype.Df=function(){return this.startTime},Rr.prototype.nf=function(){return this.endTime},Rr.prototype.qc=function(){return this.b},Rr.prototype.kc=function(){return this.a},H("shaka.media.SegmentReference",Rr),Rr.prototype.getEndByte=Rr.prototype.kc,Rr.prototype.getStartByte=Rr.prototype.qc,Rr.prototype.getEndTime=Rr.prototype.nf,Rr.prototype.getStartTime=Rr.prototype.Df,(p=Lr.prototype).getDuration=function(){return this.g},p.wf=function(){return this.a},p.Qa=function(a){this.g=a},p.Bf=function(){return this.f},p.Ke=function(a){this.o=a},p.Bc=function(a){this.s=a},p.Sd=function(a){this.l=a},p.ig=function(a){this.Yc=a},p.mf=function(){return this.Yc},p.Vb=function(a){if(0!=a.length){var b=a[a.length-1].endTime;this.Fd(a[0].startTime),this.a=a.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,b),null!=this.f&&this.C&&(this.f=(Date.now()+this.o)/1e3-this.b-this.a)}},p.Fd=function(a){this.c=null==this.c?a:Math.min(this.c,a)},p.Ed=function(a){this.a=Math.max(this.a,a)},p.offset=function(a){null!=this.c&&(this.c+=a),null!=this.b&&(this.b+=a)},p.S=function(){return 1/0==this.g&&!this.s},p.tb=function(){return 1/0!=this.g&&!this.s},p.qb=function(){return Math.max(this.A,this.Xa()-this.l)},p.Ne=function(a){this.A=a},p.Xa=function(){return this.S()||this.tb()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.a-this.f),this.g):this.g},p.pc=function(a){var b=Math.max(this.c,this.A);return 1/0==this.l?b:Math.max(b,Math.min(this.Xa()-this.l+a,this.Wa()))},p.Pb=function(){return this.pc(0)},p.Wa=function(){return Math.max(0,this.Xa()-(this.S()||this.tb()?this.Yc:0))},p.Re=function(){return!(null==this.f||null!=this.b&&this.C)},H("shaka.media.PresentationTimeline",Lr),Lr.prototype.usingPresentationStartTime=Lr.prototype.Re,Lr.prototype.getSeekRangeEnd=Lr.prototype.Wa,Lr.prototype.getSeekRangeStart=Lr.prototype.Pb,Lr.prototype.getSafeSeekRangeStart=Lr.prototype.pc,Lr.prototype.getSegmentAvailabilityEnd=Lr.prototype.Xa,Lr.prototype.setUserSeekStart=Lr.prototype.Ne,Lr.prototype.getSegmentAvailabilityStart=Lr.prototype.qb,Lr.prototype.isInProgress=Lr.prototype.tb,Lr.prototype.isLive=Lr.prototype.S,Lr.prototype.offset=Lr.prototype.offset,Lr.prototype.notifyMaxSegmentDuration=Lr.prototype.Ed,Lr.prototype.notifyMinSegmentStartTime=Lr.prototype.Fd,Lr.prototype.notifySegments=Lr.prototype.Vb,Lr.prototype.getDelay=Lr.prototype.mf,Lr.prototype.setDelay=Lr.prototype.ig,Lr.prototype.setSegmentAvailabilityDuration=Lr.prototype.Sd,Lr.prototype.setStatic=Lr.prototype.Bc,Lr.prototype.setClockOffset=Lr.prototype.Ke,Lr.prototype.getPresentationStartTime=Lr.prototype.Bf,Lr.prototype.setDuration=Lr.prototype.Qa,Lr.prototype.getMaxSegmentDuration=Lr.prototype.wf,Lr.prototype.getDuration=Lr.prototype.getDuration,Pr.prototype.release=function(){this.g=null,this.c=function(){}},Ur.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.g&&(this.g.stop(),this.g=null),this.c&&(this.c.release(),this.c=null),this.a=this.C=this.A=null},Ur.prototype.Id=function(){this.l=!0,Br(this)};var jr=new ot((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function Gr(a,b,e){var t=this;this.a=a,this.g=b,this.f=e,this.l=!1,this.b=new en,this.c=new qr(a),Fr(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){Vr(t,t.f)}))}function Kr(a){return a.l?a.a.currentTime:a.f}function zr(a,b){0<a.a.readyState?Xr(a.c,b):Fr(a.a,HTMLMediaElement.HAVE_METADATA,a.b,(function(){Vr(a,a.f)}))}function Vr(a,b){.001>Math.abs(a.a.currentTime-b)?Hr(a):(a.b.ya(a.a,"seeking",(function(){Hr(a)})),Xr(a.c,0==a.a.currentTime?b:a.a.currentTime))}function Hr(a){a.l=!0,a.b.h(a.a,"seeking",(function(){return a.g()}))}function qr(a){var b=this;this.b=a,this.l=10,this.g=this.f=this.c=0,this.a=new kt((function(){0>=b.c||b.b.currentTime!=b.f?b.a.stop():(b.b.currentTime=b.g,b.c--)}))}function Xr(a,b){a.f=a.b.currentTime,a.g=b,a.c=a.l,a.b.currentTime=b,a.a.Z(.1)}function Wr(a){var e=this;this.a=a,this.f=!1,this.c=null,this.b=new en,Fr(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==e.c?e.f=!0:(e.b.ya(e.a,"seeking",(function(){e.f=!0})),e.a.currentTime=Math.max(0,e.a.currentTime+e.c))}))}function Yr(a,b,e,t,n,r){var g=this;this.c=a,this.a=b.presentationTimeline,this.F=b.minBufferTime||0,this.m=e,this.C=n,this.o=null,this.f=new Ur(a,b.presentationTimeline,e,function(a,b){if(!b.stallEnabled)return null;var e=b.stallSkip,t=new Pr(new Dr(a),b.stallThreshold);return function(a,b){a.c=b}(t,(function(){e?a.currentTime+=e:(a.pause(),a.play())})),t}(a,e),r),this.b=new Gr(a,(function(){var e=g.f;e.o=!0,e.l=!1,e.f=!1;var t=Kr(g.b);return e=Jr(g,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!g.o||g.o<t-1)?(g.o=t,zr(g.b,e),e=void 0):(g.C(),e=void 0),e}),function(a,b){return null==b?b=1/0>a.a.getDuration()?a.a.Pb():a.a.Wa():0>b&&(b=a.a.Wa()+b),$r(a,Qr(a,b))}(this,t)),this.l=new kt((function(){if(0!=g.c.readyState&&!g.c.paused){var e=Kr(g.b),t=g.a.Pb(),n=g.a.Wa();3>n-t&&(t=n-3),e<t&&(e=Jr(g,e),g.c.currentTime=e)}})).Z(.25)}function $r(a,b){var e=a.a.getDuration();return b>=e?e-a.m.durationBackoff:b}function Jr(a,b){var e=Math.max(a.F,a.m.rebufferingGoal),t=a.m.safeSeekOffset,n=a.a.Pb(),r=a.a.Wa(),g=a.a.getDuration();3>r-n&&(n=r-3);var o=a.a.pc(e),c=a.a.pc(t);return e=a.a.pc(e+t),b>=g?$r(a,b):b>r?r:b<n?ci(a.c.buffered,c)?c:e:b>=o||ci(a.c.buffered,b)?b:e}function Qr(a,b){var e=a.a.Pb();return b<e||b>(e=a.a.Wa())?e:b}function Zr(a){this.a=a,this.b=null,this.c=0,this.f=!1}function ea(a,b,e){return new Zr([new Rr(a,a+b,(function(){return e}),0,null,null,a,a,a+b)])}function ta(a,b){this.b=a,this.a=b}function na(){Zr.call(this,[]),this.g=[]}function ia(a){var b=this;this.a=a,this.f=!1,this.b=this.a.Sc(),this.c=new kt((function(){b.a.ze(.25*b.b)}))}function ra(a){a.c.stop();var b=a.f?0:a.b;if(0<=b)try{return void(a.a.Sc()!=b&&a.a.Qd(b))}catch(e){}a.c.Z(.25),0!=a.a.Sc()&&a.a.Qd(0)}function aa(a){var b=this;this.c=a,this.a=new Set,this.b=new kt((function(){oa(b,!1)})).Z(.25)}function oa(a,b){for(var e=q(a.a),t=e.next();!t.done;t=e.next()){t=t.value;for(var n=a.c.currentTime,r=b,g=q(t.g.a),o=g.next();!o.done;o=g.next()){o=o.value;var c=t.f.get(o),l=n<o.startTime?ca:n>o.endTime?da:la;t.f.set(o,l);for(var d=q(t.l),f=d.next();!f.done;f=d.next())(f=f.value).Db==c&&f.Cb==l&&f.sb(o,r)}}}function sa(a){var b=this;this.b=function(){},this.a=new Set,this.f=a,this.c=new kt((function(){for(var e=b.f(),t=q(b.a),n=t.next();!n.done;n=t.next())(n=n.value).endTime<e.start&&b.a.delete(n)})).Z(2)}function ua(a){var b=this;this.g=a,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.l=[{Db:null,Cb:la,sb:function(e,t){return b.a(e,t)}},{Db:ca,Cb:la,sb:function(e,t){return b.a(e,t)}},{Db:da,Cb:la,sb:function(e,t){return b.a(e,t)}},{Db:la,Cb:ca,sb:function(e,t){return b.b(e,t)}},{Db:la,Cb:da,sb:function(e,t){return b.b(e,t)}},{Db:ca,Cb:da,sb:function(e,t){return b.c(e,t)}},{Db:da,Cb:ca,sb:function(e,t){return b.c(e,t)}}]}Gr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},qr.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Wr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Wr.prototype.s=function(a){this.c=this.f?this.c:a},Wr.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},Wr.prototype.A=function(){},Yr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.f&&(this.f.release(),this.f=null),this.l&&(this.l.stop(),this.l=null),this.c=this.b=this.a=this.m=null,this.C=function(){}},Yr.prototype.s=function(a){zr(this.b,a)},Yr.prototype.g=function(){var a=Kr(this.b);return 0<this.c.readyState&&!this.c.paused?Qr(this,a):a},Yr.prototype.A=function(){this.f.Id()},(p=Zr.prototype).destroy=function(){return Ae("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},p.release=function(){this.f||(this.a=[],this.b&&this.b.stop(),this.b=null)},p.Nf=function(){this.f=!0},p.find=function(a){for(var b=this.a.length-1;0<=b;--b){var e=this.a[b];if(a>=e.startTime&&a<e.endTime)return b+this.c}return this.a.length&&a<this.a[0].startTime?this.c:null},p.get=function(a){return 0==this.a.length||0>(a-=this.c)||a>=this.a.length?null:this.a[a]},p.offset=function(a){if(!this.f)for(var b=q(this.a),e=b.next();!e.done;e=b.next())(e=e.value).startTime+=a,e.endTime+=a,e.timestampOffset+=a},p.Tb=function(a){!this.f&&a.length&&(this.a=this.a.filter((function(b){return b.startTime<a[0].startTime})),this.a.push.apply(this.a,f(a)))},p.ob=function(a){if(!this.f){var b=this.a.length;this.a=this.a.filter((function(e){return e.endTime>a})),this.c+=b-this.a.length}},p.fb=function(a,b){if(!this.f){for(;this.a.length&&this.a[this.a.length-1].startTime>=b;)this.a.pop();for(;this.a.length&&this.a[0].endTime<=a;)this.a.shift(),this.c++;if(0!=this.a.length){var e=this.a[this.a.length-1];this.a[this.a.length-1]=new Rr(e.startTime,b,e.c,e.b,e.a,e.f,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd)}}},p.dd=function(a,b){var e=this;this.f||(this.b&&this.b.stop(),this.b=new kt((function(){var t=b();t?e.a.push.apply(e.a,f(t)):(e.b.stop(),e.b=null)})),this.b.Z(a))},Zr.prototype[Symbol.iterator]=function(){return this.Nb(0)},Zr.prototype.Nb=function(a){return new ta(this,this.find(a)||0)},H("shaka.media.SegmentIndex",Zr),Zr.forSingleSegment=ea,Zr.prototype.getIteratorForTime=Zr.prototype.Nb,Zr.prototype.updateEvery=Zr.prototype.dd,Zr.prototype.fit=Zr.prototype.fb,Zr.prototype.evict=Zr.prototype.ob,Zr.prototype.merge=Zr.prototype.Tb,Zr.prototype.offset=Zr.prototype.offset,Zr.prototype.get=Zr.prototype.get,Zr.prototype.find=Zr.prototype.find,Zr.prototype.markImmutable=Zr.prototype.Nf,Zr.prototype.release=Zr.prototype.release,Zr.prototype.destroy=Zr.prototype.destroy,ta.prototype.seek=function(a){return this.a=this.b.Nb(a).a,this.next().value},ta.prototype.current=function(){return this.b.get(this.a-1)},ta.prototype.next=function(){var a=this.b.get(this.a++);return{value:a,done:!a}},H("shaka.media.SegmentIterator",ta),ta.prototype.next=ta.prototype.next,ta.prototype.current=ta.prototype.current,ta.prototype.seek=ta.prototype.seek,T(na,Zr),(p=na.prototype).clone=function(){var a=new na;return a.g=this.g.slice(),a},p.release=function(){for(var a=q(this.g),b=a.next();!b.done;b=a.next())b.value.release();this.g=[]},p.find=function(a){for(var b=0,e=q(this.g),t=e.next();!t.done;t=e.next()){var n=(t=t.value).find(a);if(null!=n)return n+b;b+=t.c+t.a.length}return null},p.get=function(a){for(var b=0,e=q(this.g),t=e.next();!t.done;t=e.next()){var n=(t=t.value).get(a-b);if(n)return n;b+=t.c+t.a.length}return null},p.offset=function(){},p.Tb=function(){},p.ob=function(){},p.fb=function(){},p.dd=function(){},H("shaka.media.MetaSegmentIndex",na),na.prototype.updateEvery=na.prototype.dd,na.prototype.fit=na.prototype.fb,na.prototype.evict=na.prototype.ob,na.prototype.merge=na.prototype.Tb,na.prototype.offset=na.prototype.offset,na.prototype.get=na.prototype.get,na.prototype.find=na.prototype.find,na.prototype.release=na.prototype.release,ia.prototype.release=function(){this.c&&(this.c.stop(),this.c=null),this.a=null},ia.prototype.set=function(a){this.b=a,ra(this)},aa.prototype.release=function(){this.b.stop();for(var a=q(this.a),b=a.next();!b.done;b=a.next())b.value.release();this.a.clear()},sa.prototype.release=function(){this.b=function(){},this.a.clear(),this.c.stop()},ua.prototype.release=function(){this.g=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}};var ca=1,la=2,da=3;function fa(a,b,e,t){return a=qt(a,t),0==b&&null==e||(a.headers.Range=e?"bytes="+b+"-"+e:"bytes="+b+"-"),a}function ha(a,b){var e=this;this.B=b,this.v=a,this.m=null,this.f=1,this.c=this.b=null,this.a=new Map,this.l=!1,this.o=null,this.g=!1,this.I=new Qt((function(){return function(a){var b,e,t,n;return B((function(r){if(1==r.a){for(b=[],e=q(a.a.values()),t=e.next();!t.done;t=e.next())Sa(n=t.value),b.push(Ia(n));return I(r,Promise.all(b),2)}a.a.clear(),a.B=null,a.v=null,a.m=null,x(r)}))}(e)}))}function pa(a,b){var e=a.a.get("video");if(e){var t=e.stream;if(t)if(b){var n=t.trickModeVideo;n&&!e.zb&&(va(a,n,!1,0,!1),e.zb=t)}else(t=e.zb)&&(e.zb=null,va(a,t,!0,0,!1))}}function th(a,b,e,t){e=void 0!==e&&e,t=void 0===t?0:t,a.b=b,a.l&&(b.video&&va(a,b.video,e,t,!1),b.audio&&va(a,b.audio,e,t,!1))}function ma(a,b){a.c=b,a.l&&va(a,b,!0,0,!1)}function va(a,b,e,t,n){var r=a.a.get(b.type);r||"text"!=b.type?r&&(r.zb&&(b.trickModeVideo?(r.zb=b,b=b.trickModeVideo):r.zb=null),r.stream!=b||n)&&("text"==b.type&&Ui(a.B.O,cn(b.mimeType,b.codecs)),r.stream=b,r.Ca=null,e&&(r.hc?r.gd=!0:r.gb?(r.Bb=!0,r.Nc=t,r.gd=!0):(Sa(r),Aa(a,r,!0,t).catch((function(g){a.B&&a.B.onError(g)})))),function(a,b){var e,t;return B((function(n){if(1==n.a)return b.za?(e=b.stream,t=b.za,e.segmentIndex?n.u(2):I(n,e.createSegmentIndex(),2)):n.return();if(b.za!=t||b.stream!=e)return n.return();var r=a.B.Rc(),g=ji(a.B.O,b.type),o=b.stream.segmentIndex.find(b.Ga?b.Ga.endTime:r),c=null==o?null:b.stream.segmentIndex.get(o);o=c&&c.a?c.a-c.b:null,c&&!o&&(o=(c.endTime-c.startTime)*(b.stream.bandwidth||0)/8),o?((c=c.f)&&(o+=(c.a?c.a-c.b:null)||0),r=8*o/(c=a.B.getBandwidthEstimate())<(g||0)-r-Math.max(a.v.minBufferTime||0,a.m.rebufferingGoal)||b.za.b.a>o):r=!1,r&&b.za.abort(),x(n)}))}(a,r).catch((function(g){a.B&&a.B.onError(g)}))):function(a,b){var e,t,n,r,o;B((function(c){switch(c.a){case 1:return e=Re,k(c,2),I(c,Vi(a.B.O,e.qa),4);case 4:N(c,3);break;case 2:t=M(c),a.B&&a.B.onError(t);case 3:n=cn(b.mimeType,b.codecs),Ui(a.B.O,n),r=a.B.O.l,(r.isTextVisible()||a.m.alwaysStreamText)&&(o=ya(b),a.a.set(e.qa,o),wa(a,o,0)),x(c)}}))}(a,b)}function ga(a,b){b.hc||b.Bb||(b.gb?(b.Bb=!0,b.Nc=0):null==Fi(a.B.O,b.type)?null==b.$a&&wa(a,b,0):(Sa(b),Aa(a,b,!1,0).catch((function(e){a.B&&a.B.onError(e)}))))}function ya(a){return{stream:a,type:a.type,Ca:null,Ga:null,Tc:null,Cd:null,Bd:null,zd:null,zb:null,endOfStream:!1,gb:!1,$a:null,Bb:!1,Nc:0,gd:!1,hc:!1,Ld:!1,sc:!1,za:null}}function ba(a,b){var e=a.v.presentationTimeline,t=e.Xa();return!(b.endTime<e.qb()||b.startTime>t)}function Ea(a){return a&&"text"==a.type&&"application/cea-608"==a.stream.mimeType}function Ta(a,b,e){var t,n,r,g;return B((function(o){return 1==o.a?(t=Yt,n=fa(e.c(),e.b,e.a,a.m.retryParameters),r=a.B.Ub.request(t,n),b.za=r,I(o,r.promise,2)):(g=o.b,b.za=null,o.return(g.data))}))}function Aa(a,b,e,t){var n,r;return B((function(g){return 1==g.a?(b.Bb=!1,b.gd=!1,b.Nc=0,b.hc=!0,b.Ga=null,b.Tc=null,b.Ca=null,t?(n=a.B.Rc(),r=a.B.O.getDuration(),I(g,a.B.O.remove(b.type,n+t,r),3)):I(g,Vi(a.B.O,b.type),4)):3!=g.a?(Zt(a.I),e?I(g,a.B.O.flush(b.type),3):g.u(3)):(Zt(a.I),b.hc=!1,b.endOfStream=!1,wa(a,b,0),void x(g))}))}function wa(a,b,e){var t=b.type;("text"!=t||a.a.has(t))&&(b.$a=new xt((function(){var e;return B((function(t){return 1==t.a?(k(t,2),I(t,a.wc(b),4)):2!=t.a?N(t,0):(e=M(t),a.B&&a.B.onError(e),void x(t))}))})).P(e))}function Sa(a){null!=a.$a&&(a.$a.stop(),a.$a=null)}function Ia(a){return B((function(b){return a.za?I(b,a.za.abort(),0):b.u(0)}))}function xa(a,b){return B((function(e){if(1==e.a)return I(e,Nt(a.o),2);Zt(a.I),a.B.onError(b),b.handled||a.m.failureCallback(b),x(e)}))}function ka(a,b){var e=Do(),t=this;this.l=b,this.c=a,this.f=e,this.o=null,this.g=[],this.b=this.a=null,this.s=Promise.resolve().then((function(){return function(a){return B((function(b){if(a.I.a)b=b.u(0);else{if(0==a.g.length||a.a&&!a.a.rb)var e=!1;else{a.a&&(a.a.Oa.wb(),a.a=null);var t=(e=a.g.shift()).create(a.f);t?(e.Oa.Wb(),a.a={node:t.node,payload:t.payload,rb:t.rb,Oa:e.Oa}):e.Oa.Wc(),e=!0}e?e=Promise.resolve():a.a?e=function(a){var b,e;return B((function(t){switch(t.a){case 1:return a.c=a.l.yf(a.c,a.f,a.a.node,a.a.payload),k(t,2),a.b=a.l.cf(a.c,a.f,a.a.payload),I(t,a.b.promise,4);case 4:a.b=null,a.c==a.a.node&&(a.a.Oa.Uc(),a.a=null),N(t,0);break;case 2:return 7001==(b=M(t)).code?a.a.Oa.wb():a.a.Oa.onError(b),a.a=null,a.b=null,e=a,I(t,a.l.handleError(a.f,b),5);case 5:e.c=t.b,x(t)}}))}(a):(a.l.Rf(a.c),a.o=new at,e=a.o),b=I(b,e,1)}return b}))}(t)})),this.I=new Qt((function(){return function(a){var b,e;return B((function(t){if(1==t.a)return a.b&&a.b.abort(),Na(a),I(t,a.s,2);for(a.a&&a.a.Oa.wb(),b=q(a.g),e=b.next();!e.done;e=b.next())e.value.Oa.wb();a.a=null,a.g=[],a.l=null,x(t)}))}(t)}))}function Ca(a,b){var e={Wb:function(){},Uc:function(){},wb:function(){},onError:function(){},Wc:function(){},Tg:function(){}};return a.g.push({create:b,Oa:e}),a.b&&a.b.abort(),Na(a),e}function Na(a){a.o&&(a.o.resolve(),a.o=null)}function Ma(a){this.a=null;for(var b=q(Array.from(a.textTracks)),e=b.next();!e.done;e=b.next())(e=e.value).mode="disabled","Shaka Player TextTrack"==e.label&&(this.a=e);this.a||(this.a=a.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function _a(a){if(a.startTime>=a.endTime)return null;var b=new VTTCue(a.startTime,a.endTime,a.payload);b.lineAlign=a.lineAlign,b.positionAlign=a.positionAlign,a.size&&(b.size=a.size);try{b.align=a.textAlign}catch(e){}return"center"==a.textAlign&&"center"!=b.align&&(b.align="middle"),"vertical-lr"==a.writingMode?b.vertical="lr":"vertical-rl"==a.writingMode&&(b.vertical="rl"),1==a.lineInterpretation&&(b.snapToLines=!1),null!=a.line&&(b.line=a.line),null!=a.position&&(b.position=a.position),b}function Ra(a,b){var e=a.mode;a.mode="showing"==e?"showing":"hidden";for(var t=q(Array.from(a.cues)),n=t.next();!n.done;n=t.next())(n=n.value)&&b(n)&&a.removeCue(n);a.mode=e}function La(){}function Pa(a){return document.createElement(a)}function Da(){return document.createElement("button")}function Oa(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ua(a,b){var e=this;this.l=!1,this.f=[],this.a=a,this.g=b,this.b=Pa("div"),this.b.classList.add("shaka-text-container"),this.b.style.textAlign="center",this.b.style.display="flex",this.b.style.flexDirection="column",this.b.style.alignItems="center",this.b.style.justifyContent="flex-end",this.g.appendChild(this.b),this.o=new kt((function(){Ba(e)})).Z(.25),this.c=new Map}function Ba(a){function b(g){return a.f.includes(g)&&a.l&&g.startTime<=e&&g.endTime>=e}for(var e=a.a.currentTime,t=q(a.c.keys()),n=t.next();!n.done;n=t.next())if(!b(n=n.value)){var r=a.c.get(n);a.b.removeChild(r),a.c.delete(n)}for(t=new Set(a.c.values()),r=(n=q(Array.from(a.b.childNodes))).next();!r.done;r=n.next())r=r.value,t.has(r)||a.b.removeChild(r);for(n=(t=q(t=a.f.filter((function(g){return b(g)&&!a.c.has(g)})).sort((function(g,e){return g.startTime!=e.startTime?g.startTime-e.startTime:g.endTime-e.endTime})))).next();!n.done;n=t.next())ja(a,a.b,n.value)}function Fa(a,b,e,t){var n=Pa("span");return t&&n.classList.add("shaka-nested-cue"),Ga(a,n,e,!0),b.appendChild(n),n}function ja(a,b,e){if(e.nestedCues.length){var t=Pa("p");t.style.width="100%",Ga(a,t,e,!1);for(var n=0;n<e.nestedCues.length;n++)Fa(a,t,e.nestedCues[n],!0);b.appendChild(t),a.c.set(e,t)}else a.c.set(e,Fa(a,b,e,!1))}function Ga(a,b,e,t){var n=b.style,r=0==e.nestedCues.length;e.spacer?(n.flexBasis="100%",n.height="0"):(n.whiteSpace="pre-line",b.textContent=e.payload,r&&(n.backgroundColor=e.backgroundColor),n.border=e.border,n.color=e.color,n.direction=e.direction,n.opacity=e.opacity,n.paddingLeft=Ka(e.linePadding,e,a.g),n.paddingRight=Ka(e.linePadding,e,a.g),e.backgroundImage&&(n.backgroundImage="url('"+e.backgroundImage+"')",n.backgroundRepeat="no-repeat",n.backgroundSize="contain",n.backgroundPosition="center",""==e.backgroundColor&&(n.backgroundColor="transparent")),e.backgroundImage&&e.region&&(b=e.region.widthUnits==Ni?"%":"px",n.height=e.region.height+(e.region.heightUnits==Ni?"%":"px"),n.width=e.region.width+b),n.justifyContent="before"==e.displayAlign?"flex-start":"center"==e.displayAlign?"center":"flex-end",r?n.display="inline-block":(n.display="flex",n.flexDirection="row",n.flexWrap="wrap",n.margin="0",n.alignItems=n.justifyContent,n.justifyContent="center"),t&&(n.maxWidth="100%"),n.fontFamily=e.fontFamily,n.fontWeight=e.fontWeight.toString(),n.fontStyle=e.fontStyle,n.letterSpacing=e.letterSpacing,n.fontSize=Ka(e.fontSize,e,a.g),e.line?1==e.lineInterpretation&&(n.position="absolute",e.writingMode==Ti?e.lineAlign==wi?n.top=e.line+"%":"end"==e.lineAlign&&(n.bottom=e.line+"%"):"vertical-lr"==e.writingMode?e.lineAlign==wi?n.left=e.line+"%":"end"==e.lineAlign&&(n.right=e.line+"%"):e.lineAlign==wi?n.right=e.line+"%":"end"==e.lineAlign&&(n.left=e.line+"%")):e.region&&e.region.id&&!r&&(a=e.region.widthUnits==Ni?"%":"px",t=e.region.viewportAnchorUnits==Ni?"%":"px",n.height=e.region.height+(e.region.heightUnits==Ni?"%":"px"),n.width=e.region.width+a,n.position="absolute",n.top=e.region.viewportAnchorY+t,n.left=e.region.viewportAnchorX+t),n.lineHeight=e.lineHeight,e.position&&(e.writingMode==Ti?n.paddingLeft=e.position:n.paddingTop=e.position),"line-left"==e.positionAlign?n.cssFloat="left":"line-right"==e.positionAlign&&(n.cssFloat="right"),n.textAlign=e.textAlign,n.textDecoration=e.textDecoration.join(" "),n.writingMode=e.writingMode,e.size&&(e.writingMode==Ti?n.width=e.size+"%":n.height=e.size+"%"))}function Ka(a,b,e){var t=(t=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(a))?{value:Number(t[1]),lg:t[2]}:null;if(!t)return a;var n=t.value;switch(t.lg){case"%":return n/100*e.clientHeight/b.cellResolution.rows+"px";case"c":return e.clientHeight*n/b.cellResolution.rows+"px";default:return a}}function za(){}function Va(a,b,e,t,n){var r,o=n in t,g=!0;for(r in b){var c=n+"."+r,l=o?t[n]:e[r];o||r in e?void 0===b[r]?void 0===l||o?delete a[r]:a[r]=Ot(l):l.constructor==Object&&b[r]&&b[r].constructor==Object?(a[r]||(a[r]=Ot(l)),c=Va(a[r],b[r],l,t,c),g=g&&c):typeof b[r]!=typeof l||null==b[r]||"function"!=typeof b[r]&&b[r].constructor!=l.constructor?(Y("Invalid config, wrong type for "+c),g=!1):("function"==typeof e[r]&&e[r].length!=b[r].length&&$("Unexpected number of arguments for "+c),a[r]=b[r]):(Y("Invalid config, unrecognized key "+c),g=!1)}return g}function Ha(a,b){for(var e={},t=e,n=0,r=0;!(0>(n=a.indexOf(".",n)));)0!=n&&"\\"==a[n-1]||(t[r=a.substring(r,n).replace(/\\\./g,".")]={},t=t[r],r=n+1),n+=1;return t[a.substring(r).replace(/\\\./g,".")]=b,e}function qa(){}function Xa(){var a=1e6,b=1/0;navigator.connection&&(navigator.connection.downlink&&(a=1e6*navigator.connection.downlink),navigator.connection.saveData&&(b=360));var e={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Ln,logLicenseExchange:!1,updateExpirationTime:1},t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2};(gn("Web0S")||pn()||gn("CrKey"))&&(n.stallSkip=0);var r={trackSelectionCallback:function(e){return B((function(t){return t.return(e)}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},g={drm:e,manifest:t,streaming:n,offline:r,abrFactory:function(){return new fr},abr:{enabled:!0,defaultBandwidthEstimate:a,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:b,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return r.trackSelectionCallback=function(e){return B((function(t){return t.return(function(a,b){var e=a.filter((function(e){return"variant"==e.type})),t=[],n=je(b,e.map((function(e){return e.language})));n&&(t=e.filter((function(e){return Oe(e.language)==n}))),0==t.length&&(t=e.filter((function(e){return e.primary}))),0==t.length&&(e.map((function(e){return e.language})),t=e);var r=t.filter((function(e){return e.height&&480>=e.height}));if(r.length&&(r.sort((function(e,t){return t.height-e.height})),t=r.filter((function(e){return e.height==r[0].height}))),e=[],t.length){var g=Math.floor(t.length/2);t.sort((function(e,t){return e.bandwidth-t.bandwidth})),e.push(t[g])}for(t=q(a),g=t.next();!g.done;g=t.next())"text"==(g=g.value).type&&e.push(g);return e}(e,g.preferredAudioLanguage))}))},g}function li(a,b,e){var t={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Va(a,b,e||Xa(),t,"")}function Wa(){this.a=null,this.b=[]}function Ya(a,b){if(null==a.a)a.a={timestamp:Date.now()/1e3,state:b,duration:0};else{var e=Date.now()/1e3;a.a.duration=e-a.a.timestamp,a.a.state!=b&&(a.b.push(a.a),a.a={timestamp:e,state:b,duration:0})}}function $a(a,b){var e=0;a.a&&a.a.state==b&&(e+=a.a.duration);for(var t=q(a.b),n=t.next();!n.done;n=t.next())e+=(n=n.value).state==b?n.duration:0;return e}function Ja(){this.b=this.c=null,this.a=[]}function Qa(a,b,e){a.c!=b&&(a.c=b,a.a.push({timestamp:Date.now()/1e3,id:b.id,type:"variant",fromAdaptation:e,bandwidth:b.bandwidth}))}function Za(a,b,e){a.b!=b&&(a.b=b,a.a.push({timestamp:Date.now()/1e3,id:b.id,type:"text",fromAdaptation:e,bandwidth:null}))}function eo(){this.g=this.l=this.C=this.s=this.F=this.c=this.A=this.f=this.G=this.J=this.L=this.o=this.M=NaN,this.b=new Wa,this.a=new Ja}function to(a,b){ne.call(this);var t=this;this.g=us,this.eb=this.a=null,this.R=!1,this.b=new en,this.ib=this.o=this.Ja=this.v=this.bb=this.s=this.c=this.cb=this.F=this.Sa=this.C=this.ia=this.A=this.G=this.l=this.T=null,this.le=1e9,this.m=fo(this),this.hd={width:1/0,height:1/0},this.f=null,this.Ka=new Tr(this.m.preferredAudioLanguage,this.m.preferredVariantRole,this.m.preferredAudioChannelCount),this.X=this.m.preferredTextLanguage,this.Ta=this.m.preferredTextRole,this.jb=[],b&&b(this),this.T=function(a){return new Vt((function(b,e){a.o&&a.o.segmentDownloaded(b,e)}))}(this),this.J=null,ps&&(this.J=Ne(ps)),this.b.h(e,"online",(function(){t.Md()})),this.wa={name:"detach"},this.Va={name:"attach"},this.M={name:"unload"},this.vd={name:"manifest-parser"},this.ud={name:"manifest"},this.$={name:"media-source"},this.kb={name:"drm-engine"},this.L={name:"load"},this.wd={name:"src-equals-drm-engine"},this.ka={name:"src-equals"};var n=new Map;n.set(this.Va,(function(e,n){return Pt(function(a,b,e){return null==b.D&&(b.D=e.D,a.b.h(b.D,"error",(function(){var e=xo(a);e&&So(a,e)}))),a.a=b.D,Promise.resolve()}(t,e,n))})),n.set(this.wa,(function(e){return e.D&&(t.b.Da(e.D,"error"),e.D=null),t.a=null,Pt(e=Promise.resolve())})),n.set(this.M,(function(e){return Pt(ro(t,e))})),n.set(this.$,(function(n){return Pt(n=function(a,b){var t,n,r,o;return B((function(g){if(1==g.a)return t=e.muxjs?new oi:new si,n=a.m.textDisplayFactory,r=Ne(n),a.Jb=n,I(g,(o=function(a,b,e,t){return new Di(a,b,e,t)}(b.D,t,r,(function(e,t,n){for(var r=(e=q(e)).next();!r.done;r=e.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var o=r.cueTime+t,c=n,u=q(r.frames),l=u.next();!l.done;l=u.next())ao(a,o,c,"ID3",l.value);a.J&&a.J.onHlsTimedMetadata(r,o)}}))).C,2);a.G=o,x(g)}))}(t,n))})),n.set(this.vd,(function(e,n){return Pt(function(a,b,e){var t,n,r,g;return B((function(o){if(1==o.a)return b.mimeType=e.mimeType,b.uri=e.uri,t=b.uri,n=a.T,a.Ja=t,r=a,I(o,kr(t,n,a.m.manifest.retryParameters,b.mimeType),2);r.bb=o.b,a.s=Ne(a.bb),g=Ot(a.m.manifest),e.D&&"AUDIO"===e.D.nodeName&&(g.disableVideo=!0),a.s.configure(g),x(o)}))}(t,e,n))})),n.set(this.ud,(function(e){return function(a,b){var e=b.uri,t=a.T;a.cb=new sa((function(){return a.Ia()})),function(a,b){a.b=b}(a.cb,(function(g){Io(a,es,g),a.J&&a.J.onDashTimedMetadata(g)}));var n={networkingEngine:t,filter:function(g){return B((function(e){return e.return(a.Kb(g))}))},makeTextStreamsForClosedCaptions:function(g){return function(a,b){for(var e=new Set,t=q(b.textStreams),n=t.next();!n.done;n=t.next())"application/cea-608"==(n=n.value).mimeType&&e.add(n.originalId);for(t=q(b.variants),n=t.next();!n.done;n=t.next())if((n=n.value.video)&&n.closedCaptions)for(var r=q(n.closedCaptions.keys()),g=r.next();!g.done;g=r.next())if(g=g.value,!e.has(g)){var o=new na;o={id:a.le++,originalId:g,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:o,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:n.closedCaptions.get(g),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:n.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null},b.textStreams.push(o),e.add(g)}}(a,g)},onTimelineRegionAdded:function(g){var e=a.cb;e:{for(var t=q(e.a),n=t.next();!n.done;n=t.next())if((n=n.value).schemeIdUri==g.schemeIdUri&&n.id==g.id&&n.startTime==g.startTime&&n.endTime==g.endTime){t=n;break e}t=null}null==t&&(e.a.add(g),e.b(g))},onEvent:function(g){return a.dispatchEvent(g)},onError:function(g){return So(a,g)}},r=Date.now()/1e3;return new Mt(function(){var g,t,o,c;return B((function(l){if(1==l.a)return g=a,I(l,a.s.start(e,n),2);if(g.v=l.b,t=no(qo),a.dispatchEvent(t),0==a.v.variants.length)throw new it(2,4,4036);!function(a){function b(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}a.variants.some(b)&&(a.variants=a.variants.filter(b))}(a.v),o=Date.now()/1e3,c=o-r,a.f.A=c,x(l)}))}(),(function(){return a.s.stop()}))}(t,e)})),n.set(this.kb,(function(e){return Pt(e=function(a,b){var e,t;return B((function(n){return 1==n.a?(e=Date.now()/1e3,t=!0,a.l=oo(a,{Ub:a.T,onError:function(e){So(a,e)},Vc:function(e){ko(a,e)},onExpirationUpdated:function(e,g){Co(a,e,g)},onEvent:function(n){a.dispatchEvent(n),n.type==jo&&t&&(t=!1,a.f.c=Date.now()/1e3-e)}}),a.l.configure(a.m.drm),I(n,An(a.l,a.v.variants,a.v.offlineSessionIds),2)):3!=n.a?I(n,a.l.fc(b.D),3):(a.Kb(a.v),void x(n))}))}(t,e))})),n.set(this.L,(function(e,n){return Pt(function(a,b,e){var t,n,r,g,o,c,l,d,f,h;return B((function(u){switch(u.a){case 1:if(b.startTime=e.startTime,t=b.D,n=b.uri,a.Ja=n,a.C=new ia({Sc:function(){return b.D.playbackRate},Qd:function(e){b.D.playbackRate=e},ze:function(e){b.D.currentTime+=e}}),r=function(){return mo(a)},g=function(){return po(a)},a.b.h(t,"playing",r),a.b.h(t,"pause",r),a.b.h(t,"ended",r),a.b.h(t,"ratechange",g),o=a.m.abrFactory,a.o&&a.ib==o||(a.ib=o,a.o=Ne(o),"function"!=typeof a.o.playbackRateChanged&&(Ae("AbrManager","Please use an AbrManager with playbackRateChanged function."),a.o.playbackRateChanged=function(){}),a.o.configure(a.m.abr)),a.Ka=new Tr(a.m.preferredAudioLanguage,a.m.preferredVariantRole,a.m.preferredAudioChannelCount),a.X=a.m.preferredTextLanguage,function(a,b,e){0<b&&(a.S()||a.Ne(b)),b=a.getDuration(),e<b&&(a.S()||a.Qa(e))}(a.v.presentationTimeline,a.m.playRangeStart,a.m.playRangeEnd),a.o.init((function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n,a.c&&e!=a.c.b&&(Qa(a.f.a,e,!0),th(a.c,e,t,n),yo(a))})),a.A=function(a,b){return new Yr(a.a,a.v,a.m.streaming,b,(function(){if(a.ia&&oa(a.ia,!0),a.c)for(var e=a.c,t=e.B.Rc(),n=e.m.smallGapLimit,r=q(e.a.keys()),g=r.next();!g.done;g=r.next()){g=g.value;var o=e.a.get(g);o.Ca=null;var c=e.B.O;"text"==g?c=null!=(c=c.c).a&&null!=c.b&&(t>=c.a&&t<c.b):c=ci(c=Gi(c,g),t,n),c||(null!=ji(e.B.O,g)&&ga(e,o),o.za&&(o.za.abort(),o.za=null),"text"===g&&e.B.O.A.c())}a.F&&uo(a)}),(function(e){return a.dispatchEvent(e)}))}(a,b.startTime),a.ia=function(a){var b=new ua(a.cb);!function(a,b,e,t){a.a=b,a.b=e,a.c=t}(b,(function(e){Io(a,ts,e)}),(function(e){Io(a,ns,e)}),(function(e,t){t||(Io(a,ts,e),Io(a,ns,e))}));var e=new aa(a.a);return e.a.add(b),e}(a),c=Math.max(a.v.minBufferTime,a.m.streaming.rebufferingGoal),so(a,c),Qi(a.v,a.m.preferredAudioChannelCount),a.c=function(a){return new ha(a.v,{Rc:function(){return a.A.g()},getBandwidthEstimate:function(){return a.o.getBandwidthEstimate()},O:a.G,Ub:a.T,onError:function(b){return So(a,b)},onEvent:function(b){return a.dispatchEvent(b)},Sf:function(){a.s&&a.s.update&&a.s.update()},Id:function(){a.A&&a.A.A(),uo(a)}})}(a),a.c.configure(a.m.streaming),a.g=cs,a.dispatchEvent(no(Jo)),l=vo(a)?a.o.chooseVariant():null,Qa(a.f.a,l,!0),th(a.c,l,!1,0),(d=cr(a.v.textStreams,a.X,a.Ta)[0]||null)&&Za(a.f.a,d,!0),d?(l.audio&&function(a,b,e){return a=Oe(a.m.preferredTextLanguage),b=Oe(b.language),Le(e=Oe(e.language),a)&&!Le(b,e)}(a,l.audio,d)&&(a.R=!0),a.R&&a.G.l.setTextVisibility(!0),Ao(a)):a.R=!1,d&&(a.m.streaming.alwaysStreamText||a.vb())&&ma(a.c,d),!a.m.streaming.startAtSegmentBoundary){u.u(2);break}return f=a.A.g(),I(u,function(a,b){var e,t,n,r,g;return B((function(o){return 1==o.a?(e=a.audio,t=a.video,n=function(e,t){var n,r;return B((function(o){return 1==o.a?e?I(o,e.createSegmentIndex(),2):o.return(null):(n=e.segmentIndex[Symbol.iterator]().seek(t))?(r=n.startTime,o.return(r)):o.return(null)}))},I(o,n(e,b),2)):3!=o.a?(r=o.b,I(o,n(t,b),3)):null!=(g=o.b)&&null!=r?o.return(Math.max(g,r)):null!=g?o.return(g):null!=r?o.return(r):o.return(b)}))}(l,f),3);case 3:h=u.b,a.A.s(h);case 2:return I(u,a.c.start(),4);case 4:a.m.abr.enabled&&(a.o.enable(),wo(a)),a.Kb(a.v),bo(a),yo(a),vo(a),a.v.variants.some((function(e){return e.primary})),a.b.ya(t,"loadedmetadata",(function(){a.f.f=Date.now()/1e3-e.Vd})),x(u)}}))}(t,e,n))})),n.set(this.wd,(function(e){return Pt(e=function(a,b){var e,t,n,r;return B((function(g){return 1==g.a?(e=Re,t=Date.now()/1e3,n=!0,a.l=oo(a,{Ub:a.T,onError:function(e){So(a,e)},Vc:function(e){ko(a,e)},onExpirationUpdated:function(e,t){Co(a,e,t)},onEvent:function(e){a.dispatchEvent(e),e.type==jo&&n&&(n=!1,a.f.c=Date.now()/1e3-t)}}),a.l.configure(a.m.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:e.Ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0},I(g,An(a.l,[r],[]),2)):I(g,a.l.fc(b.D),0)}))}(t,e))})),n.set(this.ka,(function(e,n){return function(a,b,e){function t(){return mo(a)}b.uri=e.uri,b.startTime=e.startTime,a.Ja=b.uri,a.A=new Wr(b.D),null!=b.startTime&&a.A.s(b.startTime),a.C=new ia({Sc:function(){return b.D.playbackRate},Qd:function(g){b.D.playbackRate=g},ze:function(g){b.D.currentTime+=g}}),so(a,a.m.streaming.rebufferingGoal),a.b.h(b.D,"playing",t),a.b.h(b.D,"pause",t),a.b.h(b.D,"ended",t),a.b.h(b.D,"ratechange",(function(){return po(a)})),"none"!=a.a.preload&&a.b.ya(a.a,"loadedmetadata",(function(){a.f.f=Date.now()/1e3-e.Vd})),a.a.audioTracks&&(a.b.h(a.a.audioTracks,"addtrack",(function(){return bo(a)})),a.b.h(a.a.audioTracks,"removetrack",(function(){return bo(a)})),a.b.h(a.a.audioTracks,"change",(function(){return bo(a)}))),a.a.textTracks&&(a.b.h(a.a.textTracks,"addtrack",(function(g){bo(a),function(a,b){var e=b.track;"metadata"==e.kind&&(e.mode="hidden",a.b.h(e,"cuechange",(function(){if(e.activeCues)for(var t=q(e.activeCues),n=t.next();!n.done;n=t.next())n=n.value,ao(a,n.startTime,n.endTime,n.type,n.value),a.J&&a.J.onCueMetadataChange(n.value)})),new kt((function(){for(var e=function(a){return Array.from(a.a.textTracks).filter((function(b){return"metadata"==b.kind}))}(a),t=(e=q(e)).next();!t.done;t=e.next())t.value.mode="hidden"})).ua().P(.5))}(a,g)})),a.b.h(a.a.textTracks,"removetrack",(function(){return bo(a)})),a.b.h(a.a.textTracks,"change",(function(){return bo(a)}))),b.D.src=b.uri,(pn()||gn("Web0S"))&&b.D.load(),a.g=ls,a.dispatchEvent(no(Jo));var n=new at;Fr(a.a,HTMLMediaElement.HAVE_METADATA,a.b,(function(){n.resolve()}));var r=!1;return a.jb.push((function(){r=!0})),Fr(a.a,HTMLMediaElement.HAVE_CURRENT_DATA,a.b,(function(){return B((function(e){return 1==e.a?r?e.return():(function(a){var b=a.m.preferredAudioLanguage;if(""!=b){a.bd(b);var e=a.m.preferredVariantRole;""!=e&&a.bd(b,e)}}(a),lo(a).find((function(e){return"disabled"!=e.mode}))?e.u(2):I(e,new Promise((function(e){a.b.ya(a.a.textTracks,"change",e),new kt(e).P(1)})),2)):r?e.return():(function(a){var b=a.m.preferredTextLanguage;if(""!=b){a.cd(b);var e=a.m.preferredTextRole;""!=e&&a.cd(b,e)}}(a),void x(e))}))})),a.a.error?n.reject(xo(a)):"none"==a.a.preload&&($('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),n.resolve()),a.b.ya(a.a,"error",(function(){n.reject(xo(a))})),new Mt(n,(function(){return n.reject(new it(2,7,7001)),Promise.resolve()}))}(t,e,n)})),this.V=new ka(this.wa,{yf:function(e,n,g,r){var o=null;return e==t.wa&&(o=g==t.wa?t.wa:t.Va),e==t.Va&&(o=g==t.wa||n.D!=r.D?t.wa:g==t.Va?t.Va:g==t.$||g==t.L?t.$:g==t.ka?t.wd:null),e==t.$&&(o=g==t.L&&n.D==r.D?t.vd:t.M),e==t.vd&&(o=Po(t.L,t.ud,t.M,g,n,r)),e==t.ud&&(o=Po(t.L,t.kb,t.M,g,n,r)),e==t.kb&&(o=Po(t.L,t.L,t.M,g,n,r)),e==t.wd&&(o=g==t.ka&&n.D==r.D?t.ka:t.M),e!=t.L&&e!=t.ka||(o=t.M),e==t.M&&(o=r.D&&n.D==r.D?t.Va:t.wa),o},cf:function(e,r,g){return t.dispatchEvent(no(Wo,{state:e.name})),n.get(e)(r,g)},handleError:function(e){return B((function(n){return 1==n.a?I(n,ro(t,e),2):n.return(e.D?t.Va:t.wa)}))},Rf:function(e){t.dispatchEvent(no(Yo,{state:e.name}))}}),a&&this.fc(a,!0)}function no(a,b){return new X(a,b)}function io(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var a=vn();return!(a&&12>a||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!fn()||hn("application/x-mpegurl"))}function ro(a,b){var e,t,n,r,g,o,c,l,d;return B((function(f){switch(f.a){case 1:return a.g!=ss&&(a.g=us),e=a.jb.map((function(e){return e()})),a.jb=[],I(f,Promise.all(e),2);case 2:if(a.dispatchEvent(no(rs)),b.mimeType=null,b.startTime=null,b.uri=null,b.D&&(a.b.Da(b.D,"loadedmetadata"),a.b.Da(b.D,"playing"),a.b.Da(b.D,"pause"),a.b.Da(b.D,"ended"),a.b.Da(b.D,"ratechange")),a.ia&&(a.ia.release(),a.ia=null),a.Sa&&(a.Sa.stop(),a.Sa=null),!a.s){f.u(3);break}return I(f,a.s.stop(),4);case 4:a.s=null,a.bb=null;case 3:if(!a.o){f.u(5);break}return I(f,a.o.stop(),5);case 5:if(!a.c){f.u(7);break}return I(f,a.c.destroy(),8);case 8:a.c=null;case 7:if(a.C&&(a.C.release(),a.C=null),a.A&&(a.A.release(),a.A=null),!a.G){f.u(9);break}return I(f,a.G.destroy(),10);case 10:a.G=null;case 9:if(a.J&&a.J.onAssetUnload(),!b.D||!b.D.src){f.u(11);break}return I(f,new Promise((function(e){return new kt(e).P(.1)})),12);case 12:b.D.removeAttribute("src"),b.D.load();case 11:if(!a.l){f.u(13);break}return I(f,a.l.destroy(),14);case 14:a.l=null;case 13:if(a.Ja=null,a.F=null,a.v){for(t=q(a.v.variants),n=t.next();!n.done;n=t.next())for(r=n.value,g=q([r.audio,r.video]),o=g.next();!o.done;o=g.next())(c=o.value)&&c.segmentIndex&&c.segmentIndex.release();for(l=q(a.v.textStreams),o=l.next();!o.done;o=l.next())(d=o.value).segmentIndex&&d.segmentIndex.release()}a.v=null,a.f=new eo,a.Jb=null,ho(a),x(f)}}))}function ao(a,b,e,t,n){a.dispatchEvent(no(Xo,{startTime:b,endTime:e,Sg:t,payload:n}))}function oo(a,b){return new Tn(b,a.m.drm.updateExpirationTime)}function so(a,b){a.F=new Ar,a.F.a=Sr,wr(a.F,b,Math.min(.5,b/2)),ho(a),a.Sa=new kt((function(){uo(a)})).Z(.25)}function uo(a){switch(a.g){case ls:if(a.a.ended)var b=!0;else{var e=ui(a.a.buffered);b=null!=e&&e>=a.a.duration-1}break;case cs:e:if(a.a.ended||Bi(a.G))b=!0;else{if(a.v.presentationTimeline.S()){e=a.v.presentationTimeline.Xa();var t=ui(a.a.buffered);if(null!=t&&t>=e){b=!0;break e}}b=!1}break;default:b=!1}t=di(a.a.buffered,a.a.currentTime);var n=b,r=(e=a.F).b.get(e.a);b=e.a,t=n||t>=r?Ir:Sr,e.a=t,b!=t&&ho(a)}function co(a){if(a.s){var b=Ot(a.m.manifest);a.a&&"AUDIO"===a.a.nodeName&&(b.disableVideo=!0),a.s.configure(b)}if(a.l&&a.l.configure(a.m.drm),a.c){a.c.configure(a.m.streaming);try{a.Kb(a.v)}catch(e){So(a,e)}a.o&&vo(a),!(b=a.c.b)||b.allowedByApplication&&b.allowedByKeySystem||go(a)}if(a.G&&(b=a.m.textDisplayFactory,a.Jb!=b)){var e=Ne(b),t=a.G,n=t.l;t.l=e,n&&(e.setTextVisibility(n.isTextVisible()),n.destroy()),t.c&&(t.c.c=e),a.Jb=b,a.c&&((e=(b=a.c).a.get("text"))&&va(b,e.stream,!0,0,!0))}a.o&&(a.o.configure(a.m.abr),a.m.abr.enabled?a.o.enable():a.o.disable(),wo(a)),a.F&&(b=a.m.streaming.rebufferingGoal,a.v&&(b=Math.max(b,a.v.minBufferTime)),wr(a.F,b,Math.min(.5,b/2)))}function lo(a){return Array.from(a.a.textTracks).filter((function(b){return"metadata"!=b.kind&&"chapters"!=b.kind&&"Shaka Player TextTrack"!=b.label}))}function fo(a){var b=Xa();return b.streaming.failureCallback=function(e){a.S()&&[1001,1002,1003].includes(e.code)&&(e.severity=1,a.Md())},b.textDisplayFactory=function(){return a.eb?new Ua(a.a,a.eb):new Ma(a.a)},b}function ho(a){var b=a.vc();if(a.f&&a.F&&a.A){var e=a.C;e.f=b,ra(e),mo(a)}a.dispatchEvent(no(Fo,{buffering:b}))}function po(a){var b=a.a.playbackRate;0!=b&&(a.C&&a.C.set(b),b=no($o),a.dispatchEvent(b))}function mo(a){if(a.f&&a.F){var b=a.f.b;a.F.a==Sr?Ya(b,"buffering"):a.a.paused?Ya(b,"paused"):a.a.ended?Ya(b,"ended"):Ya(b,"playing")}}function vo(a){try{No(a,a.v)}catch(e){return So(a,e),!1}var b=a.v.variants.filter((function(e){return sr(e)}));return b=a.Ka.create(b),a.o.setVariants(Array.from(b.values())),!0}function go(a){var b;if(b=vo(a)?a.o.chooseVariant():null){if(b==a.c.b)return;Qa(a.f.a,b,!0),th(a.c,b,!0,0),Eo(a)}yo(a)}function yo(a){Mo(a,no(Bo))}function bo(a){Mo(a,no(is))}function Eo(a){Mo(a,no(as))}function To(a){Mo(a,no(Qo))}function Ao(a){Mo(a,no(Zo))}function wo(a){Mo(a,no(Uo,{Qf:a.m.abr.enabled}))}function So(a,b){if(a.g!=ss){var e=no(Ko,{detail:b});a.dispatchEvent(e),e.defaultPrevented&&(b.handled=!0)}}function Io(a,b,e){a.dispatchEvent(no(b,{detail:{schemeIdUri:e.schemeIdUri,value:e.value,startTime:e.startTime,endTime:e.endTime,id:e.id,eventElement:e.eventElement}}))}function xo(a){if(!a.a.error)return null;var b=a.a.error.code;if(1==b)return null;var e=a.a.error.msExtendedCode;return e&&(0>e&&(e+=Math.pow(2,32)),e=e.toString(16)),new it(2,3,3016,b,e,a.a.error.message)}function ko(a,b){if(a.c){var e=Object.keys(b),t=1==e.length&&"00"==e[0],n=!1;if(e.length)for(var r=(e=q(a.v.variants)).next();!r.done;r=e.next()){var g=[];(r=r.value).audio&&g.push(r.audio),r.video&&g.push(r.video);for(var o=(g=q(g)).next();!o.done;o=g.next()){var c=o.value;if(o=r.allowedByKeySystem,c.keyIds.size){r.allowedByKeySystem=!0;for(var l=(c=q(c.keyIds)).next();!l.done;l=c.next())l=l.value,l=b[t?"00":l],r.allowedByKeySystem=r.allowedByKeySystem&&!!l&&!fs.includes(l)}o!=r.allowedByKeySystem&&(n=!0)}}n&&vo(a),(t=a.c.b)&&!t.allowedByKeySystem&&go(a),n&&bo(a)}}function Co(a,b,e){a.s&&a.s.onExpirationUpdated&&a.s.onExpirationUpdated(b,e),b=no(zo),a.dispatchEvent(b)}function No(a,b){var e=a.l?un(a.l.R):{},t=Object.keys(e);t=t.length&&"00"==t[0];for(var n=!1,r=!1,g=new Set,o=new Set,c=q(b.variants),l=c.next();!l.done;l=c.next()){var d=[];(l=l.value).audio&&d.push(l.audio),l.video&&d.push(l.video);for(var f=(d=q(d)).next();!f.done;f=d.next())if((f=f.value).keyIds.size)for(var h=(f=q(f.keyIds)).next();!h.done;h=f.next()){h=h.value;var u=e[t?"00":h];u?fs.includes(u)&&o.add(u):g.add(h)}l.allowedByApplication?l.allowedByKeySystem&&(n=!0):r=!0}if(!n)throw new it(2,4,4012,e={hasAppRestrictions:r,missingKeys:Array.from(g),restrictedKeyStatuses:Array.from(o)})}function Mo(a,b){B((function(e){if(1==e.a)return I(e,Promise.resolve(),2);a.g!=ss&&a.dispatchEvent(b),x(e)}))}function _o(a){for(var b=new Set,e=(a=q(a)).next();!e.done;e=a.next())(e=e.value).language?b.add(Oe(e.language)):b.add("und");return b}function Ro(a){for(var b=new Map,e=(a=q(a)).next();!e.done;e=a.next()){var t=e.value;e="und";var n=[];for(t.language&&(e=Oe(t.language)),(n="variant"==t.type?t.audioRoles:t.roles)&&n.length||(n=[""]),b.has(e)||b.set(e,new Set),n=(t=q(n)).next();!n.done;n=t.next())n=n.value,b.get(e).add(n)}var r=[];return b.forEach((function(g,e){for(var t=q(g),n=t.next();!n.done;n=t.next())r.push({language:e,role:n.value})})),r}function Lo(){return new it(2,7,7e3)}function Po(a,b,e,t,n,r){return t==a&&n.D==r.D&&n.uri==r.uri&&n.mimeType==r.mimeType?b:e}function Do(){return{D:null,mimeType:null,startTime:null,Vd:NaN,uri:null}}function Oo(a){return new Promise((function(b,e){a.wb=function(){return e(Lo())},a.Uc=function(){return b()},a.onError=function(t){return e(t)},a.Wc=function(){return e(Lo())}}))}ha.prototype.destroy=function(){return this.I.destroy()},ha.prototype.configure=function(a){this.m=a,this.o=new Ct({maxAttempts:Math.max(a.retryParameters.maxAttempts,2),baseDelay:a.retryParameters.baseDelay,backoffFactor:a.retryParameters.backoffFactor,fuzzFactor:a.retryParameters.fuzzFactor,timeout:0},!0)},ha.prototype.start=function(){var a=this;return B((function(b){if(1==b.a)return I(b,function(a){var b,e,t,n,r,g,o,c,l,d;return B((function(f){if(1==f.a){if(b=Re,!a.b)throw new it(2,5,5006);return e=new Map,t=new Set,a.b.audio&&(e.set(b.Ib,a.b.audio),t.add(a.b.audio)),a.b.video&&(e.set(b.Ua,a.b.video),t.add(a.b.video)),a.c&&(e.set(b.qa,a.c),t.add(a.c)),n=a.B.O,r=a.m.forceTransmuxTS,I(f,n.init(e,r),2)}Zt(a.I);var h=a.v.presentationTimeline.getDuration();for(1/0>h?a.B.O.Qa(h):a.B.O.Qa(Math.pow(2,32)),g=q(e.keys()),o=g.next();!o.done;o=g.next())c=o.value,l=e.get(c),a.a.has(c)||(d=ya(l),a.a.set(c,d),wa(a,d,0));x(f)}))}(a),2);Zt(a.I),a.l=!0,x(b)}))},ha.prototype.wc=function(a){var e,t,n,r,g,b=this;return B((function(o){switch(o.a){case 1:if(Zt(b.I),a.gb||null==a.$a||a.hc)return o.return();if(a.$a=null,!a.Bb){o.u(2);break}return I(o,Aa(b,a,a.gd,a.Nc),3);case 3:return o.return();case 2:if(a.stream.segmentIndex){o.u(4);break}return e=a.stream,I(o,a.stream.createSegmentIndex(),5);case 5:if(e!=a.stream)return null==a.$a&&wa(b,a,0),o.return();case 4:k(o,6),null!=(t=function(a,b){if(Ea(b))return zi(a.B.O,b.stream.originalId||""),null;var e=a.B.Rc(),t=b.Ga?b.Ga.endTime:e,n=function(a,b,e){return"text"==b?null==(a=a.c).b||a.b<e?0:a.b-Math.max(e,a.a):di(a=Gi(a,b),e)}(a.B.O,b.type,e),r=Math.max(a.v.minBufferTime||0,a.m.rebufferingGoal,a.m.bufferingGoal)*a.f;if(t>=a.v.presentationTimeline.getDuration())return b.endOfStream=!0,"video"==b.type&&(e=a.a.get("text"))&&Ea(e)&&(e.endOfStream=!0),null;if(b.endOfStream=!1,n>=r)return.5;if(n=ji(a.B.O,b.type),!(n=function(a,b,e,t){return b.Ca?b.Ca.current():b.Ga||t?(b.Ca=b.stream.segmentIndex.Nb(b.Ga?b.Ga.endTime:t),b.Ca.next().value):(b.Ca=b.stream.segmentIndex.Nb(Math.max(e-a.m.inaccurateManifestTolerance,0)),(t=b.Ca.next().value)&&ba(a,t)||(b.Ca=b.stream.segmentIndex.Nb(e),t=b.Ca.next().value),t)}(a,b,e,n))||!ba(a,n))return 1;r=1/0;for(var g=Array.from(a.a.values()),o=(g=q(g)).next();!o.done;o=g.next())Ea(o=o.value)||(r=Math.min(r,o.Ga?o.Ga.endTime:e));return t>=r+a.v.presentationTimeline.a?1:(function(a,b,e,t){var n,r,g,o,c,l,d,f,h;return B((function(u){switch(u.a){case 1:return n=Re,r=b.stream,g=b.Ca,b.gb=!0,o=function(a,b,e){var t,n,r,g,o,c,l;return B((function(d){return t=[],n=Math.max(0,e.appendWindowStart-.1),r=e.appendWindowEnd+.01,(g=e.timestampOffset)==b.Cd&&n==b.Bd&&r==b.zd||(o=function(){var e;return B((function(t){if(1==t.a)return k(t,2),b.Bd=n,b.zd=r,b.Cd=g,I(t,function(a,b,e,t,n){return B((function(g){return b==Re.qa?(a.c.A=e,function(a,b,e){a.f=b,a.g=e}(a.c,t,n),g.return()):I(g,Promise.all([qi(a,b,(function(){var e=a.f[b].appendWindowStart,t=a.f[b].appendWindowEnd;a.f[b].abort(),a.f[b].appendWindowStart=e,a.f[b].appendWindowEnd=t,Hi(a,b)})),qi(a,b,(function(){var t=e;0>t&&(t+=.001),a.f[b].timestampOffset=t,Hi(a,b)})),qi(a,b,(function(){a.f[b].appendWindowStart=0,a.f[b].appendWindowEnd=n,a.f[b].appendWindowStart=t,Hi(a,b)}))]),0)}))}(a.B.O,b.type,g,n,r),4);if(2!=t.a)return N(t,0);throw e=M(t),b.Bd=null,b.zd=null,b.Cd=null,e}))},t.push(o())),!function(a,b){return a&&b?a.qc()==b.qc()&&a.kc()==b.kc()&&Gt(a.c(),b.c()):a==b}(e.f,b.Tc)&&(b.Tc=e.f)&&(c=Ta(a,b,e.f),l=function(){var e,t,u;return B((function(n){switch(n.a){case 1:return k(n,2),I(n,c,4);case 4:return e=n.b,Zt(a.I),t=b.stream.closedCaptions&&0<b.stream.closedCaptions.size,I(n,Ki(a.B.O,b.type,e,null,null,t),5);case 5:N(n,0);break;case 2:throw u=M(n),b.Tc=null,u}}))},t.push(l())),I(d,Promise.all(t),0)}))}(a,b,t),c=Ta(a,b,t),k(u,2),I(u,Promise.all([o,c]),4);case 4:return l=u.b,Zt(a.I),a.g?u.return():b.Bb?(b.gb=!1,wa(a,b,0),u.return()):I(u,function(a,b,e,t,n,r){var g;return B((function(o){return 1==o.a?(g=t.closedCaptions&&0<t.closedCaptions.size,null!=t.emsgSchemeIdUris&&0<t.emsgSchemeIdUris.length&&(new Wn).ba("emsg",(function(e){var r=t.emsgSchemeIdUris,o=e.reader.Kd(),c=e.reader.Kd(),l=e.reader.N(),u=e.reader.N(),d=e.reader.N(),f=e.reader.N();e=e.reader.xb(e.reader.W.byteLength-e.reader.H);var h=n.startTime+u/l;r.includes(o)&&("urn:mpeg:dash:event:2012"==o?a.B.Sf():(r=new X(Go,{detail:{startTime:h,endTime:h+d/l,schemeIdUri:o,value:c,timescale:l,presentationTimeDelta:u,eventDuration:d,id:f,messageData:e}}),a.B.onEvent(r)))})).parse(r),I(o,function(a,b,e){var t,n,g;return B((function(r){if(1==r.a)return t=Math.max(a.m.bufferBehind,a.v.presentationTimeline.a),null==(n=Fi(a.B.O,b.type))||.01>=(g=e-n-t)?r.return():I(r,a.B.O.remove(b.type,n,n+g),2);Zt(a.I),x(r)}))}(a,b,e),2)):3!=o.a?(Zt(a.I),I(o,Ki(a.B.O,b.type,r,n.startTime,n.endTime,g),3)):(Zt(a.I),void x(o))}))}(a,b,e,r,t,l[1]),5);case 5:if(Zt(a.I),a.g)return u.return();b.Ga=t,g.next(),b.gb=!1,b.Ld=!1,d=a.B.O.Qc(),f=d[b.type],JSON.stringify(f),b.Bb||a.B.Id(),wa(a,b,0),N(u,0);break;case 2:if(h=M(u),Zt(a.I,h),a.g)return u.return();if(b.gb=!1,b.type==n.qa&&a.m.ignoreTextStreamFailures)a.a.delete(n.qa),u.u(0);else if(7001==h.code)b.gb=!1,b.$a=null,wa(a,b,0),u.u(0);else{if(3017!=h.code)return b.sc=!0,h.severity=2,I(u,xa(a,h),0);(function(a,b,e){if(!Array.from(a.a.values()).some((function(e){return e!=b&&e.Ld}))){var t=Math.round(100*a.f);if(20<t)a.f-=.2;else{if(!(4<t))return b.sc=!0,a.g=!0,void a.B.onError(e);a.f-=.04}b.Ld=!0}wa(a,b,4)})(a,b,h),u.u(0)}}}))}(a,b,e,n).catch((function(){})),null)}(b,a))&&(wa(b,a,t),a.sc=!1),N(o,7);break;case 6:return n=M(o),I(o,xa(b,n),8);case 8:return o.return();case 7:if(r=Array.from(b.a.values()),!b.l||!r.every((function(e){return e.endOfStream}))){o.u(0);break}return I(o,b.B.O.endOfStream(),10);case 10:Zt(b.I),0!=(g=b.B.O.getDuration())&&g<b.v.presentationTimeline.getDuration()&&b.v.presentationTimeline.Qa(g),x(o)}}))},ka.prototype.destroy=function(){return this.I.destroy()},(p=Ma.prototype).remove=function(a,b){return!!this.a&&(Ra(this.a,(function(e){return e.startTime<b&&e.endTime>a})),!0)},p.append=function(a){function b(g){return g.spacer?"\n":g.nestedCues.length?g.nestedCues.map(b).join(""):g.payload}var e=a.map((function(g){if(g.nestedCues.length){var e=g.clone();return e.nestedCues=[],e.payload=b(g),e}return g})),t=[];a=this.a.cues?Array.from(this.a.cues):[];for(var n={},r=(e=q(e)).next();!r.done;n={Eb:n.Eb},r=e.next())n.Eb=r.value,a.some(function(g){return function(e){return e.startTime==g.Eb.startTime&&e.endTime==g.Eb.endTime&&e.text==g.Eb.payload}}(n))||(r=_a(n.Eb))&&t.push(r);for(n=(a=q(a=t.slice().sort((function(g,e){return g.startTime!=e.startTime?g.startTime-e.startTime:g.endTime!=e.endTime?g.endTime-e.startTime:"line"in VTTCue.prototype?t.indexOf(e)-t.indexOf(g):t.indexOf(g)-t.indexOf(e)})))).next();!n.done;n=a.next())this.a.addCue(n.value)},p.destroy=function(){return this.a&&(Ra(this.a,(function(){return!0})),this.a.mode="disabled"),this.a=null,Promise.resolve()},p.isTextVisible=function(){return"showing"==this.a.mode},p.setTextVisibility=function(a){this.a.mode=a?"showing":"hidden"},H("shaka.text.SimpleTextDisplayer",Ma),Ma.prototype.setTextVisibility=Ma.prototype.setTextVisibility,Ma.prototype.isTextVisible=Ma.prototype.isTextVisible,Ma.prototype.destroy=Ma.prototype.destroy,Ma.prototype.append=Ma.prototype.append,Ma.prototype.remove=Ma.prototype.remove,H("shaka.util.Dom",La),La.removeAllChildren=Oa,(p=Ua.prototype).append=function(a){for(var b=f(this.f).concat(),e={},t=(a=q(a)).next();!t.done;e={Cc:e.Cc},t=a.next())e.Cc=t.value,b.some(function(e){return function(t){return pi(t,e.Cc)}}(e))||this.f.push(e.Cc);Ba(this)},p.destroy=function(){this.g.removeChild(this.b),this.b=null,this.l=!1,this.f=[],this.o&&this.o.stop(),this.c.clear()},p.remove=function(a,b){return!!this.b&&(this.f=this.f.filter((function(e){return e.startTime<a||e.endTime>=b})),Ba(this),!0)},p.isTextVisible=function(){return this.l},p.setTextVisibility=function(a){this.l=a},H("shaka.text.UITextDisplayer",Ua),Ua.prototype.setTextVisibility=Ua.prototype.setTextVisibility,Ua.prototype.isTextVisible=Ua.prototype.isTextVisible,Ua.prototype.remove=Ua.prototype.remove,Ua.prototype.destroy=Ua.prototype.destroy,Ua.prototype.append=Ua.prototype.append,H("shaka.util.ConfigUtils",za),za.convertToConfigObject=Ha,za.mergeConfigObjects=Va,H("shaka.util.PlayerConfiguration",qa),qa.mergeConfigObjects=li,T(to,ne),(p=to.prototype).destroy=function(){var b,a=this;return B((function(e){switch(e.a){case 1:return a.g==ss?e.return():(a.g=ss,b=Ca(a.V,(function(){return{node:a.wa,payload:Do(),rb:!1}})),I(e,new Promise((function(e){b.Wb=function(){},b.Uc=function(){e()},b.wb=function(){e()},b.onError=function(){e()},b.Wc=function(){e()}})),2));case 2:return I(e,a.V.destroy(),3);case 3:if(a.b&&(a.b.release(),a.b=null),a.ib=null,a.o=null,a.m=null,a.f=null,a.eb=null,!a.T){e.u(0);break}return I(e,a.T.destroy(),5);case 5:a.T=null,x(e)}}))},p.fc=function(a,b){if(b=void 0===b||b,this.g==ss)return Promise.reject(Lo());var e=Do();e.D=a,fn()||(b=!1);var t=b?this.$:this.Va,n=Ca(this.V,(function(){return{node:t,payload:e,rb:!1}}));return n.Wb=function(){},Oo(n)},p.detach=function(){var a=this;if(this.g==ss)return Promise.reject(Lo());var b=Ca(this.V,(function(){return{node:a.wa,payload:Do(),rb:!1}}));return b.Wb=function(){},Oo(b)},p.$d=function(a){var b=this;if(a=void 0===a||a,this.g==ss)return Promise.reject(Lo());fn()||(a=!1);var e=Do(),t=Ca(this.V,(function(t){var n=t.D&&a?b.$:t.D?b.Va:b.wa;return e.D=t.D,{node:n,payload:e,rb:!1}}));return t.Wb=function(){},Oo(t)},p.load=function(a,b,e){var t=this;if(this.g==ss)return Promise.reject(Lo());this.dispatchEvent(no(Ho));var n=Do();n.uri=a,n.Vd=Date.now()/1e3,e&&(n.mimeType=e),void 0!==b&&(n.startTime=b);var r=function(a,b){if(!fn())return!0;var e=b.mimeType,t=b.uri||"";return e||(e={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Cr(t)]),!!e&&(""!=(b.D||yn()).canPlayType(e)&&(!fn()||!(e in Nr)&&!(Cr(t)in Mr)||mn()&&a.m.streaming.useNativeHlsOnSafari))}(this,n)?this.ka:this.L,g=Ca(this.V,(function(e){return null==e.D?null:(n.D=e.D,{node:r,payload:n,rb:!0})}));return this.f=new eo,g.Wb=function(){},new Promise((function(e,n){g.Wc=function(){return n(new it(2,7,7002))},g.Uc=function(){e(),t.dispatchEvent(no(Vo))},g.wb=function(){return n(Lo())},g.onError=function(e){return n(e)}}))},p.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=Ha(a,b)),a.manifest&&a.manifest.dash&&"defaultPresentationDelay"in a.manifest.dash&&(Ae("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),a.manifest.defaultPresentationDelay=a.manifest.dash.defaultPresentationDelay,delete a.manifest.dash.defaultPresentationDelay);var e=li(this.m,a,fo(this));return co(this),e},p.getConfiguration=function(){var a=fo(this);return li(a,this.m,fo(this)),a},p.ag=function(){for(var a in this.m)delete this.m[a];li(this.m,fo(this),fo(this)),co(this)},p.qf=function(){return this.g},p.xf=function(){return this.a},p.mc=function(){return this.T},p.xd=function(){return this.Ja},p.Pc=function(){return function(a,b){for(var e=[],t=1;t<arguments.length;++t)e[t-1]=arguments[t];Q.has(a)||(Q.add(a),$.apply(W,f(e)))}("getAdManager","Shaka Player's ad features are currently in BETA and are NOT yet covered by semantic versioning compatibility guarantees.  The API may change at any time!"),this.J},p.S=function(){return this.v?this.v.presentationTimeline.S():!(!this.a||!this.a.src)&&1/0==this.a.duration},p.tb=function(){return!!this.v&&this.v.presentationTimeline.tb()},p.ue=function(){if(this.v){var a=this.v.variants;return!!a.length&&!a[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},p.Ia=function(){if(this.v){var a=this.v.presentationTimeline;return{start:a.Pb(),end:a.Wa()}}return this.a&&this.a.src&&(a=this.a.seekable).length?{start:a.start(0),end:a.end(a.length-1)}:{start:0,end:0}},p.keySystem=function(){return kn(this.drmInfo())},p.drmInfo=function(){return this.l?this.l.c:null},p.lc=function(){return this.l?this.l.lc():1/0},p.vc=function(){return!!this.F&&this.F.a==Sr},p.nc=function(){return this.a?this.C?this.C.b:1:0},p.Zd=function(a){0==a?$("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.C.set(a),this.g==cs&&(this.o.playbackRateChanged(a),pa(this.c,1<Math.abs(a))))},p.ce=function(){this.g==ls&&this.C.set(1),this.g==cs&&(this.C.set(1),this.o.playbackRateChanged(1),pa(this.c,!1))},p.Rb=function(){if(this.v){for(var a=this.c?this.c.b:null,b=[],e=q(this.v.variants),t=e.next();!t.done;t=e.next())if(sr(t=t.value)){var n=nr(t);n.active=t==a,b.push(n)}return b}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return ar(e)})):[]},p.Qb=function(){if(this.v){for(var a=this.c?this.c.c:null,b=[],e=q(this.v.textStreams),t=e.next();!t.done;t=e.next()){var n=ir(t=t.value);n.active=t==a,b.push(n)}return b}return this.a&&this.a.src&&this.a.textTracks?lo(this).map((function(e){var g=or(e);return g.active="disabled"!=e.mode,g.type="text",g.originalTextId=e.id,"captions"==e.kind&&(g.mimeType="application/cea-608"),e.kind&&(g.roles=[e.kind]),g})):[]},p.Ie=function(a){if(this.v&&this.c){var b=this.v.textStreams.find((function(e){return e.id==a.id}));b&&b!=this.c.c&&(Za(this.f.a,b,!1),ma(this.c,b),To(this),this.X=b.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(var e=(b=q(b=lo(this))).next();!e.done;e=b.next())rr(e=e.value)==a.id?e.mode=this.R?"showing":"hidden":e.mode="disabled";To(this)}},p.Je=function(a,b,e){if(b=void 0!==b&&b,e=void 0===e?0:e,this.v&&this.c){this.m.abr.enabled&&$("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var t=this.v.variants.find((function(e){return e.id==a.id}));t&&sr(t)&&t!=this.c.b&&(Qa(this.f.a,t,!1),th(this.c,t,b,e),Eo(this),this.Ka=new Er(t),vo(this))}else if(this.a&&this.a.audioTracks){for(e=(b=q(b=Array.from(this.a.audioTracks))).next();!e.done;e=b.next())rr(e=e.value)==a.id&&(e.enabled=!0);Eo(this)}},p.ef=function(){return Ro(this.Rb())},p.Gf=function(){return Ro(this.Qb())},p.df=function(){return Array.from(_o(this.Rb()))},p.Ff=function(){return Array.from(_o(this.Qb()))},p.bd=function(a,b){if(this.v&&this.A)this.Ka=new Tr(a,b||"",0,""),go(this);else if(this.a&&this.a.audioTracks){for(var e=Array.from(this.a.audioTracks),t=Oe(a),n=null,r=null,g=(e=q(e)).next();!g.done;g=e.next()){var o=ar(g=g.value);Oe(o.language)==t&&(n=g,b?o.roles.includes(b)&&(r=g):0==o.roles.length&&(r=g))}r?(r.enabled=!0,Eo(this)):n&&(n.enabled=!0,Eo(this))}},p.cd=function(a,b){if(this.v&&this.A){this.X=a,this.Ta=b||"";var e=cr(this.v.textStreams,this.X,this.Ta)[0]||null;e&&e!=this.c.c&&(Za(this.f.a,e,!1),this.m.streaming.alwaysStreamText||this.vb())&&(ma(this.c,e),To(this))}else{var t=Oe(a);(e=this.Qb().find((function(e){return Oe(e.language)==t&&(!b||e.roles.includes(b))})))&&this.Ie(e)}},p.dg=function(a){if(this.v&&this.A){for(var b=null,e=q(this.v.variants),t=e.next();!t.done;t=e.next())if((t=t.value).audio.label==a){b=t;break}null!=b&&(this.Ka=new Tr(b.language,"",0,a),go(this))}},p.vb=function(){var a=this.R;return this.G?this.G.l.isTextVisible():this.a&&this.a.src&&this.a.textTracks?lo(this).some((function(b){return"showing"==b.mode})):a},p.Td=function(a){if(a=!!a,this.R!=a){if(this.R=a,this.g==cs)this.G.l.setTextVisibility(a),this.m.streaming.alwaysStreamText||(a?this.c.c||0<(a=cr(this.v.textStreams,this.X,this.Ta)).length&&(ma(this.c,a[0]),To(this)):function(a){var b=a.a.get("text");b&&(Sa(b),Ia(b).catch((function(){})),a.a.delete("text")),a.c=null}(this.c));else if(this.a&&this.a.src&&this.a.textTracks)for(var b=lo(this),e=(b=q(b)).next();!e.done;e=b.next())"disabled"!=(e=e.value).mode&&(e.mode=a?"showing":"hidden");Ao(this)}},p.zf=function(){if(!this.S())return null;var a=this.V.f,b=0;if(this.A)b=this.A.g();else if(a){if(null==a.startTime)return new Date;b=a.startTime}return this.v?new Date(1e3*(this.v.presentationTimeline.f+b)):this.a&&this.a.getStartDate?(a=this.a.getStartDate(),isNaN(a.getTime())?null:new Date(a.getTime()+1e3*b)):null},p.qe=function(){if(!this.S())return null;if(this.v)return new Date(1e3*this.v.presentationTimeline.f);if(this.a&&this.a.getStartDate){var a=this.a.getStartDate();return isNaN(a.getTime())?null:a}return null},p.Qc=function(){if(this.g==cs)return this.G.Qc();var a={total:[],audio:[],video:[],text:[]};return this.g==ls&&(a.total=fi(this.a.buffered)),a},p.getStats=function(){if(this.g!=cs&&this.g!=ls)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};mo(this);var a=this.a;if(a.getVideoPlaybackQuality){a=a.getVideoPlaybackQuality();var b=this.f,e=Number(a.totalVideoFrames);b.L=Number(a.droppedVideoFrames),b.J=e,this.f.G=Number(a.corruptedVideoFrames)}this.l?a=(a=this.l).G?a.G:NaN:a=NaN,this.f.F=a,this.g==cs&&((a=this.c.b)&&(this.f.l=(this.C?this.C.b:1)*a.bandwidth),a&&a.video&&(b=this.f,e=a.video.height||NaN,b.M=a.video.width||NaN,b.o=e),this.S()&&(a=this.qe().valueOf()+1e3*this.Ia().end,this.f.s=(Date.now()-a)/1e3),this.v&&this.v.presentationTimeline&&(this.f.C=this.v.presentationTimeline.a),a=this.o.getBandwidthEstimate(),this.f.g=a);var t=this.f;a=t.M,b=t.o,e=t.l;for(var n=t.J,r=t.L,g=t.G,o=t.g,c=t.f,l=t.A,d=t.c,f=$a(t.b,"playing"),h=$a(t.b,"paused"),u=$a(t.b,"buffering"),m=t.F,v=t.s,y=t.C,E=function(a){function b(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var e=[],t=q(a.b),n=t.next();!n.done;n=t.next())e.push(b(n.value));return a.a&&e.push(b(a.a)),e}(t.b),T=[],A=(t=q(t.a.a)).next();!A.done;A=t.next())A=A.value,T.push({timestamp:A.timestamp,id:A.id,type:A.type,fromAdaptation:A.fromAdaptation,bandwidth:A.bandwidth});return{width:a,height:b,streamBandwidth:e,decodedFrames:n,droppedFrames:r,corruptedFrames:g,estimatedBandwidth:o,loadLatency:c,manifestTimeSeconds:l,drmTimeSeconds:d,playTime:f,pauseTime:h,bufferingTime:u,licenseTime:m,liveLatency:v,maxSegmentDuration:y,stateHistory:E,switchHistory:T}},p.addTextTrack=function(a,b,e,t,n,r){if(this.g==ls)throw Error("State error!");if(this.g!=cs)throw Error("State error!");var g=this.v.presentationTimeline.getDuration();if(1/0==g)throw new it(1,4,4033);return a={id:this.le++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ea(0,g,[a]),mimeType:t,codecs:n||"",kind:e,encrypted:!1,drmInfos:[],keyIds:new Set,language:b,label:r||null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},this.v.textStreams.push(a),bo(this),ir(a)},p.Pd=function(a,b){this.hd.width=a,this.hd.height=b},p.Md=function(){if(this.g==cs){var a=this.c;if(a.I.a)a=!1;else if(a.g)a=!1;else{for(var b=q(a.a.values()),e=b.next();!e.done;e=b.next())(e=e.value).sc&&(e.sc=!1,wa(a,e,.1));a=!0}}else a=!1;return a},p.uf=function(){return $("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.v},p.vf=function(){return this.bb},p.Ud=function(a){this.eb=a},p.Kb=function(a){if(function(a,b,e){e.variants=e.variants.filter((function(e){if(a&&a.M&&!Un(a,e))return!1;var t=e.audio;return e=e.video,!(t&&!Oi(t)||e&&!Oi(e)||t&&b&&b.audio&&!er(t,b.audio)||e&&b&&b.video&&!er(e,b.video))})),e.textStreams=e.textStreams.filter((function(e){return Ri(cn(e.mimeType,e.codecs))}))}(this.l,this.c?this.c.b:null,a),!a.variants.some(sr))throw new it(2,4,4032);for(var b=this.m.restrictions,e=this.hd,t=!1,n=q(a.variants),r=n.next();!r.done;r=n.next()){var g=(r=r.value).allowedByApplication;r.allowedByApplication=Zi(r,b,e),g!=r.allowedByApplication&&(t=!0)}if(t&&this.c&&bo(this),b=this.l?this.l.c:null)for(t=(e=q(a.variants)).next();!t.done;t=e.next())for(n=(t=q(((t=t.value).video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]))).next();!n.done;n=t.next())if((n=n.value).keySystem==b.keySystem)for(r=(n=q(n.initData||[])).next();!r.done;r=n.next())r=r.value,xn(this.l,r.initDataType,r.initData);No(this,a)},H("shaka.Player",to),to.prototype.setVideoContainer=to.prototype.Ud,to.prototype.getManifestParserFactory=to.prototype.vf,to.prototype.getManifest=to.prototype.uf,to.prototype.retryStreaming=to.prototype.Md,to.prototype.setMaxHardwareResolution=to.prototype.Pd,to.prototype.addTextTrack=to.prototype.addTextTrack,to.prototype.getStats=to.prototype.getStats,to.prototype.getBufferedInfo=to.prototype.Qc,to.prototype.getPresentationStartTimeAsDate=to.prototype.qe,to.prototype.getPlayheadTimeAsDate=to.prototype.zf,to.prototype.setTextTrackVisibility=to.prototype.Td,to.prototype.isTextTrackVisible=to.prototype.vb,to.prototype.selectVariantsByLabel=to.prototype.dg,to.prototype.selectTextLanguage=to.prototype.cd,to.prototype.selectAudioLanguage=to.prototype.bd,to.prototype.getTextLanguages=to.prototype.Ff,to.prototype.getAudioLanguages=to.prototype.df,to.prototype.getTextLanguagesAndRoles=to.prototype.Gf,to.prototype.getAudioLanguagesAndRoles=to.prototype.ef,to.prototype.selectVariantTrack=to.prototype.Je,to.prototype.selectTextTrack=to.prototype.Ie,to.prototype.getTextTracks=to.prototype.Qb,to.prototype.getVariantTracks=to.prototype.Rb,to.prototype.cancelTrickPlay=to.prototype.ce,to.prototype.trickPlay=to.prototype.Zd,to.prototype.getPlaybackRate=to.prototype.nc,to.prototype.isBuffering=to.prototype.vc,to.prototype.getExpiration=to.prototype.lc,to.prototype.drmInfo=to.prototype.drmInfo,to.prototype.keySystem=to.prototype.keySystem,to.prototype.seekRange=to.prototype.Ia,to.prototype.isAudioOnly=to.prototype.ue,to.prototype.isInProgress=to.prototype.tb,to.prototype.isLive=to.prototype.S,to.prototype.getAdManager=to.prototype.Pc,to.prototype.getAssetUri=to.prototype.xd,to.prototype.getNetworkingEngine=to.prototype.mc,to.prototype.getMediaElement=to.prototype.xf,to.prototype.getLoadMode=to.prototype.qf,to.prototype.resetConfiguration=to.prototype.ag,to.prototype.getConfiguration=to.prototype.getConfiguration,to.prototype.configure=to.prototype.configure,to.prototype.load=to.prototype.load,to.prototype.unload=to.prototype.$d,to.prototype.detach=to.prototype.detach,to.prototype.attach=to.prototype.fc,to.probeSupport=function(){var a,b,e,t,n;return B((function(g){if(1==g.a)return I(g,function(){var a,b,e,t,g,n;return B((function(r){return 1==r.a?(a="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),e=[{videoCapabilities:b=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:b}],t=new Map,g=function(n){var r,o,c;return B((function(u){switch(u.a){case 1:return k(u,2),I(u,navigator.requestMediaKeySystemAccess(n,e),4);case 4:return r=u.b,c=!!(o=r.getConfiguration().sessionTypes)&&o.includes("persistent-license"),gn("Tizen 3")&&(c=!1),t.set(n,{persistentState:c}),I(u,r.createMediaKeys(),5);case 5:N(u,0);break;case 2:M(u),t.set(n,null),x(u)}}))},n=a.map((function(e){return g(e)})),I(r,Promise.all(n),2)):r.return(un(t))}))}(),2);a=g.b;var r={};if(fn()){for(var o in Nr)r[o]=!0;for(var c in Mr)r[c]=!0}o={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var l=(c=q(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!l.done;l=c.next())r[l=l.value]=fn()?!!Nr[l]:hn(l);for(var d in o)r[d]=fn()?!!Mr[d]:hn(o[d]);for(b=r,r={},o=(d=q('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!o.done;o=d.next())r[o=o.value]=fn()?!!Ri(o)||(MediaSource.isTypeSupported(o)||St(o)):hn(o),r[c=o.split(";")[0]]=r[c]||r[o];for(n in e={manifest:b,media:r,drm:a},t=hs)e[n]=t[n]();return g.return(e)}))},to.isBrowserSupported=io,to.setAdManagerFactory=function(a){ps=a},to.registerSupportPlugin=function(a,b){hs[a]=b},to.prototype.destroy=to.prototype.destroy;var Uo="abrstatuschanged",Bo="adaptation",Fo="buffering",jo="drmsessionupdate",Go="emsg",Ko="error",zo="expirationupdated",Vo="loaded",Ho="loading",qo="manifestparsed",Xo="metadata",Wo="onstatechange",Yo="onstateidle",$o="ratechange",Jo="streaming",Qo="textchanged",Zo="texttrackvisibility",es="timelineregionadded",ts="timelineregionenter",ns="timelineregionexit",is="trackschanged",rs="unloading",as="variantchanged",os={rg:Uo,sg:Bo,ug:Fo,vg:jo,xg:Go,Error:Ko,yg:zo,Ag:"largegap",Bg:Vo,Cg:Ho,Dg:qo,Metadata:Xo,Eg:Wo,Fg:Yo,Gg:$o,Hg:Jo,Ig:Qo,Jg:Zo,Kg:es,Lg:ts,Mg:ns,Ng:is,Og:rs,Pg:as},ss=0,us=1,cs=2,ls=3;to.LoadMode={DESTROYED:ss,NOT_LOADED:us,MEDIA_SOURCE:cs,SRC_EQUALS:ls},to.version="v3.0.8";var ds=["3","0"];Ie=new function(a){this.a=a,this.c=we,this.b=Se}(new Te(Number(ds[0]),Number(ds[1])));var fs=["output-restricted","internal-error"],hs={},ps=null;function ms(){this.a=[],this.f=this.b=this.c=0}function vs(a,b){var e=this;this.c=a,this.a=b,this.f=!1,this.g=this.a.getVolume(),this.b=new en,this.b.h(this.a,google.ima.AdEvent.Type.PAUSED,(function(){e.f=!0})),this.b.h(this.a,google.ima.AdEvent.Type.RESUMED,(function(){e.f=!1}))}function gs(a,b,e,t){var n=this;this.l=a,this.a=b,this.s=NaN,this.f=t,this.o=null,this.b=new en,google.ima.settings.setLocale(e),(a=new google.ima.AdDisplayContainer(this.l,this.a)).initialize(),this.g=new google.ima.AdsLoader(a),this.g.getSettings().setPlayerType("shaka-player"),this.g.getSettings().setPlayerVersion("v3.0.8"),this.c=null,this.b.ya(this.g,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){!function(a,b){a.f(new X("ads-loaded",{loadTime:Date.now()/1e3-a.s})),a.c=b.getAdsManager(a.a),a.f(new X("ima-ad-manager-loaded",{imaAdsManager:a.c}));var e=a.c.getCuePoints();if(e.length){for(var t=[],n=(e=q(e)).next();!n.done;n=e.next())t.push(new Ss(n.value));a.f(new X("ad-cue-points-changed",{cuepoints:t}))}!function(a){a.b.h(a.c,google.ima.AdErrorEvent.Type.AD_ERROR,(function(b){ys(a,b)})),a.b.h(a.c,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(b){bs(a,b)})),a.b.h(a.c,google.ima.AdEvent.Type.STARTED,(function(b){bs(a,b)})),a.b.h(a.c,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(b){a.f(new X("ad-first-quartile",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.MIDPOINT,(function(b){a.f(new X("ad-midpoint",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(b){a.f(new X("ad-third-quartile",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.COMPLETE,(function(b){a.f(new X("ad-complete",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(b){Es(a,b)})),a.b.h(a.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(b){Es(a,b)})),a.b.h(a.c,google.ima.AdEvent.Type.SKIPPED,(function(b){a.f(new X("ad-skipped",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(b){a.f(new X("ad-volume-changed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.VOLUME_MUTED,(function(b){a.f(new X("ad-muted",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.PAUSED,(function(b){a.o.f=!0,a.f(new X("ad-paused",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.RESUMED,(function(b){a.o.f=!1,a.f(new X("ad-resumed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(b){a.f(new X("ad-skip-state-changed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.CLICK,(function(){a.f(new X("ad-clicked"))})),a.b.h(a.c,google.ima.AdEvent.Type.AD_PROGRESS,(function(b){a.f(new X("ad-progress",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.AD_BUFFERING,(function(b){a.f(new X("ad-buffering",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.IMPRESSION,(function(b){a.f(new X("ad-impression",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.DURATION_CHANGE,(function(b){a.f(new X("ad-duration-changed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.USER_CLOSE,(function(b){a.f(new X("ad-closed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.LOADED,(function(b){a.f(new X("ad-loaded",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(b){a.f(new X("all-ads-completed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(b){a.f(new X("ad-linear-changed",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.AD_METADATA,(function(b){a.f(new X("ad-metadata",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.LOG,(function(b){a.f(new X("ad-recoverable-error",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.AD_BREAK_READY,(function(b){a.f(new X("ad-break-ready",{originalEvent:b}))})),a.b.h(a.c,google.ima.AdEvent.Type.INTERACTION,(function(b){a.f(new X("ad-interaction",{originalEvent:b}))}))}(a);try{a.c.init(a.a.offsetWidth,a.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),a.b.h(a.a,"loadeddata",(function(){a.c.resize(a.a.offsetWidth,a.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),a.c.start()}catch(e){Es(a,null)}}(n,e)})),this.b.h(this.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){ys(n,e)})),this.a.onended=function(){n.g.contentComplete()}}function ys(a,b){b.getError(),Es(a,null),a.f(new X("ad-cue-points-changed",{cuepoints:[]}))}function bs(a,b){var e=b.getAd();a.o=new vs(e,a.c),a.f(new X("ad-started",{ad:a.o,sdkAdObject:e,originalEvent:b})),a.l.setAttribute("ad-active","true"),a.a.pause()}function Es(a,b){a.f(new X("ad-stopped",{originalEvent:b})),a.l.removeAttribute("ad-active"),a.a.play()}function Ts(a,b){this.c=a,this.b=null,this.a=b}function As(a,b,e,t){var n=this;this.A=a,this.a=b,this.g=null,this.G=NaN,this.f=t,this.F=!1,this.C=this.l=this.o=null,this.s="",this.b=new en,(a=new google.ima.dai.api.UiSettings).setLocale(e),this.c=new google.ima.dai.api.StreamManager(this.a,this.A,a),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(a,b){a.f(new X("ads-loaded",{loadTime:Date.now()/1e3-a.G}));var e=b.getStreamData().url;a.g.resolve(e),a.g=null,a.F||a.b.h(a.a,"seeked",(function(){var e=a.a.currentTime;if(0!=e){a.c.streamTimeForContentTime(e);var t=a.c.previousCuePointForStreamTime(e);t&&!t.played&&(a.o=e,a.a.currentTime=t.start)}}))}(n,e)})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){n.s.length?n.g.resolve(n.s):n.g.reject("IMA Stream request returned an error and there was no backup asset uri provided."),n.g=null})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),n.l=new Ts(e,n.a),n.C&&(n.l.b=n.C),n.f(new X("ad-started",{ad:n.l})),n.A.setAttribute("ad-active","true")})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){n.A.removeAttribute("ad-active");var e=n.a.currentTime;n.o&&n.o>e&&(n.a.currentTime=n.o,n.o=null)})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){n.C=e.getStreamData().adProgressData,n.l&&(n.l.b=n.C)})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){n.f(new X("ad-first-quartile"))})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){n.f(new X("ad-midpoint"))})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){n.f(new X("ad-third-quartile"))})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){n.f(new X("ad-complete")),n.f(new X("ad-stopped")),n.A.removeAttribute("ad-active"),n.l=null})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){n.f(new X("ad-skipped")),n.f(new X("ad-stopped"))})),this.b.h(this.c,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var g=e.getStreamData();e=[];for(var t=(g=q(g.cuepoints)).next();!t.done;t=g.next())t=t.value,e.push(new Ss(t.start,t.end));n.f(new X("ad-cue-points-changed",{cuepoints:e}))}))}function ws(){ne.call(this),this.a=this.b=null,this.f=new ms,this.c=navigator.language}function Ss(a,b){this.start=a,this.end=void 0===b?null:b}function Is(a){return JSON.stringify(a,(function(b,e){if("function"!=typeof e){if(e instanceof Event||e instanceof X){var t={};for(r in e){var n=e[r];n&&"object"==typeof n?"detail"==r&&(t[r]=n):r in Event||(t[r]=n)}return t}if(e instanceof Error){var r=new Set(["name","message","stack"]);for(t in e)r.add(t);for(t=(n=q(Object.getOwnPropertyNames(e))).next();!t.done;t=n.next())r.add(t.value);for(n={},t=(r=q(r)).next();!t.done;t=r.next())n[t=t.value]=e[t];r={__type__:"Error",contents:n}}else if(e instanceof TimeRanges)for(r={__type__:"TimeRanges",length:e.length,start:[],end:[]},n=(t=q(fi(e))).next();!n.done;n=t.next()){var g=(n=n.value).end;r.start.push(n.start),r.end.push(g)}else r=e instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(e)}:"number"==typeof e?isNaN(e)?"NaN":isFinite(e)?e:0>e?"-Infinity":"Infinity":e;return r}}))}function xs(a){return JSON.parse(a,(function(b,e){if("NaN"==e)var t=NaN;else if("-Infinity"==e)t=-1/0;else if("Infinity"==e)t=1/0;else if(e&&"object"==typeof e&&"TimeRanges"==e.__type__)t=function(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}}(e);else if(e&&"object"==typeof e&&"Uint8Array"==e.__type__)t=new Uint8Array(e.entries);else if(e&&"object"==typeof e&&"Error"==e.__type__){t=e.contents;var n,r=Error(t.message);for(n in t)r[n]=t[n];t=r}else t=e;return t}))}(p=vs.prototype).getDuration=function(){return this.c.getDuration()},p.getMinSuggestedDuration=function(){return this.c.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.a.getRemainingTime()},p.isPaused=function(){return this.f},p.isSkippable=function(){return 0<=this.c.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var a=this.c.getSkipTimeOffset();return a=this.getRemainingTime()-a,Math.max(a,0)},p.canSkipNow=function(){return this.a.getAdSkippableState()},p.skip=function(){return this.a.skip()},p.pause=function(){return this.a.pause()},p.play=function(){return this.a.resume()},p.getVolume=function(){return this.a.getVolume()},p.setVolume=function(a){return this.a.setVolume(a)},p.isMuted=function(){return 0==this.a.getVolume()},p.resize=function(a,b){this.a.resize(a,b,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(a){a?(this.g=this.getVolume(),this.setVolume(0)):this.setVolume(this.g)},p.getSequenceLength=function(){var a=this.c.getAdPodInfo();return null==a?1:a.getTotalAds()},p.getPositionInSequence=function(){var a=this.c.getAdPodInfo();return null==a?1:a.getAdPosition()},p.release=function(){this.a=this.c=null},H("shaka.ads.ClientSideAd",vs),vs.prototype.release=vs.prototype.release,vs.prototype.getPositionInSequence=vs.prototype.getPositionInSequence,vs.prototype.getSequenceLength=vs.prototype.getSequenceLength,vs.prototype.setMuted=vs.prototype.setMuted,vs.prototype.resize=vs.prototype.resize,vs.prototype.isMuted=vs.prototype.isMuted,vs.prototype.setVolume=vs.prototype.setVolume,vs.prototype.getVolume=vs.prototype.getVolume,vs.prototype.play=vs.prototype.play,vs.prototype.pause=vs.prototype.pause,vs.prototype.skip=vs.prototype.skip,vs.prototype.canSkipNow=vs.prototype.canSkipNow,vs.prototype.getTimeUntilSkippable=vs.prototype.getTimeUntilSkippable,vs.prototype.isSkippable=vs.prototype.isSkippable,vs.prototype.isPaused=vs.prototype.isPaused,vs.prototype.getRemainingTime=vs.prototype.getRemainingTime,vs.prototype.getMinSuggestedDuration=vs.prototype.getMinSuggestedDuration,vs.prototype.getDuration=vs.prototype.getDuration,gs.prototype.stop=function(){this.c&&this.c.stop(),this.l&&Oa(this.l)},(p=Ts.prototype).getDuration=function(){return this.b?this.b.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.b?this.b.duration-this.b.currentTime:-1},p.isPaused=function(){return this.a.paused},p.isSkippable=function(){return this.c.isSkippable()},p.getTimeUntilSkippable=function(){var a=this.c.getSkipTimeOffset();return a=this.getRemainingTime()-a,Math.max(a,0)},p.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},p.skip=function(){this.a.currentTime+=this.getRemainingTime()},p.pause=function(){return this.a.pause()},p.play=function(){return this.a.play()},p.getVolume=function(){return this.a.volume},p.setVolume=function(a){this.a.volume=a},p.isMuted=function(){return this.a.muted},p.resize=function(){},p.setMuted=function(a){this.a.muted=a},p.getSequenceLength=function(){var a=this.c.getAdPodInfo();return null==a?1:a.getTotalAds()},p.getPositionInSequence=function(){var a=this.c.getAdPodInfo();return null==a?1:a.getAdPosition()},p.release=function(){this.a=this.b=this.c=null},H("shaka.ads.ServerSideAd",Ts),Ts.prototype.release=Ts.prototype.release,Ts.prototype.getPositionInSequence=Ts.prototype.getPositionInSequence,Ts.prototype.getSequenceLength=Ts.prototype.getSequenceLength,Ts.prototype.setMuted=Ts.prototype.setMuted,Ts.prototype.resize=Ts.prototype.resize,Ts.prototype.isMuted=Ts.prototype.isMuted,Ts.prototype.setVolume=Ts.prototype.setVolume,Ts.prototype.getVolume=Ts.prototype.getVolume,Ts.prototype.play=Ts.prototype.play,Ts.prototype.pause=Ts.prototype.pause,Ts.prototype.skip=Ts.prototype.skip,Ts.prototype.canSkipNow=Ts.prototype.canSkipNow,Ts.prototype.getTimeUntilSkippable=Ts.prototype.getTimeUntilSkippable,Ts.prototype.isSkippable=Ts.prototype.isSkippable,Ts.prototype.isPaused=Ts.prototype.isPaused,Ts.prototype.getRemainingTime=Ts.prototype.getRemainingTime,Ts.prototype.getMinSuggestedDuration=Ts.prototype.getMinSuggestedDuration,Ts.prototype.getDuration=Ts.prototype.getDuration,As.prototype.stop=function(){this.c.reset(),this.s="",this.o=null},As.prototype.onCueMetadataChange=function(a){if(a.key&&a.data){var b={};b[a.key]=a.data,this.c.onTimedMetadata(b)}},T(ws,ne),(p=ws.prototype).setLocale=function(a){this.c=a},p.initClientSide=function(a,b){var t=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new it(2,10,1e4);this.b=new gs(a,b,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":t.f.a.push(e.loadTime);break;case"ad-started":t.f.c++;break;case"ad-complete":t.f.b++;break;case"ad-skipped":t.f.f++}t.dispatchEvent(e)}))},p.onAssetUnload=function(){this.b&&this.b.stop(),this.dispatchEvent(new X("ad-stopped")),this.f=new ms},p.requestClientSideAds=function(a){if(!this.b)throw new it(1,10,10001);var b=this.b;b.s=Date.now()/1e3,b.g.requestAds(a)},p.initServerSide=function(a,b){var t=this;if(!e.google||!google.ima||!google.ima.dai)throw new it(2,10,10002);this.a=new As(a,b,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":t.f.a.push(e.loadTime);break;case"ad-started":t.f.c++;break;case"ad-complete":t.f.b++;break;case"ad-skipped":t.f.f++}t.dispatchEvent(e)}))},p.requestServerSideStream=function(a,b){if(b=void 0===b?"":b,!this.a)throw new it(1,10,10003);a.adTagParameters||(a.adTagParameters={});var e=a.adTagParameters;(e.mpt||e.mpv)&&$('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),a.adTagParameters.mpt="Shaka Player",a.adTagParameters.mpv="v3.0.8";var t=b;return(e=this.a).g?e=Promise.reject(new it(1,10,10004)):(a instanceof google.ima.dai.api.LiveStreamRequest&&(e.F=!0),e.g=new at,e.c.requestStream(a),e.s=t||"",e.G=Date.now()/1e3,e=e.g),e},p.replaceServerSideAdTagParameters=function(a){if(!this.a)throw new it(1,10,10003);(a.mpt||a.mpv)&&$('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),a.mpt="Shaka Player",a.mpv="v3.0.8",this.a.c.replaceAdTagParameters(a)},p.getStats=function(){var a=this.f;return{loadTimes:a.a,started:a.c,playedCompletely:a.b,skipped:a.f}},p.onDashTimedMetadata=function(a){if(this.a&&"urn:google:dai:2018"==a.schemeIdUri){var b=a.schemeIdUri,e=a.eventElement?a.eventElement.getAttribute("messageData"):null;this.a.c.processMetadata(b,e,a.startTime)}},p.onHlsTimedMetadata=function(a,b){this.a&&this.a.c.processMetadata("ID3",a.data,b)},p.onCueMetadataChange=function(a){this.a&&this.a.onCueMetadataChange(a)},H("shaka.ads.AdManager",ws),ws.prototype.onCueMetadataChange=ws.prototype.onCueMetadataChange,ws.prototype.onHlsTimedMetadata=ws.prototype.onHlsTimedMetadata,ws.prototype.onDashTimedMetadata=ws.prototype.onDashTimedMetadata,ws.prototype.getStats=ws.prototype.getStats,ws.prototype.replaceServerSideAdTagParameters=ws.prototype.replaceServerSideAdTagParameters,ws.prototype.requestServerSideStream=ws.prototype.requestServerSideStream,ws.prototype.initServerSide=ws.prototype.initServerSide,ws.prototype.requestClientSideAds=ws.prototype.requestClientSideAds,ws.prototype.onAssetUnload=ws.prototype.onAssetUnload,ws.prototype.initClientSide=ws.prototype.initClientSide,ws.prototype.setLocale=ws.prototype.setLocale,ws.ADS_LOADED="ads-loaded",ws.AD_STARTED="ad-started",ws.AD_FIRST_QUARTILE="ad-first-quartile",ws.AD_MIDPOINT="ad-midpoint",ws.AD_THIRD_QUARTILE="ad-third-quartile",ws.AD_COMPLETE="ad-complete",ws.AD_STOPPED="ad-stopped",ws.AD_SKIPPED="ad-skipped",ws.AD_VOLUME_CHANGED="ad-volume-changed",ws.AD_MUTED="ad-muted",ws.AD_PAUSED="ad-paused",ws.AD_RESUMED="ad-resumed",ws.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ws.CUEPOINTS_CHANGED="ad-cue-points-changed",ws.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ws.AD_CLICKED="ad-clicked",ws.AD_PROGRESS="ad-progress",ws.AD_BUFFERING="ad-buffering",ws.AD_IMPRESSION="ad-impression",ws.AD_DURATION_CHANGED="ad-duration-changed",ws.AD_CLOSED="ad-closed",ws.AD_LOADED="ad-loaded",ws.ALL_ADS_COMPLETED="all-ads-completed",ws.AD_LINEAR_CHANGED="ad-linear-changed",ws.AD_METADATA="ad-metadata",ws.AD_RECOVERABLE_ERROR="ad-recoverable-error",ws.AD_BREAK_READY="ad-break-ready",ws.AD_INTERACTION="ad-interaction",ps=function(){return new ws};var ks="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Cs="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Ns=["loop","playbackRate"],Ms=["pause","play"],_s={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Rs={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Ls=[["getConfiguration","configure"]],Ps=[["isTextTrackVisible","setTextTrackVisibility"]],Ds="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),Os=["attach","detach","load","unload"];function Us(a,b,e,t,n,r){var g=this;this.R=a,this.f=new kt(b),this.V=e,this.s=!1,this.F=t,this.M=n,this.J=r,this.b=this.l=!1,this.L="",this.o=null,this.A=function(){return Ks(g)},this.C=function(e,t){var n=xs(t);switch(n.type){case"event":var r=n.targetName;n=new X((n=n.event).type,n),g.F(r,n);break;case"update":for(var o in r=n.update)for(var c in n=g.a[o]||{},r[o])n[c]=r[o][c];g.s&&(g.V(),g.s=!1);break;case"asyncComplete":if(o=n.id,n=n.error,c=g.c[o],delete g.c[o],c)if(n){for(r in o=new it(n.severity,n.category,n.code),n)o[r]=n[r];c.reject(o)}else c.resolve()}},this.a={video:{},player:{}},this.G=0,this.c={},this.g=null,Ws.add(this)}function Bs(a,b,e){Xs=e,e.addUpdateListener(a.A),e.addMessageListener("urn:x-cast:com.google.shaka.v2",a.C),Ks(a),Vs(a,{type:"init",initState:b,appData:a.o}),a.g.resolve()}function Fs(a,b){var e=8003;switch(b.code){case"cancel":e=8004;break;case"timeout":e=8005;break;case"receiver_unavailable":e=8006}a.g.reject(new it(2,8,e,b))}function js(a,b){var e=a.J();a.g=new at,a.s=!0,Bs(a,e,b)}function Gs(a){var b=Xs;b.removeUpdateListener(a.A),b.removeMessageListener("urn:x-cast:com.google.shaka.v2",a.C)}function Ks(a){var b=!!Xs&&"connected"==Xs.status;if(a.b&&!b){for(var e in a.M(),a.a)a.a[e]={};zs(a)}a.b=b,a.L=b?Xs.receiver.friendlyName:"",a.f.ua()}function zs(a){for(var b in a.c){var e=a.c[b];delete a.c[b],e.reject(new it(1,7,7e3))}}function Vs(a,b){var e=Is(b),t=Xs;try{t.sendMessage("urn:x-cast:com.google.shaka.v2",e,(function(){}),J)}catch(n){throw t=new X("error",{detail:e=new it(2,8,8005,n)}),a.F("player",t),a.Lb(),e}}(p=Us.prototype).destroy=function(){return Ws.delete(this),zs(this),Xs&&Gs(this),this.f&&(this.f.stop(),this.f=null),this.M=this.F=null,this.b=this.l=!1,this.C=this.A=this.g=this.c=this.a=this.o=null,Promise.resolve()},p.ea=function(){return this.b},p.Zc=function(){return this.L},p.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.R.length){this.l=!0,this.f.ua();var a=new chrome.cast.SessionRequest(this.R);a=new chrome.cast.ApiConfig(a,(function(b){for(var e=q(Ws),t=e.next();!t.done;t=e.next())js(t.value,b)}),(function(b){for(var e=q(Ws),t=e.next();!t.done;t=e.next())t=t.value,qs="available"==b,t.f.ua()}),"origin_scoped"),chrome.cast.initialize(a,(function(){}),(function(){})),qs&&this.f.P(Hs),(a=Xs)&&a.status!=chrome.cast.SessionStatus.STOPPED?js(this,a):Xs=null}},p.Nd=function(a){this.o=a,this.b&&Vs(this,{type:"appData",appData:this.o})},p.cast=function(a){var b=this;return B((function(e){if(!b.l)throw new it(1,8,8e3);if(!qs)throw new it(1,8,8001);if(b.b)throw new it(1,8,8002);return b.g=new at,chrome.cast.requestSession((function(e){return Bs(b,a,e)}),(function(e){return Fs(b,e)})),I(e,b.g,0)}))},p.Lb=function(){if(this.b){if(zs(this),Xs){Gs(this);try{Xs.stop((function(){}),(function(){}))}catch(e){}Xs=null}Ks(this)}},p.get=function(a,b){var e=this;if("video"==a){if(Ms.includes(b))return function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return e.Fe.apply(e,[a,b].concat(f(n)))}}else if("player"==a){if(Rs[b]&&!this.get("player","isLive")())return function(){};if(Ds.includes(b))return function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return e.Fe.apply(e,[a,b].concat(f(n)))};if(Os.includes(b))return function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return e.Yf.apply(e,[a,b].concat(f(n)))};if(_s[b])return function(){return e.a[a][b]}}return this.a[a][b]},p.set=function(a,b,e){this.a[a][b]=e,Vs(this,{type:"set",targetName:a,property:b,value:e})},p.Fe=function(a,b,e){for(var t=[],n=2;n<arguments.length;++n)t[n-2]=arguments[n];Vs(this,{type:"call",targetName:a,methodName:b,args:t})},p.Yf=function(a,b,e){for(var t=[],n=2;n<arguments.length;++n)t[n-2]=arguments[n];n=new at;var r=this.G.toString();this.G++,this.c[r]=n;try{Vs(this,{type:"asyncCall",targetName:a,methodName:b,args:t,id:r})}catch(e){n.reject(e)}return n};var Hs=.02,qs=!1,Xs=null,Ws=new Set;function Ys(a,b,e){ne.call(this);var t=this;this.f=a,this.c=b,this.b=this.o=this.g=this.s=this.l=null,this.C=e,this.A=new Map,this.a=new Us(e,(function(){return Qs(t)}),(function(){return Zs(t)}),(function(e,n){return nu(t,e,n)}),(function(){return eu(t)}),(function(){return Js(t)})),function(a){a.a.init(),a.b=new en;for(var b=q(ks),e=b.next();!e.done;e=b.next())a.b.h(a.f,e.value,(function(e){a.a.ea()||(e=new X(e.type,e),a.g.dispatchEvent(e))}));for(var t in os)a.b.h(a.c,os[t],(function(e){a.a.ea()||a.o.dispatchEvent(e)}));for(var n in a.l={},b={},a.f)b.$b=n,Object.defineProperty(a.l,b.$b,{configurable:!1,enumerable:!0,get:function(e){return function(){return tu(a,e.$b)}}(b),set:function(e){return function(g){var t=e.$b;a.a.ea()?a.a.set("video",t,g):a.f[t]=g}}(b)}),b={$b:b.$b};a.s={},$s(a,(function(e){Object.defineProperty(a.s,e,{configurable:!1,enumerable:!0,get:function(){return function(a,b){if(a.A.has(b)&&(b=a.A.get(b)),"addEventListener"==b)return function(e,t,n){return a.o.addEventListener(e,t,n)};if("removeEventListener"==b)return function(e,t,n){return a.o.removeEventListener(e,t,n)};if("getMediaElement"==b)return function(){return a.l};if("getSharedConfiguration"==b)return a.a.get("player","getConfiguration");if("getNetworkingEngine"==b)return function(){return a.c.mc()};if("getAdManager"==b)return function(){return a.c.Pc()};if("setVideoContainer"==b)return function(e){return a.c.Ud(e)};if(a.a.ea()){if("getManifest"==b||"drmInfo"==b)return function(){return $(b+"() does not work while casting!"),null};if("attach"==b||"detach"==b)return function(){return $(b+"() does not work while casting!"),Promise.resolve()}}return a.a.ea()&&0==Object.keys(a.a.a.video).length&&_s[b]||!a.a.ea()?a.c[b].bind(a.c):a.a.get("player",b)}(a,e)}})})),function(a){var b=new Map;$s(a,(function(e,t){if(b.has(t)){var n=b.get(t);e.length<n.length?a.A.set(e,n):a.A.set(n,e)}else b.set(t,e)}))}(a),a.g=new ne,a.g.Jc=a.l,a.o=new ne,a.o.Jc=a.s}(this)}function $s(a,b){function e(e){return"constructor"!=e&&"function"==typeof t[e]&&!n.has(e)}var t=a.c,n=new Set;for(r in t)e(r)&&(n.add(r),b(r,t[r]));for(var r=Object.getPrototypeOf(t),g=Object.getPrototypeOf({});r&&r!=g;){for(var o=q(Object.getOwnPropertyNames(r)),c=o.next();!c.done;c=o.next())e(c=c.value)&&(n.add(c),b(c,t[c]));r=Object.getPrototypeOf(r)}}function Js(a){var b={video:{},player:{},playerAfterLoad:{},manifest:a.c.xd(),startTime:null};a.f.pause();for(var e=q(Ns),t=e.next();!t.done;t=e.next())t=t.value,b.video[t]=a.f[t];for(a.f.ended||(b.startTime=a.f.currentTime),t=(e=q(Ls)).next();!t.done;t=e.next()){var n=t.value;t=n[1],n=a.c[n[0]](),b.player[t]=n}for(t=(e=q(Ps)).next();!t.done;t=e.next())t=(n=t.value)[1],n=a.c[n[0]](),b.playerAfterLoad[t]=n;return b}function Qs(a){var b=new X("caststatuschanged");a.dispatchEvent(b)}function Zs(a){var b=new X(a.l.paused?"pause":"play");a.g.dispatchEvent(b)}function eu(a){for(var b=q(Ls),e=b.next();!e.done;e=b.next()){var t=e.value;e=t[1],t=a.a.get("player",t[0])(),a.c[e](t)}var n=a.a.get("player","getAssetUri")();e=a.a.get("video","ended"),b=Promise.resolve();var r=a.f.autoplay;t=null,e||(t=a.a.get("video","currentTime")),n&&(a.f.autoplay=!1,b=a.c.load(n,t));var g={};for(t=(e=q(Ns)).next();!t.done;t=e.next())t=t.value,g[t]=a.a.get("video",t);b.then((function(){if(a.f){for(var e=q(Ns),t=e.next();!t.done;t=e.next())t=t.value,a.f[t]=g[t];for(t=(e=q(Ps)).next();!t.done;t=e.next()){var o=t.value;t=o[1],o=a.a.get("player",o[0])(),a.c[t](o)}a.f.autoplay=r,n&&a.f.play()}}),(function(e){e=new X(Ko,{detail:e}),a.c.dispatchEvent(e)}))}function tu(a,b){if("addEventListener"==b)return function(e,t,n){return a.g.addEventListener(e,t,n)};if("removeEventListener"==b)return function(e,t,n){return a.g.removeEventListener(e,t,n)};if(a.a.ea()&&0==Object.keys(a.a.a.video).length){var e=a.f[b];if("function"!=typeof e)return e}return a.a.ea()?a.a.get("video",b):("function"==typeof(e=a.f[b])&&(e=e.bind(a.f)),e)}function nu(a,b,e){a.a.ea()&&("video"==b?a.g.dispatchEvent(e):"player"==b&&a.o.dispatchEvent(e))}function iu(a,b,e,t){ne.call(this);var n=this;this.a=a,this.c=b,this.b=new en,this.L={video:a,player:b},this.F=e||function(){},this.M=t||function(e){return e},this.f=null,this.G=!1,this.o=!0,this.l=0,this.C=!1,this.A=!0,this.s=this.g=null,this.J=new kt((function(){ou(n)})),function(a){var b=cast.receiver.CastReceiverManager.getInstance();b.onSenderConnected=function(){return ru(a)},b.onSenderDisconnected=function(){return ru(a)},b.onSystemVolumeChanged=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&lu(a,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},a.g),lu(a,{type:"event",targetName:"video",event:{type:"volumechange"}},a.g)},a.s=b.getCastMessageBus("urn:x-cast:com.google.cast.media"),a.s.onMessage=function(e){return function(a,b){var e=xs(b.data);switch(e.type){case"PLAY":a.a.play(),du(a);break;case"PAUSE":a.a.pause(),du(a);break;case"SEEK":var t=e.currentTime,n=e.resumeState;null!=t&&(a.a.currentTime=Number(t)),n&&"PLAYBACK_START"==n?(a.a.play(),du(a)):n&&"PLAYBACK_PAUSE"==n&&(a.a.pause(),du(a));break;case"STOP":a.c.$d().then((function(){a.c&&du(a)}));break;case"GET_STATUS":uu(a,Number(e.requestId));break;case"VOLUME":n=e.volume,t=n.level,n=n.muted;var r=a.a.volume,g=a.a.muted;null!=t&&(a.a.volume=Number(t)),null!=n&&(a.a.muted=n),r==a.a.volume&&g==a.a.muted||du(a);break;case"LOAD":a.l=0,a.C=!1,a.A=!1,t=e.media,n=e.currentTime,r=a.M(t.contentId),g=e.autoplay||!0,a.F(t.customData),g&&(a.a.autoplay=!0),a.c.load(r,n).then((function(){a.c&&uu(a)})).catch((function(t){var n="LOAD_FAILED";7==t.category&&7e3==t.code&&(n="LOAD_CANCELLED"),lu(a,{requestId:Number(e.requestId),type:n},a.s)}));break;default:lu(a,{requestId:Number(e.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},a.s)}}(a,e)},a.g=b.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),a.g.onMessage=function(e){return function(a,b){var e=xs(b.data);switch(e.type){case"init":a.l=0,a.C=!1,a.A=!0,function(a,b,e){var t,n,r,g,o,c,l,d,f;B((function(u){switch(u.a){case 1:for(t in b.player)n=b.player[t],a.c[t](n);return a.F(e),r=a.a.autoplay,b.manifest?(a.a.autoplay=!1,k(u,5),I(u,a.c.load(b.manifest,b.startTime),7)):I(u,Promise.resolve(),3);case 7:N(u,3);break;case 5:return g=M(u),o=new X(Ko,{detail:g}),a.c.dispatchEvent(o),u.return();case 3:if(!a.c)return u.return();for(c in b.video)l=b.video[c],a.a[c]=l;for(d in b.playerAfterLoad)f=b.playerAfterLoad[d],a.c[d](f);a.a.autoplay=r,b.manifest&&(a.a.play(),du(a)),x(u)}}))}(a,e.initState,e.appData),ou(a);break;case"appData":a.F(e.appData);break;case"set":var t=e.targetName,n=e.property;if(e=e.value,"video"==t){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==n){r.setSystemVolumeLevel(e);break}if("muted"==n){r.setSystemVolumeMuted(e);break}}a.L[t][n]=e;break;case"call":(t=a.L[e.targetName])[e.methodName].apply(t,e.args);break;case"asyncCall":t=e.targetName,n=e.methodName,"player"==t&&"load"==n&&(a.l=0,a.C=!1);var g=e.id,o=b.senderId;r=a.L[t],e=r[n].apply(r,e.args),"player"==t&&"load"==n&&(e=e.then((function(){a.A=!0}))),e.then((function(){return cu(a,o,g,null)}),(function(e){return cu(a,o,g,e)}))}}(a,e)},b.start();for(var e=(b=q(ks)).next();!e.done;e=b.next())a.b.h(a.a,e.value,(function(e){return dl(a,"video",e)}));for(var t in os)a.b.h(a.c,os[t],(function(e){return dl(a,"player",e)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?a.c.Pd(3840,2160):a.c.Pd(1920,1080),a.b.h(a.a,"loadeddata",(function(){a.C=!0})),a.b.h(a.c,"loading",(function(){a.o=!1,au(a)})),a.b.h(a.a,"playing",(function(){a.o=!1,au(a)})),a.b.h(a.a,"pause",(function(){au(a)})),a.b.h(a.c,"unloading",(function(){a.o=!0,au(a)})),a.b.h(a.a,"ended",(function(){new kt((function(){a.a&&a.a.ended&&(a.o=!0,au(a))})).P(hu)}))}(this)}function ru(a){a.l=0,a.A=!0,a.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,au(a)}function au(a){var b;B((function(e){return 1==e.a?I(e,Promise.resolve(),2):a.c?(b=new X("caststatuschanged"),a.dispatchEvent(b),su(a)||du(a),void x(e)):e.return()}))}function dl(a,b,e){a.c&&(ou(a),lu(a,{type:"event",targetName:b,event:e},a.g))}function ou(a){a.J.P(fu);for(var b={video:{},player:{}},e=q(Cs),t=e.next();!t.done;t=e.next())t=t.value,b.video[t]=a.a[t];if(a.c.S())for(var n in Rs)0==a.l%Rs[n]&&(b.player[n]=a.c[n]());for(var r in _s)0==a.l%_s[r]&&(b.player[r]=a.c[r]());(e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(b.video.volume=e.level,b.video.muted=e.muted),a.C&&(a.l+=1),lu(a,{type:"update",update:b},a.g),su(a)}function su(a){return!(!a.A||!a.a.duration&&!a.c.S())&&(uu(a),a.A=!1,!0)}function uu(a,b){var e={contentId:a.c.xd(),streamType:a.c.S()?"LIVE":"BUFFERED",contentType:""};a.c.S()||(e.duration=a.a.duration),a.f&&(e.metadata=a.f),du(a,void 0===b?0:b,e)}function cu(a,b,e,t){a.c&&lu(a,{type:"asyncComplete",id:e,error:t},a.g,b)}function lu(a,b,e,t){a.G&&(a=Is(b),t?e.getCastChannel(t).send(a):e.broadcast(a))}function du(a,b,e){e=void 0===e?null:e;var t={mediaSessionId:0,playbackRate:a.a.playbackRate,playerState:a.o?pu:a.c.vc()?vu:a.a.paused?ol:mu,currentTime:a.a.currentTime,supportedMediaCommands:63,volume:{level:a.a.volume,muted:a.a.muted}};e&&(t.media=e),lu(a,{requestId:void 0===b?0:b,type:"MEDIA_STATUS",status:[t]},a.s)}e.__onGCastApiAvailable=function(a){if(a)for(var b=(a=q(Ws)).next();!b.done;b=a.next())b.value.init()},T(Ys,ne),(p=Ys.prototype).destroy=function(a){return a&&this.a.Lb(),this.b&&(this.b.release(),this.b=null),a=[],this.c&&(a.push(this.c.destroy()),this.c=null),this.a&&(a.push(this.a.destroy()),this.a=null),this.s=this.l=this.f=null,Promise.all(a)},p.rc=function(){return this.l},p.Ob=function(){return this.s},p.be=function(){return this.a.l&&qs},p.ea=function(){return this.a.ea()},p.Zc=function(){return this.a.Zc()},p.cast=function(){var b,a=this;return B((function(e){return 1==e.a?(b=Js(a),I(e,a.a.cast(b),2)):a.c?I(e,a.c.$d(),0):e.return()}))},p.Nd=function(a){this.a.Nd(a)},p.Pe=function(){!function(a){if(a.b){var b=a.J();chrome.cast.requestSession((function(e){return Bs(a,b,e)}),(function(e){return Fs(a,e)}))}}(this.a)},p.Lb=function(){this.a.Lb()},p.ge=function(a){var b=this;return B((function(e){if(1==e.a)return a==b.C?e.return():(b.C=a,b.a.Lb(),I(e,b.a.destroy(),2));b.a=null,b.a=new Us(a,(function(){return Qs(b)}),(function(){return Zs(b)}),(function(e,t){return nu(b,e,t)}),(function(){return eu(b)}),(function(){return Js(b)})),b.a.init(),x(e)}))},H("shaka.cast.CastProxy",Ys),Ys.prototype.changeReceiverId=Ys.prototype.ge,Ys.prototype.forceDisconnect=Ys.prototype.Lb,Ys.prototype.suggestDisconnect=Ys.prototype.Pe,Ys.prototype.setAppData=Ys.prototype.Nd,Ys.prototype.cast=Ys.prototype.cast,Ys.prototype.receiverName=Ys.prototype.Zc,Ys.prototype.isCasting=Ys.prototype.ea,Ys.prototype.canCast=Ys.prototype.be,Ys.prototype.getPlayer=Ys.prototype.Ob,Ys.prototype.getVideo=Ys.prototype.rc,Ys.prototype.destroy=Ys.prototype.destroy,T(iu,ne),(p=iu.prototype).isConnected=function(){return this.G},p.Kf=function(){return this.o},p.gg=function(a){this.f=a},p.bf=function(){this.f=null},p.hg=function(a){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.title=a},p.fg=function(a){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.images=[{url:a}]},p.eg=function(a){this.f||(this.f={}),this.f.artist=a,this.f.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var b,a=this;return B((function(e){if(1==e.a)return a.b&&(a.b.release(),a.b=null),b=[],a.c&&(b.push(a.c.destroy()),a.c=null),a.J&&(a.J.stop(),a.J=null),a.a=null,a.L=null,a.F=null,a.G=!1,a.o=!0,a.g=null,a.s=null,I(e,Promise.all(b),2);cast.receiver.CastReceiverManager.getInstance().stop(),x(e)}))},H("shaka.cast.CastReceiver",iu),iu.prototype.destroy=iu.prototype.destroy,iu.prototype.setContentArtist=iu.prototype.eg,iu.prototype.setContentImage=iu.prototype.fg,iu.prototype.setContentTitle=iu.prototype.hg,iu.prototype.clearContentMetadata=iu.prototype.bf,iu.prototype.setContentMetadata=iu.prototype.gg,iu.prototype.isIdle=iu.prototype.Kf,iu.prototype.isConnected=iu.prototype.isConnected;var fu=.5,hu=5,pu="IDLE",mu="PLAYING",vu="BUFFERING",ol="PAUSED";function gu(a){var b=this;this.a=[],this.b=[],this.data=[],(new Wn).box("moov",Yn).ba("pssh",(function(e){if(!(1<e.version)){var t=et(e.reader.W,-12,e.size);if(b.data.push(t),b.a.push(Tt(e.reader.xb(16))),0<e.version){t=e.reader.N();for(var n=(t=q(ae(t))).next();!n.done;n=t.next())n=Tt(e.reader.xb(16)),b.b.push(n)}}})).parse(a)}function yu(a,b){var e=bu(a,b);return 1!=e.length?null:e[0]}function ul(a,b,e){return 1!=(a=Eu(a,b,e)).length?null:a[0]}function bu(a,b){return Array.from(a.childNodes).filter((function(e){return e instanceof Element&&e.tagName==b}))}function Eu(a,b,e){return Array.from(a.childNodes).filter((function(t){return t instanceof Element&&t.localName==e&&t.namespaceURI==b}))}function Tu(a,b,e){return a.hasAttributeNS(b,e)?a.getAttributeNS(b,e):null}function Au(a){return Array.from(a.childNodes).every((function(b){return b.nodeType==Node.TEXT_NODE||b.nodeType==Node.CDATA_SECTION_NODE}))?a.textContent.trim():null}function wu(a,b,e,t){t=void 0===t?null:t;var n=null;return null!=(a=a.getAttribute(b))&&(n=e(a)),null==n?t:n}function Su(a){return a?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z"),a=Date.parse(a),isNaN(a)?null:Math.floor(a/1e3)):null}function Iu(a){return a&&(a=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a))?(a=31536e3*Number(a[1]||null)+2592e3*Number(a[2]||null)+86400*Number(a[3]||null)+3600*Number(a[4]||null)+60*Number(a[5]||null)+Number(a[6]||null),isFinite(a)?a:null):null}function xu(a){var b=/([0-9]+)-([0-9]+)/.exec(a);return b?(a=Number(b[1]),isFinite(a)?(b=Number(b[2]),isFinite(b)?{start:a,end:b}:null):null):null}function ku(a){return 0==(a=Number(a))%1?a:null}function Cu(a){return 0==(a=Number(a))%1&&0<a?a:null}function Nu(a){return 0==(a=Number(a))%1&&0<=a?a:null}function Mu(a){var b;return a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1])/Number(b[2]):Number(a),isNaN(a)?null:a}function _u(a,b){var e=new DOMParser,t=null,n=null;try{n=e.parseFromString(a,"text/xml")}catch(e){}return n&&n.documentElement.tagName==b&&(t=n.documentElement),t&&0<t.getElementsByTagName("parsererror").length?null:t}function Ru(a,b){try{return _u(ut(a),b)}catch(e){return null}}function Lu(a,b){var e=function(a){for(var b=[],e=(a=q(a)).next();!e.done;e=a.next())(e=Pu(e.value))&&b.push(e);return b}(a),t=null,n=[],r=[],g=new Set(e.map((function(e){return e.keyId})));if(g.delete(null),1<g.size)throw new it(2,4,4010);if(b||(r=e.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.He||(t=e.init||t,!1)}))).length&&(0==(n=function(a,b){for(var e=[],t=q(b),n=t.next();!n.done;n=t.next()){n=n.value;var r=Du.get(n.He);if(r){var g;if(g=ul(n.node,"urn:microsoft:playready","pro")){g=bt(g.textContent);var o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),c=g.length,l=o.length+16+c,d=new Uint8Array(l),f=tt(d),h=0;f.setUint32(h,l),h+=4,f.setUint32(h,1886614376),h+=4,f.setUint32(h,0),h+=4,d.set(o,h),h+=o.length,f.setUint32(h,c),h+=4,d.set(g,h),g=[{initData:d,initDataType:"cenc",keyId:n.keyId}]}else g=null;g=_e(r,n.init||a||g),(r=Ou.get(r))&&(g.licenseServerUri=r(n)),e.push(g)}}return e}(t,r)).length&&(n=[_e("",t)])),e.length&&(b||!r.length))for(n=[],r=(e=q(Du.values())).next();!r.done;r=e.next())"org.w3.clearkey"!=(r=r.value)&&n.push(_e(r,t));if(g=Array.from(g)[0]||null)for(r=(e=q(n)).next();!r.done;r=e.next())for(var o=(r=q(r.value.initData)).next();!o.done;o=r.next())o.value.keyId=g;return{je:g,Qg:t,drmInfos:n,oe:!0}}function Pu(a){var b=a.getAttribute("schemeIdUri"),e=Tu(a,"urn:mpeg:cenc:2013","default_KID"),t=Eu(a,"urn:mpeg:cenc:2013","pssh").map(Au);if(!b)return null;if(b=b.toLowerCase(),e&&(e=e.replace(/-/g,"").toLowerCase()).includes(" "))throw new it(2,4,4009);var n=[];try{n=t.map((function(e){return{initDataType:"cenc",initData:bt(e),keyId:null}}))}catch(e){throw new it(2,4,4007)}return{node:a,He:b,keyId:e,init:0<n.length?n:null}}var Du=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),Ou=(new Map).set("com.widevine.alpha",(function(a){return(a=ul(a.node,"urn:microsoft","laurl"))&&a.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(a){return(a=ul(a.node,"urn:microsoft:playready","pro"))&&(a=function(a){var b=0,e=tt(a),t=e.getUint32(b,!0);if(t!=a.byteLength)return[];e:{for(a=b+4+2,b=[];a<e.byteLength-1;){t=e.getUint16(a,!0),a+=2;var n=e.getUint16(a,!0);if(a+=2,0!=(1&n)||n+a>e.byteLength){e=[];break e}var r=et(e,a,n);b.push({type:t,value:r}),a+=n}e=b}return e}(a=bt(a.textContent)).filter((function(b){return 1===b.type}))[0])&&(a=_u(a=ct(a.value,!0),"WRMHEADER"))?function(a){for(var b=(a=q(a.getElementsByTagName("DATA"))).next();!b.done;b=a.next())for(var e=(b=q(b.value.childNodes)).next();!e.done;e=b.next())if((e=e.value)instanceof Element&&"LA_URL"==e.tagName)return e.textContent;return""}(a):""}));function Uu(a,b,t,n,r){var o={RepresentationID:b,Number:t,Bandwidth:n,Time:r};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(g,t,n,r){if("$$"==g)return"$";var c=o[t];if(null==c)return g;switch("RepresentationID"==t&&n&&(n=void 0),"Time"==t&&(c=Math.round(c)),r){case void 0:case"d":case"i":case"u":g=c.toString();break;case"o":g=c.toString(8);break;case"x":g=c.toString(16);break;case"X":g=c.toString(16).toUpperCase();break;default:g=c.toString()}return n=e.parseInt(n,10)||1,Array(Math.max(0,n-g.length)+1).join("0")+g}))}function Bu(a,b){var e=Fu(a,b,"timescale"),t=1;e&&(t=Cu(e)||1),(e=Cu((e=Fu(a,b,"duration"))||""))&&(e/=t);var n=Fu(a,b,"startNumber"),r=Number(Fu(a,b,"presentationTimeOffset"))||0,g=Nu(n||"");null!=n&&null!=g||(g=1);var o=ju(a,b,"SegmentTimeline");if(n=null,o){n=t;var c=a.U.duration||1/0,l=bu(o,"S");o=[];for(var d=-r,f=(l=q(oe(l))).next();!f.done;f=l.next()){var h=(f=f.value).item,u=f.next,m=wu(h,"t",Nu);f=wu(h,"d",Nu);var v=wu(h,"r",ku);if(null!=m&&(m-=r),!f)break;if(h=null!=m?m:d,0>(m=v||0))if(u){if(null==(u=wu(u,"t",Nu)))break;if(h>=u)break;m=Math.ceil((u-h)/f)-1}else{if(1/0==c)break;if(h/n>=c)break;m=Math.ceil((c*n-h)/f)-1}for(0<o.length&&h!=d&&(o[o.length-1].end=h/n),m=(u=q(ae(m+1))).next();!m.done;m=u.next())d=h+f,o.push({start:h/n,end:d/n,og:h}),h=d}n=o}return{timescale:t,oa:e,Zb:g,Za:r/t||0,ae:r,timeline:n}}function Fu(a,b,e){return[b(a.K),b(a.ra),b(a.Ba)].filter(Ce).map((function(t){return t.getAttribute(e)})).reduce((function(e,t){return e||t}))}function ju(a,b,e){return[b(a.K),b(a.ra),b(a.Ba)].filter(Ce).map((function(t){return yu(t,e)})).reduce((function(e,t){return e||t}))}function Gu(a,b,e,t,n,r){if(r=void 0===r?0:r,Tu(a,"http://www.w3.org/1999/xlink","href")){var g=function(a,b,e,t,n,r){for(var g=Tu(a,"http://www.w3.org/1999/xlink","href"),o=Tu(a,"http://www.w3.org/1999/xlink","actuate")||"onRequest",c=q(Array.from(a.attributes)),l=c.next();!l.done;l=c.next())"http://www.w3.org/1999/xlink"==(l=l.value).namespaceURI&&a.removeAttributeNS(l.namespaceURI,l.localName);if(5<=r)return _t(new it(2,4,4028));if("onLoad"!=o)return _t(new it(2,4,4027));var d=Me([t],[g]);return n.request(0,qt(d,b)).aa((function(t){if(!(t=Ru(t.data,a.tagName)))return _t(new it(2,4,4001,g));for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);for(;t.childNodes.length;){var o=t.childNodes[0];t.removeChild(o),a.appendChild(o)}for(o=(t=q(Array.from(t.attributes))).next();!o.done;o=t.next())a.setAttributeNode(o.value.cloneNode(!1));return Gu(a,b,e,d[0],n,r+1)}))}(a,b,e,t,n,r);return e&&(g=g.aa(void 0,(function(){return Gu(a,b,e,t,n,r)}))),g}g=[];for(var o=q(Array.from(a.childNodes)),c=o.next();!c.done;c=o.next())(c=c.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Tu(c,"http://www.w3.org/1999/xlink","href")?a.removeChild(c):"SegmentTimeline"!=c.tagName&&g.push(Gu(c,b,e,t,n,r)));return Dt(g).aa((function(){return a}))}function Ku(a,b,e,t,n,r,g){var o,c=(new Wn).ba("sidx",(function(c){o=function(a,b,e,t,n,r,g){var o=[];g.reader.skip(4);var c=g.reader.N();if(0==c)throw new it(2,3,3005);if(0==g.version)var l=g.reader.N(),d=g.reader.N();else l=g.reader.Yb(),d=g.reader.Yb();g.reader.skip(2);var f=g.reader.yc();for(a=a+g.size+d,f=q(ae(f)),d=f.next();!d.done;d=f.next()){var h=g.reader.N();d=(2147483648&h)>>>31,h&=2147483647;var u=g.reader.N();if(g.reader.skip(4),1==d)throw new it(2,3,3006);o.push(new Rr(l/c+e,(l+u)/c+e,(function(){return r}),a,a+h-1,b,e,t,n)),l+=u,a+=h}return g.parser.stop(),o}(b,t,n,r,g,e,c)}));if(a&&c.parse(a),o)return o;throw new it(2,3,3004)}function zu(a){this.b=tt(a),this.a=new Hn(this.b,0)}function Vu(a){var b=Hu(a);if(7<b.length)throw new it(2,3,3002);for(var e=0,t=(b=q(b)).next();!t.done;t=b.next())e=256*e+t.value;b=Hu(a);e:{for(var n=(t=q(qu)).next();!n.done;n=t.next())if(Je(b,new Uint8Array(n.value))){t=!0;break e}t=!1}if(t)b=a.b.byteLength-a.a.H;else{if(8==b.length&&224&b[1])throw new it(2,3,3001);t=0;for(var r=(n=q(oe(b))).next();!r.done;r=n.next()){var g=(r=r.value).item;t=0==r.na?g&(1<<8-b.length)-1:256*t+g}b=t}return b=a.a.H+b<=a.b.byteLength?b:a.b.byteLength-a.a.H,t=tt(a.b,a.a.H,b),a.a.skip(b),new Xu(e,t)}function Hu(a){var b=a.a.H,e=a.a.Ha();if(0==e)throw new it(2,3,3002);return e=8-Math.floor(Math.log2(e)),a.a.skip(e-1),et(a.b,b,e)}zu.prototype.Na=function(){return this.a.Na()};var qu=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Xu(a,b){this.id=a,this.a=b}function Wu(a){if(8<a.a.byteLength)throw new it(2,3,3002);if(8==a.a.byteLength&&224&a.a.getUint8(0))throw new it(2,3,3001);for(var b=0,e=q(ae(a.a.byteLength)),t=e.next();!t.done;t=e.next())b=256*b+(t=a.a.getUint8(t.value));return b}function Yu(a){var b=new zu(a.a);if(179!=(a=Vu(b)).id)throw new it(2,3,3013);if(a=Wu(a),183!=(b=Vu(b)).id)throw new it(2,3,3012);b=new zu(b.a);for(var e=0;b.Na();){var t=Vu(b);if(241==t.id){e=Wu(t);break}}return{pg:a,Xf:e}}function $u(a,b){var e=ju(a,b,"Initialization");if(!e)return null;var t=a.K.Fa,n=e.getAttribute("sourceURL");n&&(t=Me(a.K.Fa,[n])),n=0;var r=null;return(e=wu(e,"range",xu))&&(n=e.start,r=e.end),new _r((function(){return t}),n,r)}function Ju(a,b){var e=Number(Fu(a,Zu,"presentationTimeOffset"))||0,t=Fu(a,Zu,"timescale"),n=1;t&&(n=Cu(t)||1);var r=e/n||0,g=$u(a,Zu);!function(a,b){if(tc(a,b),!ec(a))throw new it(2,4,4002)}(a,g);var o=Ut(a);return{Mb:function(){var e=ju(o,Zu,"RepresentationIndex"),t=o.K.Fa;return e&&(e=e.getAttribute("sourceURL"))&&(t=Me(o.K.Fa,[e])),e=ec(o),Qu(o,b,g,t,e.start,e.end,r)}}}function Qu(a,b,e,t,n,r,g){var o,c,l,d,f,h,u,m,v,y,E,T,A,w,S;return B((function(x){var k;if(1==x.a)return o=a.presentationTimeline,c=!a.mb||!a.U.we,l=a.U.start,d=a.U.duration,f=a.K.mimeType.split("/")[1],u=null,m=[(h=b)(t,n,r),"webm"==f?h(e.c(),e.b,e.a):null],h=null,I(x,Promise.all(m),2);if(v=x.b,y=v[0],E=v[1]||null,null,A=l-g,w=l,S=d?l+d:1/0,"mp4"==f)var C=Ku(y,n,t,e,A,w,S);else{if(440786851!=Vu(C=new zu(E)).id)throw new it(2,3,3008);var N=Vu(C);if(408125543!=N.id)throw new it(2,3,3009);for(C=N.a.byteOffset,N=new zu(N.a),k=null;N.Na();){var M=Vu(N);if(357149030==M.id){k=M;break}}if(!k)throw new it(2,3,3010);for(k=new zu(k.a),M=1e6,N=null;k.Na();){var _=Vu(k);if(2807729==_.id)M=Wu(_);else if(17545==_.id)if(4==_.a.byteLength)N=_.a.getFloat32(0);else{if(8!=_.a.byteLength)throw new it(2,3,3003);N=_.a.getFloat64(0)}}if(null==N)throw new it(2,3,3011);if(N=(k={kg:k=M/1e9,duration:N*k}).kg,k=k.duration,475249515!=(M=Vu(new zu(y))).id)throw new it(2,3,3007);C=function(a,b,e,t,n,r,g,o,c){function l(){return n}var d=[];a=new zu(a.a);for(var f=null,h=null;a.Na();){var u=Vu(a);if(187==u.id){var m=Yu(u);m&&(u=e*m.pg,m=b+m.Xf,null!=f&&d.push(new Rr(f+g,u+g,l,h,m-1,r,g,o,c)),f=u,h=m)}}return null!=f&&d.push(new Rr(f+g,t+g,l,h,null,r,g,o,c)),d}(M,C,N,k,t,e,A,w,S)}return T=C,o.Vb(T),u=new Zr(T),c&&u.fb(w,S),x.return(u)}))}function Zu(a){return a.zc}function ec(a){var b=ju(a,Zu,"RepresentationIndex");return a=xu((a=Fu(a,Zu,"indexRange"))||""),b&&(a=wu(b,"range",xu,a)),a}function tc(a,b){var e=a.K.mimeType.split("/")[1];if("text"!=a.K.contentType&&"mp4"!=e&&"webm"!=e)throw new it(2,4,4006);if("webm"==e&&!b)throw new it(2,4,4005)}function nc(a,b){var e=$u(a,ic),t=function(a){var b=function(a){return[a.K.hb,a.ra.hb,a.Ba.hb].filter(Ce).map((function(b){return bu(b,"SegmentURL")})).reduce((function(b,e){return 0<b.length?b:e})).map((function(b){return b.getAttribute("indexRange")&&!a.se&&(a.se=!0),{Pf:b.getAttribute("media"),start:(b=wu(b,"mediaRange",xu,{start:0,end:null})).start,end:b.end}}))}(a),e=(a=Bu(a,ic)).Zb;0==e&&(e=1);var t=0;return a.oa?t=a.oa*(e-1):a.timeline&&0<a.timeline.length&&(t=a.timeline[0].start),{oa:a.oa,startTime:t,Zb:e,Za:a.Za,timeline:a.timeline,Sb:b}}(a);if(!t.oa&&!t.timeline&&1<t.Sb.length)throw new it(2,4,4002);if(!t.oa&&!a.U.duration&&!t.timeline&&1==t.Sb.length)throw new it(2,4,4002);if(t.timeline&&0==t.timeline.length)throw new it(2,4,4002);var n=null,r=null;return a.Ba.id&&a.K.id&&(r=a.Ba.id+","+a.K.id,n=b[r]),e=function(a,b,e,t,n){var r=t.Sb.length;t.timeline&&t.timeline.length!=t.Sb.length&&(r=Math.min(t.timeline.length,t.Sb.length));for(var g=a-t.Za,o=b?a+b:1/0,c=[],l=t.startTime,d={},f=(r=q(ae(r))).next();!f.done;d={nd:d.nd},f=r.next()){f=f.value;var h=t.Sb[f];d.nd=Me(e,[h.Pf]);var u;u=null!=t.oa?l+t.oa:t.timeline?t.timeline[f].end:l+b,c.push(new Rr(a+l,a+u,function(e){return function(){return e.nd}}(d),h.start,h.end,n,g,a,o)),l=u}return c}(a.U.start,a.U.duration,a.K.Fa,t,e),n?(n.Tb(e),n.ob(a.presentationTimeline.qb())):(a.presentationTimeline.Vb(e),n=new Zr(e),r&&a.mb&&(b[r]=n)),a.mb&&a.U.we||n.fb(a.U.start,a.U.duration?a.U.start+a.U.duration:1/0),{Mb:function(){return Promise.resolve(n)}}}function ic(a){return a.hb}function rc(a,b,e,t,n){var r=function(a){var b=Fu(a,ac,"initialization");if(!b)return null;var e=a.K.id,t=a.bandwidth||null,n=a.K.Fa;return new _r((function(){var r=Uu(b,e,null,t,null);return Me(n,[r])}),0,null)}(a),g=function(a){var b=Bu(a,ac),e=Fu(a,ac,"media");return a=Fu(a,ac,"index"),{oa:b.oa,timescale:b.timescale,Zb:b.Zb,Za:b.Za,ae:b.ae,timeline:b.timeline,Dd:e,uc:a}}(a);!function(a){var b=a.uc?1:0;if(b+=a.timeline?1:0,0==(b+=a.oa?1:0))throw new it(2,4,4002);if(1!=b&&(a.uc&&(a.timeline=null),a.oa=null),!a.uc&&!a.Dd)throw new it(2,4,4002)}(g);var o=Ut(a);if(g.uc)return tc(a,r),{Mb:function(){var u=Uu(g.uc,o.K.id,null,o.bandwidth||null,null);return u=Me(o.K.Fa,[u]),Qu(o,b,r,u,0,null,g.Za)}};if(g.oa)return t||(a.presentationTimeline.Ed(g.oa),a.presentationTimeline.Fd(a.U.start)),{Mb:function(){return function(a,b,e,t){function n(e){var n=(e-f)*d,r=n+b.Za;return new Rr(n+=o,Math.min(n+d,l),(function(){var t=Uu(u,v,e,m,r*h);return Me(y,[t])}),0,null,t,E,o,l)}function r(){var e=[Math.max(g.qb(),o),Math.min(g.Xa(),l)].map((function(e){return e-o}));return[Math.ceil(e[0]/d),Math.ceil(e[1]/d)-1].map((function(e){return e+f}))}var g=a.presentationTimeline,o=a.U.start,c=a.U.duration,l=c?o+c:1/0,d=b.oa,f=b.Zb,h=b.timescale,u=b.Dd,m=a.bandwidth||null,v=a.K.id,y=a.K.Fa,E=o-b.Za;c=r(),a=a.mb?Math.max(c[0],c[1]-e+1):c[0],e=c[1],c=[];for(var T=a;T<=e;++T){var A=n(T);c.push(A)}var w=new Zr(c);if(g.Xa()<l){var S=Math.max(a,e+1);w.dd(d,(function(){w.ob(g.qb());var e=q(r());e.next(),e=e.next().value;for(var t=[];S<=e;){var o=n(S);t.push(o),S++}return g.Xa()>=l&&!t.length?null:t}))}return Promise.resolve(w)}(o,g,n,r)}};var c=null;t=null,a.Ba.id&&a.K.id&&(t=a.Ba.id+","+a.K.id,c=e[t]);var l=function(a,b,e){var t=a.U.start,n=a.U.duration,r=t-b.Za;n=n?t+n:1/0;for(var g=[],o={},c=q(oe(b.timeline)),l=c.next();!l.done;o={md:o.md,od:o.od,rd:o.rd,jd:o.jd,sd:o.sd,kd:o.kd},l=c.next()){var d=(l=l.value).item,f=d.start,h=d.og;d=d.end,o.rd=l.na+b.Zb,o.sd=h+b.ae,o.od=a.K.id,o.jd=a.bandwidth||null,o.md=b.Dd,o.kd=a.K.Fa,g.push(new Rr(t+f,t+d,function(u){return function(){var e=Uu(u.md,u.od,u.rd,u.jd||null,u.sd);return Me(u.kd,[e]).map((function(e){return e.toString()}))}}(o),0,null,e,r,t,n))}return g}(o,g,r),d=a.U.start,f=a.U.duration?a.U.start+a.U.duration:1/0,h=1/0!=f;return c?(h&&new Zr(l).fb(d,f),c.Tb(l),c.ob(a.presentationTimeline.qb())):(a.presentationTimeline.Vb(l),c=new Zr(l),t&&a.mb&&(e[t]=c)),h&&c.fb(d,f),{Mb:function(){return Promise.resolve(c)}}}function ac(a){return a.Ac}function oc(){this.f=[],this.a=[],this.b=[],this.c=[],this.g=new Set}function sc(a,b,e){var t,n,r,g,o,c,l,d,f,u,h,m,v,y,E,T,A,w,S,k,C,N,M,_,R,L,P,D;return B((function(O){switch(O.a){case 1:if(t=Re,function(a){for(var b=(a=q(a)).next();!b.done;b=a.next()){b=b.value;for(var e=[],t=q(b.Lc),n=t.next();!n.done;n=t.next()){n=n.value;for(var r=!1,g=q(e),o=g.next();!o.done;o=g.next())o=o.value,n.id!=o.id&&n.channelsCount==o.channelsCount&&n.language==o.language&&n.bandwidth==o.bandwidth&&n.label==o.label&&n.codecs==o.codecs&&n.mimeType==o.mimeType&&jt(n.roles,o.roles)&&n.audioSamplingRate==o.audioSamplingRate&&n.primary==o.primary&&(r=!0);r||e.push(n)}b.Lc=e}}(b),function(a){for(var b=(a=q(a)).next();!b.done;b=a.next()){b=b.value;for(var e=[],t=q(b.fd),n=t.next();!n.done;n=t.next()){n=n.value;for(var r=!1,g=q(e),o=g.next();!o.done;o=g.next())o=o.value,n.id!=o.id&&n.width==o.width&&n.frameRate==o.frameRate&&n.codecs==o.codecs&&n.mimeType==o.mimeType&&n.label==o.label&&jt(n.roles,o.roles)&&td(n.closedCaptions,o.closedCaptions)&&n.bandwidth==o.bandwidth&&(r=!0);r||e.push(n)}b.fd=e}}(b),function(a){for(var b=(a=q(a)).next();!b.done;b=a.next()){b=b.value;for(var e=[],t=q(b.textStreams),n=t.next();!n.done;n=t.next()){n=n.value;for(var r=!1,g=q(e),o=g.next();!o.done;o=g.next())o=o.value,n.id!=o.id&&n.language==o.language&&n.label==o.label&&n.codecs==o.codecs&&n.mimeType==o.mimeType&&jt(n.roles,o.roles)&&(r=!0);r||e.push(n)}b.textStreams=e}}(b),!e&&1==b.length){n=b[0],a.a=n.Lc,a.b=n.fd,a.c=n.textStreams,O.u(2);break}for(r=-1,g=q(oe(b)),o=g.next();!o.done;o=g.next())c=o.value,l=c.na,d=c.item,a.g.has(d.id)||(a.g.add(d.id),-1==r&&(r=l));if(-1==r)return O.return();for(f=b.map((function(e){return e.Lc})),u=b.map((function(e){return e.fd})),h=b.map((function(e){return e.textStreams})),m=q(h),v=m.next();!v.done;v=m.next())v.value.push({id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Zr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return I(O,cc(a.a,f,r,dc,hc),3);case 3:return I(O,cc(a.b,u,r,dc,hc),4);case 4:return I(O,cc(a.c,h,r,dc,hc),2);case 2:if(y=0,E=[],a.b.length&&a.a.length)for(C=q(a.a),N=C.next();!N.done;N=C.next())for(M=N.value,_=q(a.b),R=_.next();!R.done;R=_.next())L=R.value,P=Bn(M.drmInfos,L.drmInfos),M.drmInfos.length&&L.drmInfos.length&&!P.length||(D=y++,E.push({id:D,language:M.language,primary:M.primary,audio:M,video:L,bandwidth:(M.bandwidth||0)+(L.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0}));else for(T=a.b.concat(a.a),A=q(T),w=A.next();!w.done;w=A.next())S=w.value,k=y++,E.push({id:k,language:S.language,primary:S.primary,audio:S.type==t.Ib?S:null,video:S.type==t.Ua?S:null,bandwidth:S.bandwidth||0,drmInfos:S.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0});a.f=E,x(O)}}))}function uc(a){var b,e,t,n,r,g,o,c,l,d,f,u,h,m,v,y,E,T,A,w;return B((function(S){switch(S.a){case 1:if(b=Re,1==a.length)return S.return(a[0]);for(e=a.map((function(e){return e.filter((function(e){return e.type==b.Ib}))})),t=a.map((function(e){return e.filter((function(e){return e.type==b.Ua}))})),n=a.map((function(e){return e.filter((function(e){return e.type==b.qa}))})),r=q(n),g=r.next();!g.done;g=r.next())g.value.push({id:0,originalId:"",primary:!1,type:"text",mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return I(S,cc([],e,0,fc,pc),2);case 2:return o=S.b,I(S,cc([],t,0,fc,pc),3);case 3:return c=S.b,I(S,cc([],n,0,fc,pc),4);case 4:if(l=S.b,d=0,c.length&&o.length)for(m=q(o),v=m.next();!v.done;v=m.next())for(y=v.value,E=q(c),T=E.next();!T.done;T=E.next())A=T.value,w=d++,A.variantIds.push(w),y.variantIds.push(w);else for(f=c.concat(o),u=q(f),h=u.next();!h.done;h=u.next())h.value.variantIds=[d++];return S.return(c.concat(o,l))}}))}function cc(a,b,e,t,n){var r,g,o,c,l,d,f,u,h,m,v,y,E,T,A,w,S,x,k;return B((function(C){switch(C.a){case 1:for(r=Re,g=[],o=q(oe(b)),c=o.next();!c.done;c=o.next())l=c.value,d=l.na,f=l.item,d>=e?g.push(new Set(f)):g.push(new Set);u=q(a),h=u.next();case 2:if(h.done){C.u(4);break}return I(C,function(a,b,e,t,n){var r;return B((function(g){return 1==g.a?(r=mc(b,a))?I(g,Promise.all(r.map((function(e){return e.createSegmentIndex()}))),2):g.return(!1):(lc(a,r,e,t,n),g.return(!0))}))}(h.value,b,e,n,g),5);case 5:if(!C.b)throw new it(2,4,4037);h=u.next(),C.u(2);break;case 4:m=q(g),v=m.next();case 6:if(v.done){C.u(8);break}y=v.value,E=q(y),T=E.next();case 9:if(T.done){v=m.next(),C.u(6);break}return I(C,function(a,b,e,t,n){var r,g;return B((function(o){return 1==o.a?(r=e(a),(g=mc(b,r))?r.createSegmentIndex?I(o,Promise.all(g.map((function(e){return e.createSegmentIndex()}))),2):o.u(2):o.return(null)):(lc(r,g,0,t,n),o.return(r))}))}(T.value,b,t,n,g),12);case 12:(A=C.b)&&a.push(A),T=E.next(),C.u(9);break;case 8:for(w=q(g),v=w.next();!v.done;v=w.next())for(S=v.value,x={},k=q(S),T=k.next();!T.done;x={Gb:x.Gb},T=k.next())if(x.Gb=T.value,(x.Gb.type!=r.qa||x.Gb.language)&&a.some(function(e){return function(t){return t.mimeType==e.Gb.mimeType&&ln(t.codecs)==ln(e.Gb.codecs)}}(x)))throw new it(2,4,4037);return C.return(a)}}))}function lc(a,b,e,t,n){for(var r=(b=q(oe(b))).next();!r.done;r=b.next()){var g=r.value;if(r=g.na,g=g.item,r>=e){t(a,g);var o=!0;"audio"==a.type&&0==Ue(a.language,g.language)&&(o=!1),o&&n[r].delete(g)}}}function dc(a){return(a=Object.assign({},a)).originalId=null,a.createSegmentIndex=function(){return Promise.resolve()},a.segmentIndex=new na,a.emsgSchemeIdUris=[],a.keyIds=new Set,a.closedCaptions=null,a.trickModeVideo=null,a}function fc(a){return(a=Object.assign({},a)).keyIds=new Set,a.segments=[],a.variantIds=[],a.closedCaptions=null,a}function hc(a,b){a.roles=Array.from(new Set(a.roles.concat(b.roles))),b.emsgSchemeIdUris&&(a.emsgSchemeIdUris=Array.from(new Set(a.emsgSchemeIdUris.concat(b.emsgSchemeIdUris))));var e=b.keyIds;if(e=new Set(f(a.keyIds).concat(f(e))),a.keyIds=e,null==a.originalId?a.originalId=b.originalId:a.originalId+=","+(b.originalId||""),e=Bn(a.drmInfos,b.drmInfos),b.drmInfos.length&&a.drmInfos.length&&!e.length)throw new it(2,4,4038);if(a.drmInfos=e,a.encrypted=a.encrypted||b.encrypted,b.closedCaptions){a.closedCaptions||(a.closedCaptions=new Map);for(var t=(e=q(b.closedCaptions)).next();!t.done;t=e.next()){var n=q(t.value);t=n.next().value,n=n.next().value,a.closedCaptions.set(t,n)}}a.segmentIndex.g.push(b.segmentIndex),b.trickModeVideo?(a.trickModeVideo||(a.trickModeVideo=dc(b.trickModeVideo),a.trickModeVideo.segmentIndex=a.segmentIndex.clone()),hc(a.trickModeVideo,b.trickModeVideo)):a.trickModeVideo&&hc(a.trickModeVideo,b)}function pc(a,b){a.roles=Array.from(new Set(a.roles.concat(b.roles)));var e=b.keyIds;if(e=new Set(f(a.keyIds).concat(f(e))),a.keyIds=e,a.encrypted=a.encrypted&&b.encrypted,a.segments.push.apply(a.segments,f(b.segments)),b.closedCaptions){a.closedCaptions||(a.closedCaptions=new Map);for(var t=(e=q(b.closedCaptions)).next();!t.done;t=e.next()){var n=q(t.value);t=n.next().value,n=n.next().value,a.closedCaptions.set(t,n)}}}function mc(a,b){for(var e=[],t=q(a),n=t.next();!n.done;n=t.next()){for(var r=b,g={audio:vc,video:vc,text:gc}[r.type],o={audio:yc,video:bc,text:Ec}[r.type],c=null,l=(n=q(n.value)).next();!l.done;l=n.next())!g(r,l=l.value)||c&&!o(r,c,l)||(c=l);if(!(r=c))return null;e.push(r)}return e}function vc(a,b){var e;if(!(e=b.mimeType!=a.mimeType||ln(b.codecs)!=ln(a.codecs))&&(e=a.drmInfos)){e=a.drmInfos;var t=b.drmInfos;e=!(!e.length||!t.length||0<Bn(e,t).length)}return!e}function gc(a,b){return!!a.language&&(!b.language||0!=Ue(a.language,b.language)&&b.kind==a.kind)}function yc(a,b,e){if(a.id==e.id)return!0;var t=Ue(a.language,b.language),n=Ue(a.language,e.language);return n>t||!(n<t)&&(!(b.primary||!e.primary)||!(b.primary&&!e.primary)&&(a.roles.length?(t=b.roles.filter((function(e){return a.roles.includes(e)})),(n=e.roles.filter((function(e){return a.roles.includes(e)}))).length>t.length||!(n.length<t.length)&&e.roles.length<b.roles.length):!(e.roles.length||!b.roles.length)||!(e.roles.length&&!b.roles.length)&&((t=Tc(a.channelsCount,b.channelsCount,e.channelsCount))==wc||t!=Ic&&((t=Tc(a.audioSamplingRate,b.audioSamplingRate,e.audioSamplingRate))==wc||t!=Ic&&!(!a.bandwidth||Ac(a.bandwidth,b.bandwidth,e.bandwidth)!=wc)))))}function bc(a,b,e){if(a.id==e.id)return!0;var t=Tc(a.width*a.height,b.width*b.height,e.width*e.height);if(t==wc)return!0;if(t==Ic)return!1;if(a.frameRate){if((t=Tc(a.frameRate,b.frameRate,e.frameRate))==wc)return!0;if(t==Ic)return!1}return!(!a.bandwidth||Ac(a.bandwidth,b.bandwidth,e.bandwidth)!=wc)}function Ec(a,b,e){if(a.id==e.id)return!0;var t=Ue(a.language,b.language),n=Ue(a.language,e.language);if(n>t)return!0;if(n<t)return!1;if(!b.primary&&e.primary)return!0;if(b.primary&&!e.primary)return!1;if(a.roles.length){if(t=b.roles.filter((function(e){return a.roles.includes(e)})),(n=e.roles.filter((function(e){return a.roles.includes(e)}))).length>t.length)return!0;if(n.length<t.length)return!1}else{if(!e.roles.length&&b.roles.length)return!0;if(e.roles.length&&!b.roles.length)return!1}return e.mimeType==a.mimeType&&e.codecs==a.codecs&&(b.mimeType!=a.mimeType||b.codecs!=a.codecs)}function Tc(a,b,e){if(b==a&&a!=e)return Ic;if(e==a&&a!=b)return wc;if(b>a){if(e<=a||e-a<b-a)return wc;if(e-a>b-a)return Ic}else{if(e>a)return Ic;if(a-e<a-b)return wc;if(a-e>a-b)return Ic}return Sc}function Ac(a,b,e){return b=Math.abs(a-b),(a=Math.abs(a-e))<b?wc:b<a?Ic:Sc}oc.prototype.release=function(){for(var a=q(this.a.concat(this.b,this.c)),b=a.next();!b.done;b=a.next())(b=b.value).segmentIndex&&b.segmentIndex.release();this.a=[],this.b=[],this.c=[],this.f=[]};var wc=1,Sc=0,Ic=-1;function xc(){var a=this;this.B=this.m=null,this.b=[],this.v=null,this.s=1,this.f={},this.a=new oc,this.l=0,this.o=new qe(5),this.g=new kt((function(){a.wc()})),this.c=new Kt}function kc(a){var b,e,t,n,r,g,o;return B((function(c){return 1==c.a?(b=qt(a.b,a.m.retryParameters),e=a.B.networkingEngine,t=Date.now(),n=e.request(0,b),zt(a.c,n),I(c,n.promise,2)):3!=c.a?(r=c.b,a.B?(r.uri&&!a.b.includes(r.uri)&&a.b.unshift(r.uri),I(c,function(a,b,e){var t,n,r,g;return B((function(o){if(1==o.a){if(!(t=Ru(b,"MPD")))throw new it(2,4,4001,e);return n=a.m.dash.xlinkFailGracefully,r=Gu(t,a.m.retryParameters,n,e,a.B.networkingEngine),zt(a.c,r),I(o,r.promise,2)}return g=o.b,o.return(function(a,b,e){var t,n,r,g,o,c,l,d,f,h,u,m,v,y,E,T,A,w,S,x,C;return B((function(_){switch(_.a){case 1:t=[e],0<(n=bu(b,"Location").map(Au).filter(Ce)).length&&(r=Me(t,n),t=a.b=r),g=bu(b,"BaseURL").map(Au),o=Me(t,g),c=a.m.dash.ignoreMinBufferTime,l=0,c||(l=wu(b,"minBufferTime",Iu)||0),a.l=wu(b,"minimumUpdatePeriod",Iu,-1),d=wu(b,"availabilityStartTime",Su),f=wu(b,"timeShiftBufferDepth",Iu),h=a.m.dash.ignoreSuggestedPresentationDelay,u=null,h||(u=wu(b,"suggestedPresentationDelay",Iu)),m=wu(b,"maxSegmentDuration",Iu),v=b.getAttribute("type")||"static",a.v?y=a.v.presentationTimeline:(E=a.m.defaultPresentationDelay||1.5*l,y=new Lr(d,null!=u?u:E,a.m.dash.autoCorrectDrift)),T={mb:"static"!=v,presentationTimeline:y,Ba:null,U:null,ra:null,K:null,bandwidth:0,se:!1};for(var R=wu(b,"mediaPresentationDuration",Iu),L=[],P=0,D=bu(b,"Period"),O=(D=q(oe(D))).next();!O.done;O=D.next()){var U=O.value;O=U.item,U=U.next,P=wu(O,"start",Iu,P);var F=wu(O,"duration",Iu),j=null;if(U){var G=wu(U,"start",Iu);null!=G&&(j=G-P)}else null!=R&&(j=R-P);if(null==j&&(j=F),O=Cc(a,T,o,{start:P,duration:j,node:O,we:null==j||!U}),L.push(O),null==j){P=null;break}P+=j}return w=(A=null!=R?{periods:L,duration:R,ke:!1}:{periods:L,duration:P,ke:!0}).duration,S=A.periods,y.Bc("static"==v),"static"!=v&&A.ke||y.Qa(w||1/0),y.S()&&!isNaN(a.m.availabilityWindowOverride)&&(f=a.m.availabilityWindowOverride),null==f&&(f=1/0),y.Sd(f),y.Ed(m||1),I(_,sc(a.a,S,T.mb),2);case 2:if(a.v){a.v.variants=a.a.f,a.v.textStreams=a.a.c,_.u(3);break}if(a.v={presentationTimeline:y,variants:a.a.f,textStreams:a.a.c,offlineSessionIds:[],minBufferTime:l||0},!y.Re()){_.u(3);break}return x=bu(b,"UTCTiming"),I(_,function(a,b,e){var t,n,r,g,o,c,l,d;return B((function(f){switch(f.a){case 1:t=e.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),n=a.m.dash.clockSyncUri,!t.length&&n&&t.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:n}),r=q(t),g=r.next();case 2:if(g.done){f.u(4);break}switch(o=g.value,k(f,5),c=o.scheme,l=o.value,c){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(l),f.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":$("NTP UTCTiming scheme is not supported");break;default:$("Unrecognized scheme in UTCTiming element",c)}f.u(9);break;case 7:return I(f,Rc(a,b,l,"HEAD"),10);case 10:return f.return(f.b);case 8:return I(f,Rc(a,b,l,"GET"),11);case 11:return f.return(f.b);case 9:N(f,3);break;case 5:M(f);case 3:g=r.next(),f.u(2);break;case 4:return $("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}}))}(a,o,x),5);case 5:if(C=_.b,!a.B)return _.return();y.Ke(C);case 3:return a.B.makeTextStreamsForClosedCaptions(a.v),I(_,a.B.filter(a.v),0)}}))}(a,g,e))}))}(a,r.data,r.uri),3)):c.return(0)):(g=Date.now(),o=(g-t)/1e3,Xe(a.o,1,o),c.return(o))}))}function Cc(a,b,e,t){b.Ba=_c(t.node,null,e),b.U=t,b.Ba.id||(b.Ba.id="__shaka_period_"+t.start);for(var n=(e=q(e=bu(t.node,"EventStream"))).next();!n.done;n=e.next())Lc(a,t.start,t.duration,n.value);if(e=bu(t.node,"AdaptationSet").map((function(e){return function(a,b,e){if(b.ra=_c(e,b.Ba,null),"image"==b.ra.contentType)return null;var t=!1,n=bu(e,"Role"),r=n.map((function(e){return e.getAttribute("value")})).filter(Ce),g=void 0,o="text"==b.ra.contentType;o&&(g="subtitle");for(var c=(n=q(n)).next();!c.done;c=n.next()){var l=(c=c.value).getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(c=c.getAttribute("value"),c){case"main":t=!0;break;case"caption":case"subtitle":g=c}}l=bu(e,"EssentialProperty"),n=null,c=!1;for(var d=(l=q(l)).next();!d.done;d=l.next())"http://dashif.org/guidelines/trickmode"==(d=d.value).getAttribute("schemeIdUri")?n=d.getAttribute("value"):c=!0;l=bu(e,"Accessibility");var h=new Map;for(l=q(l),d=l.next();!d.done;d=l.next()){var m=d.value;if(d=m.getAttribute("schemeIdUri"),m=m.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==d||"urn:scte:dash:cc:cea-708:2015"==d)if(d=1,null!=m)for(var u=(m=q(m.split(";"))).next();!u.done;u=m.next()){var v=u.value,y=u=void 0;v.includes("=")?(v=v.split("="),u=v[0].startsWith("CC")?v[0]:"CC"+v[0],y=v[1].split(",")[0].split(":").pop()):(u="CC"+d,d+=2,y=v),h.set(u,Oe(y))}else h.set("CC1","und");else"urn:mpeg:dash:role:2011"==d&&null!=m&&(r.push(m),"captions"==m&&(g="caption"))}if(c)return null;var E=Lu(c=bu(e,"ContentProtection"),a.m.dash.ignoreDrmInfo),T=Oe(e.getAttribute("lang")||"und"),A=e.getAttribute("label");if((c=bu(e,"Label"))&&c.length&&((c=c[0]).textContent&&(A=c.textContent)),c=bu(e,"Representation"),0==(e=c.map((function(e){return function(a,b,e,t,n,r,g,o,c,l){if(b.K=_c(l,b.ra,null),!function(a){var b=a.zc?1:0;return b+=a.hb?1:0,0==(b+=a.Ac?1:0)?"text"==a.contentType||"application"==a.contentType:(1!=b&&(a.zc&&(a.hb=null),a.Ac=null),!0)}(b.K))return null;var d=b.U.start;b.bandwidth=wu(l,"bandwidth",Cu)||0;var f=b.K.contentType;f="text"==f||"application"==f;try{var h=function(e,t,n){return function(a,b,e,t){var n,r,g,o,c;return B((function(l){return 1==l.a?(n=Yt,r=fa(b,e,t,a.m.retryParameters),g=a.B.networkingEngine,o=g.request(n,r),zt(a.c,o),I(l,o.promise,2)):(c=l.b,l.return(c.data))}))}(a,e,t,n)};if(b.K.zc)var u=Ju(b,h);else if(b.K.hb)u=nc(b,a.f);else if(b.K.Ac)u=rc(b,h,a.f,!!a.v,a.m.dash.initialSegmentLimit);else{var m=b.K.Fa,v=b.U.duration||0;u={Mb:function(){return Promise.resolve(ea(d,v,m))}}}}catch(e){if(f&&4002==e.code)return null;throw e}f=function(a,b,e){var t=Lu(a,e);if(b.oe)a=1==b.drmInfos.length&&!b.drmInfos[0].keySystem,e=0==t.drmInfos.length,(0==b.drmInfos.length||a&&!e)&&(b.drmInfos=t.drmInfos),b.oe=!1;else if(0<t.drmInfos.length&&(b.drmInfos=b.drmInfos.filter((function(e){return t.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==b.drmInfos.length))throw new it(2,4,4008);return t.je||b.je}(f=bu(l,"ContentProtection"),e,a.m.dash.ignoreDrmInfo),f=new Set(f?[f]:[]),bu(l,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(b.K.mimeType="audio/eac3-joc");var y={id:a.s++,originalId:b.K.id,createSegmentIndex:function(){var e;return B((function(t){if(1==t.a)return y.segmentIndex?t.u(0):(e=y,I(t,u.Mb(),3));e.segmentIndex=t.b,x(t)}))},segmentIndex:null,mimeType:b.K.mimeType,codecs:b.K.codecs,frameRate:b.K.frameRate,pixelAspectRatio:b.K.pixelAspectRatio,bandwidth:b.bandwidth,width:b.K.width,height:b.K.height,kind:t,encrypted:0<e.drmInfos.length,drmInfos:e.drmInfos,keyIds:f,language:n,label:r,type:b.ra.contentType,primary:g,trickModeVideo:null,emsgSchemeIdUris:b.K.emsgSchemeIdUris,roles:o,channelsCount:b.K.Gd,audioSamplingRate:b.K.audioSamplingRate,closedCaptions:c};return y}(a,b,E,g,T,A,t,r,h,e)})).filter((function(e){return!!e}))).length){if(a.m.dash.ignoreEmptyAdaptationSet||o)return null;throw new it(2,4,4003)}if(!b.ra.contentType||"application"==b.ra.contentType)for(b.ra.contentType=Pc(e[0].mimeType,e[0].codecs),o=q(e),l=o.next();!l.done;l=o.next())l.value.type=b.ra.contentType;for(o=q(e),l=o.next();!l.done;l=o.next())for(l=l.value,d=q(E.drmInfos),m=d.next();!m.done;m=d.next())(m=m.value).keyIds=m.keyIds&&l.keyIds?new Set(f(m.keyIds).concat(f(l.keyIds))):m.keyIds||l.keyIds;return o=c.map((function(e){return e.getAttribute("id")})).filter(Ce),{id:b.ra.id||"__fake__"+a.s++,contentType:b.ra.contentType,language:T,Rg:t,streams:e,drmInfos:E.drmInfos,Yd:n,$f:o}}(a,b,e)})).filter(Ce),b.mb){t=[];for(var r=(n=q(e)).next();!r.done;r=n.next())for(var g=(r=q(r.value.$f)).next();!g.done;g=r.next())t.push(g.value);if(t.length!=new Set(t).size)throw new it(2,4,4018)}for(t=e.filter((function(e){return!e.Yd})),n=(e=q(e=e.filter((function(e){return e.Yd})))).next();!n.done;n=e.next()){r=(n=n.value).Yd.split(" ");for(var o=(g=q(t)).next();!o.done;o=g.next()){var c=o.value;if(r.includes(c.id)){o={};for(var l=(c=q(c.streams)).next();!l.done;o={Ic:o.Ic},l=c.next())o.Ic=l.value,o.Ic.trickModeVideo=n.streams.find(function(e){return function(t){return ln(e.Ic.codecs)==ln(t.codecs)}}(o))}}}if(n=a.m.disableAudio?[]:Nc(t,"audio"),r=a.m.disableVideo?[]:Nc(t,"video"),e=a.m.disableText?[]:Nc(t,"text"),!r.length&&!n.length)throw new it(2,4,4004);for(t=[],g=(n=q(n)).next();!g.done;g=n.next())t.push.apply(t,f(g.value.streams));for(n=[],g=(r=q(r)).next();!g.done;g=r.next())n.push.apply(n,f(g.value.streams));for(r=[],g=(e=q(e)).next();!g.done;g=e.next())r.push.apply(r,f(g.value.streams));return{id:b.Ba.id,Lc:t,fd:n,textStreams:r}}function Nc(a,b){return a.filter((function(e){return e.contentType==b}))}function Mc(a,b){0>a.l||a.g.P(Math.max(3,a.l-b,We(a.o)))}function _c(a,b,e){b=b||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Gd:null,audioSamplingRate:null},e=e||b.Fa;for(var t=bu(a,"BaseURL").map(Au),n=a.getAttribute("contentType")||b.contentType,r=a.getAttribute("mimeType")||b.mimeType,g=a.getAttribute("codecs")||b.codecs,o=wu(a,"frameRate",Mu)||b.frameRate,c=a.getAttribute("sar")||b.pixelAspectRatio,l=bu(a,"InbandEventStream"),d=b.emsgSchemeIdUris.slice(),f=(l=q(l)).next();!f.done;f=l.next())f=f.value.getAttribute("schemeIdUri"),d.includes(f)||d.push(f);return l=function(a){for(var b=(a=q(a)).next();!b.done;b=a.next()){var e=b.value;if((b=e.getAttribute("schemeIdUri"))&&(e=e.getAttribute("value")))switch(b){case"urn:mpeg:dash:outputChannelPositionList:2012":return e.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(b=parseInt(e,10)))continue;return b;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(b=parseInt(e,16)){for(a=0;b;)1&b&&++a,b>>=1;return a}}}return null}(l=bu(a,"AudioChannelConfiguration"))||b.Gd,f=wu(a,"audioSamplingRate",Nu)||b.audioSamplingRate,n||(n=Pc(r,g)),{Fa:Me(e,t),zc:yu(a,"SegmentBase")||b.zc,hb:yu(a,"SegmentList")||b.hb,Ac:yu(a,"SegmentTemplate")||b.Ac,width:wu(a,"width",Nu)||b.width,height:wu(a,"height",Nu)||b.height,contentType:n,mimeType:r,codecs:g,frameRate:o,pixelAspectRatio:c,emsgSchemeIdUris:d,id:a.getAttribute("id"),Gd:l,audioSamplingRate:f}}function Rc(a,b,e,t){var n,r,g,o,c,l;return B((function(d){if(1==d.a)return n=Me(b,[e]),(r=qt(n,a.m.retryParameters)).method=t,g=a.B.networkingEngine.request(4,r),zt(a.c,g),I(d,g.promise,2);if(o=d.b,"HEAD"==t){if(!o.headers||!o.headers.date)return d.return(0);c=o.headers.date}else c=ut(o.data);return l=Date.parse(c),isNaN(l)?d.return(0):d.return(l-Date.now())}))}function Lc(a,b,e,t){for(var n=t.getAttribute("schemeIdUri")||"",r=t.getAttribute("value")||"",g=wu(t,"timescale",Nu)||1,o=(t=q(bu(t,"Event"))).next();!o.done;o=t.next()){var c=wu(o=o.value,"presentationTime",Nu)||0,l=wu(o,"duration",Nu)||0;l=(c=c/g+b)+l/g,null!=e&&(c=Math.min(c,b+e),l=Math.min(l,b+e)),o={schemeIdUri:n,value:r,startTime:c,endTime:l,id:o.getAttribute("id")||"",eventElement:o},a.B.onTimelineRegionAdded(o)}}function Pc(a,b){return Ri(cn(a,b))?"text":a.split("/")[0]}function Dc(a,b,e,t){this.a=a,this.type=b,this.ha=e,this.segments=t||null}function Oc(a,b,e,t){this.id=a,this.name=b,this.a=e,this.value=void 0===t?null:t}function Uc(a,b,e){return(a=a.getAttribute(b))?a.value:e||null}function Bc(a,b){var e=a.getAttribute(b);if(!e)throw new it(2,4,4023,b);return e.value}function Fc(a,b){this.ha=b,this.a=a}function jc(a,b){this.name=a,this.value=b}function Gc(a,b){return a.filter((function(e){return e.name==b}))}function Kc(a,b){return a.filter((function(e){return Bc(e,"TYPE")==b}))}function zc(a,b){var e=Gc(a,b);return e.length?e[0]:null}function Vc(a,b,e){return e=void 0===e?0:e,(a=zc(a,b))?Number(a.value):e}function Hc(a){this.b=a,this.a=0}function qc(a){Xc(a,/[ \t]+/gm)}function Xc(a,b){b.lastIndex=a.a;var e=b.exec(a.b);return e=null==e?null:{position:e.index,length:e[0].length,results:e},a.a==a.b.length||null==e||e.position!=a.a?null:(a.a+=e.length,e.results)}function Wc(a){return a.a==a.b.length?null:(a=Xc(a,/[^ \t\n]*/gm))?a[0]:null}function Yc(){this.a=0}function $c(a,b,e){var t=(b=(b=ut(b)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(t[0]))throw new it(2,4,4015);b=0;for(var n=!0,r=q(t),g=r.next();!g.done;g=r.next())if(g=g.value,/^#(?!EXT)/m.test(g)||n)n=!1;else{if(g=Jc(a.a++,g),--a.a,Qc.includes(g.name)){b=1;break}"EXT-X-STREAM-INF"==g.name&&(n=!0)}r=[],n=!0;for(var o=(g=q(oe(t))).next();!o.done;o=g.next()){var c=o.value;o=c.na;var l=c.item;if(c=c.next,/^#(?!EXT)/m.test(l)||n)n=!1;else{if(l=Jc(a.a++,l),Zc.includes(l.name)){if(1!=b)throw new it(2,4,4017);for(l=t.splice(o,t.length-o),t=e,n=[],g=[],o=null,c=(l=q(l)).next();!c.done;c=l.next())c=c.value,/^(#EXT)/.test(c)?(c=Jc(a.a++,c),Qc.includes(c.name)?r.push(c):"EXT-X-MAP"==c.name?o=c:g.push(c)):/^#(?!EXT)/m.test(c)||(c=Me([t],[c.trim()])[0],o&&g.push(o),n.push(new Fc(c,g)),g=[]);return new Dc(e,b,r,n)}r.push(l),"EXT-X-STREAM-INF"==l.name&&(l.a.push(new jc("URI",c)),n=!0)}}return new Dc(e,b,r)}function Jc(a,b){var e=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!e)throw new it(2,4,4016,b);var t,n=e[1],r=e[2];if(e=[],r){var g;(g=Xc(r=new Hc(r),/^([^,=]+)(?:,|$)/g))&&(t=g[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;g=Xc(r,o);)e.push(new jc(g[1],g[2]||g[3]))}return new Oc(a,n,e,t)}(p=xc.prototype).configure=function(a){this.m=a},p.start=function(a,b){var e,t=this;return B((function(n){if(1==n.a)return t.b=[a],t.B=b,I(n,kc(t),2);if(e=n.b,t.B&&Mc(t,e),!t.B)throw new it(2,7,7001);return n.return(t.v)}))},p.stop=function(){for(var a=q(Object.values(this.f)),b=a.next();!b.done;b=a.next())b.value.release();return this.a&&this.a.release(),this.m=this.B=null,this.b=[],this.v=null,this.f={},this.a=null,null!=this.g&&(this.g.stop(),this.g=null),this.c.destroy()},p.update=function(){var b,a=this;return B((function(e){return 1==e.a?(k(e,2),I(e,kc(a),4)):2!=e.a?N(e,0):(b=M(e),a.B&&b?(a.B.onError(b),void x(e)):e.return())}))},p.onExpirationUpdated=function(){},p.wc=function(){var b,e,a=this;return B((function(t){switch(t.a){case 1:return b=0,k(t,2),I(t,kc(a),4);case 4:b=t.b,N(t,3);break;case 2:e=M(t),a.B&&(e.severity=1,a.B.onError(e));case 3:if(!a.B)return t.return();Mc(a,b),x(t)}}))},H("shaka.dash.DashParser",xc),Mr.mpd=function(){return new xc},Nr["application/dash+xml"]=function(){return new xc},Nr["video/vnd.mpeg.dash.mpd"]=function(){return new xc},Oc.prototype.toString=function(){var b="#"+this.name,e=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&e.unshift(this.value),0<e.length&&(b+=":"+e.join(",")),b},Oc.prototype.getAttribute=function(a){var b=this.a.filter((function(e){return e.name==a}));return b.length?b[0]:null};var Qc="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Zc="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function el(){}function tl(a){try{var b=nl(a);return Lt({uri:a,De:a,data:b.data,headers:{"content-type":b.contentType}})}catch(e){return _t(e)}}function nl(a){var b=a.split(":");if(2>b.length||"data"!=b[0])throw new it(2,1,1004,a);if(2>(b=b.slice(1).join(":").split(",")).length)throw new it(2,1,1004,a);var t=b[0];a=e.decodeURIComponent(b.slice(1).join(",")),b=t.split(";"),t=b[0];var n=!1;return 1<b.length&&"base64"==b[b.length-1]&&(n=!0,b.pop()),{data:n?bt(a):ft(a),contentType:t}}function il(){var a=this;this.m=this.B=null,this.ka=1,this.o=new Map,this.g=new Map,this.$=new Set,this.a=new Map,this.b=null,this.L="",this.G=new Yc,this.X=0,this.l=new kt((function(){a.wc()})),this.c=Nl,this.v=null,this.M=0,this.R=1/0,this.s=new Kt,this.V=[],this.C=new Map,this.ia=!1,this.f=new Map,this.F=null,this.J=new Map,this.A=new Map}function rl(a,b){var e,t,n,r,g,o,c,l,d;return B((function(f){if(1==f.a)return e=Rl,t=b.We,I(f,Sl(a,qt([t],a.m.retryParameters),0),2);if(3!=f.a){if(n=f.b,1!=(r=$c(a.G,n.data,n.uri)).type)throw new it(2,4,4017);return g=Gc(r.ha,"EXT-X-DEFINE"),o=al(a,g),c=b.stream,I(f,vl(a,b.ed,r,c.mimeType,b.xe,o),3)}l=f.b,c.segmentIndex.Tb(l),l.length&&c.segmentIndex.ob(l[0].startTime),d=l[l.length-1],zc(r.ha,"EXT-X-ENDLIST")&&(wl(a,e.Ue),a.b.Qa(d.endTime)),x(f)}))}function al(a,b){for(var e=new Map,t=q(b),n=t.next();!n.done;n=t.next()){var r=n.value;n=Uc(r,"NAME");var g=Uc(r,"VALUE");r=Uc(r,"IMPORT"),n&&g&&e.set(n,g),r&&(n=a.o.get(r))&&e.set(r,n)}return e}function sl(a,b){var e=[];a.m.disableVideo||e.push("avc1.42E01E"),a.m.disableAudio||e.push("mp4a.40.2");var t=Uc(b,"CODECS",e.join(",")).split(/\s*,\s*/);e=new Set;for(var n=[],r=(t=q(t)).next();!r.done;r=t.next()){var g=ln(r=r.value);e.has(g)||(n.push(r),e.add(g))}return n}function cl(a){return Oe(a=Uc(a,"LANGUAGE")||"und")}function ll(a,b){var e,t,n,r,g,o,c,l,d,f,h;return B((function(u){if(1==u.a){e=Bc(b,"GROUP-ID"),t="";var m=Bc(b,"TYPE").toLowerCase();return"subtitles"==m&&(m="text"),"text"!=(n=m)&&e&&a.f.has(e)&&(t=a.f.get(e)),r=Tl(Bc(b,"URI"),a.o),a.a.has(r)?u.return(a.a.get(r)):(g=cl(b),o=Uc(b,"NAME"),c=b.getAttribute("DEFAULT"),l="YES"==c,m="audio"==n&&(m=Uc(b,"CHANNELS"))?parseInt(m.split("/")[0],10):null,d=m,f=Uc(b,"CHARACTERISTICS"),I(u,fl(a,r,t,n,g,l,o,d,null,f),2))}return h=u.b,a.g.has(e)?a.g.get(e).push(h):a.g.set(e,[h]),null==h?u.return(null):a.a.has(r)?u.return(a.a.get(r)):(a.a.set(r,h),u.return(h))}))}function fl(a,b,e,t,n,r,g,o,c,l){var d,h,m,u,v,y,E,T,A,w,S,x,C,_,R,L,P,D,O,U,F,j,G,K,z,V,H,X,W,Y,J,Q,Z,ee,te,ne;return B((function(ie){switch(ie.a){case 1:return d=Me([a.L],[b])[0],I(ie,Sl(a,qt([d],a.m.retryParameters),0),2);case 2:if(h=ie.b,d=h.uri,1!=(m=$c(a.G,h.data,d)).type)throw new it(2,4,4017);if(u=[],m.segments)for(v=q(m.segments),y=v.next();!y.done;y=v.next())E=y.value,T=Gc(E.ha,"EXT-X-KEY"),u.push.apply(u,f(T));for(A=!1,w=[],S=new Set,x=q(u),C=x.next();!C.done;C=x.next())if(_=C.value,"NONE"!=(R=Bc(_,"METHOD"))){if(A=!0,"AES-128"==R)return a.ia=!0,ie.return(null);if(L=Bc(_,"KEYFORMAT"),D=(P=Cl[L])?P(_):null){if(D.keyIds)for(O=q(D.keyIds),U=O.next();!U.done;U=O.next())F=U.value,S.add(F);w.push(D)}}if(A&&!w.length)throw new it(2,4,4026);return j=Gc(m.ha,"EXT-X-DEFINE"),G=al(a,j),function(a,b){var e=zc(b.ha,"EXT-X-PLAYLIST-TYPE"),t=zc(b.ha,"EXT-X-ENDLIST");t=e&&"VOD"==e.value||t,e=e&&"EVENT"==e.value&&!t,e=!t&&!e,t?wl(a,Nl):(wl(a,e?_l:Ml),t=Al(b.ha,"EXT-X-TARGETDURATION"),t=Number(t.value),a.M=Math.max(t,a.M),a.R=Math.min(t,a.R))}(a,m),I(ie,function(a,b,e,t,n){var r,g,o,c,l,d,f,h,u,m;return B((function(v){if(1==v.a)return r=Re,g=Yt,o=Tl(t.segments[0].a,n),c=new ue(o),l=c.Aa.split(".").pop(),d=kl[b],(f=d[l])?v.return(f):b==r.qa?e&&"vtt"!=e&&"wvtt"!=e?v.return("application/mp4"):v.return("text/vtt"):((h=qt([o],a.m.retryParameters)).method="HEAD",I(v,Sl(a,h,g),2));if(u=v.b,!(m=u.headers["content-type"]))throw new it(2,4,4021,l);return v.return(m.split(";")[0])}))}(a,t,e,m,G),3);case 3:return K=ie.b,xl.includes(K)&&(e=""),z=new Map,k(ie,4),I(ie,vl(a,b,m,K,z,G),6);case 6:V=ie.b,N(ie,5);break;case 4:if(4035==(H=M(ie)).code)return $("Skipping unsupported HLS stream",K,b),ie.return(null);throw H;case 5:if(X=V[0].startTime,W=V[V.length-1].endTime,Y=new Zr(V),J="text"==t?"subtitle":void 0,Q=[],l)for(Z=q(l.split(",")),ee=Z.next();!ee.done;ee=Z.next())te=ee.value,Q.push(te);return ne={id:a.ka++,originalId:g,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Y,mimeType:K,codecs:e,kind:J,encrypted:A,drmInfos:w,keyIds:S,language:n,label:g,type:t,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Q,channelsCount:o,audioSamplingRate:null,closedCaptions:c},ie.return({stream:ne,ed:b,We:d,ye:X,Of:W,xe:z})}}))}function hl(a,b,e,t){return(e=zc(e,"EXT-X-MAP"))?(b=[t=Tl(Me([b],[Bc(e,"URI")])[0],t),Uc(e,"BYTERANGE","")].join("-"),a.J.has(b)||(e=function(a,b){var e=0,t=null,n=Uc(b,"BYTERANGE");return n&&(e=n.split("@"),t=Number(e[0]),e=Number(e[1]),t=e+t-1),new _r((function(){return[a]}),e,t)}(t,e),a.J.set(b,e)),a.J.get(b)):null}function pl(a,b,e,t,n,r){var g=e.ha,o=Tl(e.a,r);e=Al(g,"EXTINF").value.split(","),e=t+Number(e[0]),r=0;var c=null;return(g=zc(g,"EXT-X-BYTERANGE"))&&(r=g.value.split("@"),g=Number(r[0]),c=(r=r[1]?Number(r[1]):b.a+1)+g-1),new Rr(t,e,(function(){return[o]}),r,c,a,n,0,1/0)}function ml(a){if(a.b){for(var b=q(a.V),e=b.next();!e.done;e=b.next())a.b.Vb(e.value);a.V=[]}}function vl(a,b,e,t,n,r){var g,o,c,l,d,f,u,h,m,v,y,E,T,A,w,S,x;return B((function(k){switch(k.a){case 1:if(g=e.segments,c=Vc(e.ha,"EXT-X-MEDIA-SEQUENCE",0),a.c!=Nl&&n.has(c)){l=n.get(c),k.u(2);break}if(null!=a.F){k.u(3);break}return o=hl(a,e.a,g[0].ha,r),d=a,I(k,yl(a,b,o,t,c,!1,g[0],r),4);case 4:d.F=k.b;case 3:l=a.F;case 2:g[0].a.split("/").pop(),f=Vc(e.ha,"EXT-X-DISCONTINUITY-SEQUENCE"),u=a.A.get(f)||0,h=[],m=q(function(e){return oe(e)}(g)),v=m.next();case 5:if(v.done){k.u(7);break}if(y=v.value,E=y.na,T=y.item,A=h[h.length-1],w=0==E?l:A.endTime,S=c+E,n.set(S,w),o=hl(a,e.a,T.ha,r),!zc(T.ha,"EXT-X-DISCONTINUITY")){k.u(8);break}return f++,I(k,function(a,b,e,t,n,r,g,o,c){var l,d;return B((function(f){return 1==f.a?(l=0,a.A.has(b)?(l=a.A.get(b),f.u(2)):I(f,yl(a,e,t,n,r,!0,g,o),3)):(2!=f.a&&(d=f.b,l=c-d,a.A.set(b,l)),f.return(l))}))}(a,f,b,o,t,S,T,r,w),9);case 9:u=k.b;case 8:x=pl(o,A,T,w,u,r),h.push(x),v=m.next(),k.u(5);break;case 7:return a.V.push(h),ml(a),k.return(h)}}))}function gl(a,b){var e,t,n,r,g,o;return B((function(c){switch(c.a){case 1:return e=Yt,t=fa(b.c(),b.b,b.a,a.m.retryParameters),a.m.hls.useFullSegmentsForStartTime?c.return(Sl(a,t,e)):(n=fa(b.c(),b.b,b.b+2048-1,a.m.retryParameters),k(c,2),I(c,Sl(a,n,e),4));case 4:return r=c.b,c.return(r);case 2:if(7001==(g=M(c)).code)throw g;return $("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",n.uris[0]),I(c,Sl(a,t,e),5);case 5:return o=c.b,c.return(o)}}))}function yl(a,b,e,t,n,r,g,o){var c,l,d,f,h,u,m,v;return B((function(y){switch(y.a){case 1:if(c=pl(e,null,g,0,0,o),a.v&&!r&&(l=a.a.get(b),null!=(d=l.xe.get(n))))return y.return(d);if(t=t.toLowerCase(),xl.includes(t))throw $("Raw formats are not yet supported.  Skipping "+t),new it(1,4,4035);if("video/webm"==t)throw $("WebM in HLS is not yet supported.  Skipping."),new it(1,4,4035);if("video/mp4"!=t&&"audio/mp4"!=t){y.u(2);break}return f=[gl(a,c)],e&&f.push(gl(a,e)),I(y,Promise.all(f),3);case 3:return h=y.b,u=h[0],m=h[1]||h[0],y.return(function(a,b,e,t){var n=0;if((new Wn).box("moov",Yn).box("trak",Yn).box("mdia",Yn).ba("mdhd",(function(e){e.reader.skip(0==e.version?8:16),n=e.reader.N(),e.parser.stop()})).parse(t,!0),!n)throw new it(2,4,4030,a,b);var r=0,g=!1;if((new Wn).box("moof",Yn).box("traf",Yn).ba("tfdt",(function(e){r=(0==e.version?e.reader.N():e.reader.Yb())/n,g=!0,e.parser.stop()})).parse(e,!0),!g)throw new it(2,4,4030,a,b);return r}(b,u.uri,u.data,m.data));case 2:if("video/mp2t"!=t){y.u(4);break}return I(y,gl(a,c),5);case 5:return v=y.b,y.return(function(a,b,e){function t(){r.seek(g+188),71!=(o=r.Ha())&&(r.seek(g+192),o=r.Ha()),71!=o&&(r.seek(g+204),o=r.Ha()),71!=o&&n(),r.Ge(1)}function n(){throw new it(2,4,4030,a,b)}for(var r=new Hn(e,0),g=0,o=0;;)if(g=r.H,71!=(o=r.Ha())&&n(),8191==(8191&(e=r.yc())))t();else if(16384&e){if(0!=(e=(48&r.Ha())>>4)&&2!=e||n(),3==e&&(e=r.Ha(),r.skip(e)),1==r.N()>>8){r.skip(3),0!=(e=r.Ha()>>6)&&1!=e||n(),0==r.Ha()&&n(),e=r.Ha();var c=r.yc(),l=r.yc();return(1073741824*((14&e)>>1)+((65534&c)<<14|(65534&l)>>1))/9e4}t()}else t()}(b,v.uri,v.data));case 4:throw new it(2,4,4030,b)}}))}function bl(a,b){if(1==b.length)return b[0];var e=El(a,b);if(null!=e)return e;throw new it(2,4,4025,b)}function El(a,b){for(var e=q(Il[a]),t=e.next();!t.done;t=e.next()){t=t.value;for(var n=q(b),r=n.next();!r.done;r=n.next())if(r=r.value,t.test(r.trim()))return r.trim()}return"text"==a?"":null}function Tl(a,b){var e=String(a).replace(/%7B/g,"{").replace(/%7D/g,"}"),t=e.match(/{\$\w*}/g);if(t)for(var n=(t=q(t)).next();!n.done;n=t.next()){var r=(n=n.value).slice(2,n.length-1),g=b.get(r);if(!g)throw new it(2,4,4039,r);e=e.replace(n,g)}return e}function Al(a,b){var e=zc(a,b);if(!e)throw new it(2,4,4024,b);return e}function wl(a,b){a.c=b,a.b&&a.b.Bc(a.c==Nl),a.c!=Nl||a.l.stop()}function Sl(a,b,e){if(!a.s)throw new it(2,7,7001);return b=a.B.networkingEngine.request(e,b),zt(a.s,b),b.promise}H("shaka.net.DataUriPlugin",el),el.parse=tl,Ht("data",tl),(p=il.prototype).configure=function(a){this.m=a},p.start=function(a,b){var e,t,n=this;return B((function(r){return 1==r.a?(n.B=b,I(r,Sl(n,qt([a],n.m.retryParameters),0),2)):3!=r.a?(e=r.b,n.L=e.uri,I(r,function(a,b){var e,t,n,g,r,o,c,l,d,f,u,h,m,v;return B((function(y){switch(y.a){case 1:if(0!=(e=$c(a.G,b,a.L)).type)throw new it(2,4,4022);for(var E=q(Gc(e.ha,"EXT-X-DEFINE")),T=E.next();!T.done;T=E.next()){var A=T.value;T=Uc(A,"NAME"),A=Uc(A,"VALUE"),T&&A&&(a.o.has(T)||a.o.set(T,A))}for(t=Gc(e.ha,"EXT-X-MEDIA"),T=(E=q(n=Gc(e.ha,"EXT-X-STREAM-INF"))).next();!T.done;T=E.next()){var w=T.value;A=Uc(w,"AUDIO"),T=Uc(w,"VIDEO");var S=Uc(w,"SUBTITLES");if(w=sl(a,w),S){var x=El("text",w);a.f.set(S,x),Ft(w,x)}A&&(S=bl("audio",w),a.f.set(A,S)),T&&(A=bl("video",w),a.f.set(T,A))}return I(y,function(a,b){var e;return B((function(t){return 1==t.a?(b=b.filter((function(e){var t=Uc(e,"URI")||"";return"SUBTITLES"!=Uc(e,"TYPE")&&""!=t}))).length?I(t,ll(a,b[0]),2):t.u(2):(e=b.slice(1).map((function(e){return ll(a,e)})),I(t,Promise.all(e),0))}))}(a,t),2);case 2:for(T=(E=q(E=Kc(t,"CLOSED-CAPTIONS"))).next();!T.done;T=E.next())T=cl(S=T.value),A=Bc(S,"GROUP-ID"),S=Bc(S,"INSTREAM-ID"),a.C.get(A)||a.C.set(A,new Map),a.C.get(A).set(S,T);return I(y,function(a,b){var e,t,n;return B((function(r){return 1==r.a?(e=b.map((function(g){var e,t,n,r,o,c,u;return B((function(l){return 1==l.a?(e=Uc(g,"FRAME-RATE"),t=Number(Bc(g,"BANDWIDTH")),n=Uc(g,"RESOLUTION"),r=q(n?n.split("x"):[null,null]),o=r.next().value,c=r.next().value,I(l,function(a,b,e,t){var n,r,g,o,c,l,d,f,h,u,m,v,y,E;return B((function(T){if(1==T.a)return n=Re,r=sl(a,b),g=Uc(b,"AUDIO"),o=Uc(b,"VIDEO"),l=(c=g||o)&&a.g.has(c)?a.g.get(c):[],d={audio:g?l:[],video:o?l:[]},h=!1,u=Bc(b,"URI"),m=d.audio.find((function(e){return e&&e.ed==u})),v=El(n.Ua,r),y=e||t||v,1!=r.length||y?!l.length&&1<r.length?(f=n.Ua,r=[r.join(",")]):d.audio.length&&m?(f=n.Ib,h=!0):f=d.video.length?n.Ib:n.Ua:f=n.Ib,h?T.u(2):I(T,function(a,b,e,t){var n,r,g,o;return B((function(c){if(1==c.a){if(n=Tl(Bc(b,"URI"),a.o),a.a.has(n))return c.return(a.a.get(n));var l=Uc(b,"CLOSED-CAPTIONS");return r="video"==t&&l&&"NONE"!=l?a.C.get(l):null,g=bl(t,e),I(c,fl(a,n,g,t,"und",!1,null,null,r,null),2)}return null==(o=c.b)?c.return(null):a.a.has(n)?c.return(a.a.get(n)):(a.a.set(n,o),c.return(o))}))}(a,b,r,f),3);if(2!=T.a&&(E=T.b),E)d[E.stream.type]=[E];else if(null===E)return T.return(null);return function(a){for(var b=(a=q(a.audio.concat(a.video))).next();!b.done;b=a.next())if(b=b.value){var e=b.stream.codecs.split(",");e=e.filter((function(e){return"mp4a.40.34"!=e})),b.stream.codecs=e.join(",")}}(d),T.return(d)}))}(a,g,n,e),2)):(u=l.b)?l.return(function(a,b,e,t,n,r,g){for(var o=q(e),c=o.next();!c.done;c=o.next()){c=c.value.stream;var l=r,d=g;c&&(c.width=Number(n)||void 0,c.height=Number(l)||void 0,c.frameRate=Number(d)||void 0)}n=a.m.disableAudio,(!b.length||n)&&(b=[null]);n=a.m.disableVideo,(!e.length||n)&&(e=[null]);for(n=[],b=q(b),r=b.next();!r.done;r=b.next())for(r=r.value,g=q(e),o=g.next();!o.done;o=g.next()){var f=o.value;o=r?r.stream:null,c=f?f.stream:null,l=r?r.stream.drmInfos:null,d=f?f.stream.drmInfos:null,f=(f?f.ed:"")+" - "+(r?r.ed:""),o&&c&&l.length&&d.length&&!(0<Bn(l,d).length)||a.$.has(f)||(o={id:a.ka++,language:o?o.language:"und",primary:!!o&&o.primary||!!c&&c.primary,audio:o,video:c,bandwidth:t,allowedByApplication:!0,allowedByKeySystem:!0},n.push(o),a.$.add(f))}return n}(a,u.audio,u.video,t,o,c,e)):l.return([])}))})),I(r,Promise.all(e),2)):(t=r.b,n=(n=t.reduce(xe,[])).filter((function(g){return null!=g})),r.return(n))}))}(a,n),3);case 3:return g=y.b,I(y,function(a,b){var e,t,n,r,g,o,c,l,d,f,h;return B((function(m){if(1==m.a)return e=Kc(b,"SUBTITLES"),t=e.map((function(e){var t,n;return B((function(r){if(1==r.a)return a.m.disableText?r.return(null):(k(r,2),I(r,ll(a,e),4));if(2!=r.a)return t=r.b,r.return(t.stream);if(n=M(r),a.m.hls.ignoreTextStreamFailures)return r.return(null);throw n}))})),I(m,Promise.all(t),2);for(n=m.b,r=q(e),g=r.next();!g.done;g=r.next())if(o=g.value,c=Bc(o,"GROUP-ID"),(l=a.f.get(c))&&(d=a.g.get(c)))for(f=q(d),h=f.next();!h.done;h=f.next())h.value.stream.codecs=l;return m.return(n.filter((function(e){return e})))}))}(a,t),4);case 4:if(r=y.b,!a.B)throw new it(2,7,7001);if(a.ia&&0==g.length)throw new it(2,4,4034);for(c=o=1/0,l=q(a.a.values()),d=l.next();!d.done;d=l.next())f=d.value,o=Math.min(o,f.ye),"text"!=f.stream.type&&(c=Math.min(c,f.Of-f.ye));if(a.c!=Nl?(a.b=new Lr(0,a.m.defaultPresentationDelay||3*a.M),a.b.Bc(!1)):(a.b=new Lr(null,0),a.b.Bc(!0)),ml(a),a.c!=Nl)a.X=a.R,u=Rl,a.c==u.Te&&(h=a.b.Yc,isNaN(a.m.availabilityWindowOverride)||(h=a.m.availabilityWindowOverride),a.b.Sd(h));else for(a.b.Qa(c),a.b.offset(-o),m=q(a.a.values()),d=m.next();!d.done;d=m.next())(v=d.value).stream.segmentIndex.offset(-o),v.stream.segmentIndex.fb(0,c);return a.v={presentationTimeline:a.b,variants:g,textStreams:r,offlineSessionIds:[],minBufferTime:0},a.B.makeTextStreamsForClosedCaptions(a.v),I(y,a.B.filter(a.v),0)}}))}(n,e.data),3)):(0<(t=n.X)&&n.l.P(t),r.return(n.v))}))},p.stop=function(){this.l&&(this.l.stop(),this.l=null);var a=[];return this.s&&(a.push(this.s.destroy()),this.s=null),this.m=this.B=null,this.$.clear(),this.v=null,this.a.clear(),this.g.clear(),this.f.clear(),this.o.clear(),Promise.all(a)},p.update=function(){var b,e,t,a=this;return B((function(n){if(1==n.a)return a.c==Nl?n.return():(b=[],a.F=null,(e=Array.from(a.a.values())).length?I(n,rl(a,e[0]),2):n.u(2));for(t=1;t<e.length;t++)b.push(rl(a,e[t]));return I(n,Promise.all(b),0)}))},p.onExpirationUpdated=function(){},p.wc=function(){var b,e,a=this;return B((function(t){return 1==t.a?a.B?(k(t,2),I(t,a.update(),4)):t.return():2!=t.a?(b=a.X,a.l.P(b),N(t,0)):(e=M(t),a.B?(e.severity=1,a.B.onError(e),a.l.P(.1),void x(t)):t.return())}))},H("shaka.hls.HlsParser",il);var Il={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},xl=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],kl={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}},Cl={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(a){var b=Bc(a,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(b)?(b=_e("com.widevine.alpha",[{initDataType:"cenc",initData:b=et((b=nl(b=Bc(a,"URI"))).data)}]),(a=Uc(a,"KEYID"))&&(b.keyIds=new Set([a.toLowerCase().substr(2)])),b):null}},Nl="VOD",Ml="EVENT",_l="LIVE",Rl={Ue:Nl,wg:Ml,Te:_l};function Ll(a,b,e,t,n,r){if(200<=e&&299>=e&&202!=e)return{uri:n||t,De:t,data:b,headers:a,fromCache:!!a["x-shaka-from-cache"]};n=null;try{n=lt(b)}catch(e){}throw new it(401==e||403==e?2:1,1,1001,t,e,n,a,r)}function Pl(){}function Dl(a,b,e,t){var n=new jl;sn(b.headers).forEach((function(e,t){n.append(t,e)}));var r=new Bl,g={ee:!1,Qe:!1};if(a=new Mt(a=function(a,b,e,t,n){var r,g,o,c,l,d,f,h,u,m,v,y;return B((function(E){switch(E.a){case 1:return r=Ul,g=Fl,d=l=0,f=Date.now(),k(E,2),I(E,r(a,e),4);case 4:return o=E.b,h=o.clone().body.getReader(),m=(u=o.headers.get("Content-Length"))?parseInt(u,10):0,new g({start:function(e){!function t(){var r,o;return B((function(c){switch(c.a){case 1:return k(c,2),I(c,h.read(),4);case 4:r=c.b,N(c,3);break;case 2:return M(c),c.return();case 3:r.done||(l+=r.value.byteLength),(100<(o=Date.now())-f||r.done)&&(n(o-f,l-d,m-l),d=l,f=o),r.done?e.close():(e.enqueue(r.value),t()),x(c)}}))}()}}),I(E,o.arrayBuffer(),5);case 5:c=E.b,N(E,3);break;case 2:if(v=M(E),t.ee)throw new it(1,1,7001,a,b);if(t.Qe)throw new it(1,1,1003,a,b);throw new it(1,1,1002,a,v,b);case 3:return y={},o.headers.forEach((function(e,t){y[t.trim()]=e})),E.return(Ll(y,c,o.status,a,o.url,b))}}))}(a,e,{body:b.body||void 0,headers:n,method:b.method,signal:r.signal,credentials:b.allowCrossSiteCredentials?"include":void 0},g,t),(function(){return g.ee=!0,r.abort(),Promise.resolve()})),b=b.retryParameters.timeout){var o=new kt((function(){g.Qe=!0,r.abort()}));o.P(b/1e3),a.finally((function(){o.stop()}))}return a}function Ol(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}Mr.m3u8=function(){return new il},Nr["application/x-mpegurl"]=function(){return new il},Nr["application/vnd.apple.mpegurl"]=function(){return new il},H("shaka.net.HttpFetchPlugin",Pl),Pl.isSupported=Ol,Pl.parse=Dl;var Ul=e.fetch,Bl=e.AbortController,Fl=e.ReadableStream,jl=e.Headers;function Gl(){}function Kl(a,b,e,t){var n=new zl,r=Date.now(),g=0;return new Mt(new Promise((function(o,c){for(var l in n.open(b.method,a,!0),n.responseType="arraybuffer",n.timeout=b.retryParameters.timeout,n.withCredentials=b.allowCrossSiteCredentials,n.onabort=function(){c(new it(1,1,7001,a,e))},n.onload=function(t){for(var n=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),u={},r=(n=q(n)).next();!r.done;r=n.next())u[(r=r.value.split(": "))[0].toLowerCase()]=r.slice(1).join(": ");try{var l=Ll(u,t.response,t.status,a,t.responseURL,e);o(l)}catch(e){c(e)}},n.onerror=function(t){c(new it(1,1,1002,a,t,e))},n.ontimeout=function(){c(new it(1,1,1003,a,e))},n.onprogress=function(e){var n=Date.now();(100<n-r||e.lengthComputable&&e.loaded==e.total)&&(t(n-r,e.loaded-g,e.total-e.loaded),g=e.loaded,r=n)},b.headers)n.setRequestHeader(l.toLowerCase(),b.headers[l]);n.send(b.body)})),(function(){return n.abort(),Promise.resolve()}))}Ol()&&(Ht("http",Dl,2),Ht("https",Dl,2)),H("shaka.net.HttpXHRPlugin",Gl),Gl.parse=Kl;var zl=e.XMLHttpRequest;function Vl(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Hl(a){var b=this;this.T=a,this.a=new Map,this.I=new Qt((function(){var e=Array.from(b.a.values());return Promise.all(e.map((function(e){return e.catch((function(){}))})))})),this.b=[],this.Ce=function(){},this.Be=function(){},this.jc=new Vl}function ql(a){var b=a.b.map((function(e){return e()}));return a.b=[],Promise.all(b)}function Xl(a,b,e,t,n,r){Zt(a.I);var g=function(a,b){a.b+=b;var e=a.g;return a.g++,a.c.set(e,b),e}(a.jc,t);return t=(a.a.get(b)||Promise.resolve()).then((function(){var t,o,c,l,d,f,u;return B((function(h){if(1==h.a)return I(h,function(a,b){var e,t,n,r;return B((function(g){return 1==g.a?(e=Yt,t=a.T.request(e,b),n=function(){return t.abort()},a.b.push(n),I(g,t.promise,2)):(r=g.b,Ft(a.b,n),g.return(r.data))}))}(a,e),2);if(t=h.b,a.I.a)throw new it(2,9,7001);if(n)for(l in o=et(t),(c=new gu(o)).data)d=Number(l),f=c.data[d],u=c.a[d],a.Be(f,u);a.jc.close(g,t.byteLength);var m=a.jc;return a.Ce(0==m.b?0:m.f/m.b,a.jc.a),h.return(r(t))}))})),a.a.set(b,t),t}function Wl(a,b){var e=this;this.c=a,this.b=a.objectStore(b),this.a=new at,a.onabort=function(t){t.preventDefault(),e.a.reject()},a.onerror=function(t){t.preventDefault(),e.a.reject()},a.oncomplete=function(){e.a.resolve()}}function Yl(a,b){return new Promise((function(e,t){var n=a.b.openCursor();n.onerror=t,n.onsuccess=function(){var t;return B((function(g){if(1==g.a)return null==n.result?(e(),g.return()):(t=n.result,I(g,b(t.key,t.value,t),2));t.continue(),x(g)}))}}))}function $l(a){this.b=a,this.a=[]}function Jl(a,b){return Ql(a,b,"readwrite")}function Ql(a,b,e){var t=new Wl(e=a.b.transaction([b],e),b);return a.a.push(t),t.promise().then((function(){Ft(a.a,t)}),(function(){Ft(a.a,t)})),t}function Zl(a,b,e){this.b=new $l(a),this.c=b,this.a=e}function ed(a){return Promise.reject(new it(2,9,9011,"Cannot add new value to "+a))}function nd(a,b,e,t){b=(a=Jl(a.b,b)).store();for(var n={},r=(e=q(e)).next();!r.done;n={Fc:n.Fc},r=e.next())n.Fc=r.value,b.delete(n.Fc).onsuccess=function(g){return function(){return t(g.Fc)}}(n);return a.promise()}function id(a,b,e){var t,n,r,g,o,c,l;return B((function(d){if(1==d.a){for(t=Ql(a.b,b,"readonly"),n=t.store(),r={},g=[],o={},c=q(e),l=c.next();!l.done;o={dc:o.dc,ac:o.ac},l=c.next())o.ac=l.value,o.dc=n.get(o.ac),o.dc.onsuccess=function(e){return function(){null==e.dc.result&&g.push(e.ac),r[e.ac]=e.dc.result}}(o);return I(d,t.promise(),2)}if(g.length)throw new it(2,9,9012,"Could not find values for "+g);return d.return(e.map((function(e){return r[e]})))}))}function rd(a){this.a=new $l(a)}function ad(){this.a=new Map}function od(a,b,e){if(!(a=a.a.get(b)))throw new it(2,9,9013,"Could not find mechanism with name "+b);if(!(b=a.getCells().get(e)))throw new it(2,9,9013,"Could not find cell with name "+e);return b}function sd(a,b){ud.set(a,b)}Ht("http",Kl,1),Ht("https",Kl,1),Vl.prototype.close=function(a,b){if(this.c.has(a)){var e=this.c.get(a);this.c.delete(a),this.f+=e,this.a+=b}},Hl.prototype.destroy=function(){return this.I.destroy()},Wl.prototype.abort=function(){var a=this;return B((function(b){if(1==b.a){try{a.c.abort()}catch(e){}return k(b,2),I(b,a.a,4)}if(2!=b.a)return N(b,0);M(b),x(b)}))},Wl.prototype.store=function(){return this.b},Wl.prototype.promise=function(){return this.a},$l.prototype.destroy=function(){return Promise.all(this.a.map((function(a){return a.abort()})))},(p=Zl.prototype).destroy=function(){return this.b.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return ed(this.c)},p.removeSegments=function(a,b){return nd(this,this.c,a,b)},p.getSegments=function(a){var e,b=this;return B((function(t){return 1==t.a?I(t,id(b,b.c,a),2):(e=t.b,t.return(e.map((function(e){return b.ie(e)}))))}))},p.addManifests=function(){return ed(this.a)},p.updateManifestExpiration=function(a,b){var e=Jl(this.b,this.a),t=e.store();return t.get(a).onsuccess=function(e){(e=e.target.result)&&(e.expiration=b,t.put(e,a))},e.promise()},p.removeManifests=function(a,b){return nd(this,this.a,a,b)},p.getManifests=function(a){var e,b=this;return B((function(t){return 1==t.a?I(t,id(b,b.a,a),2):(e=t.b,t.return(Promise.all(e.map((function(e){return b.ic(e)})))))}))},p.getAllManifests=function(){var b,e,a=this;return B((function(t){return 1==t.a?(b=Ql(a.b,a.a,"readonly"),e=new Map,I(t,Yl(b,(function(t,n){var g;return B((function(r){if(1==r.a)return I(r,a.ic(n),2);g=r.b,e.set(t,g),x(r)}))})),2)):3!=t.a?I(t,b.promise(),3):t.return(e)}))},p.ie=function(a){return a},p.ic=function(a){return Promise.resolve(a)},p.add=function(a,b){var e,t,n,g,r,o,c,l=this;return B((function(d){if(1==d.a){for(e=Jl(l.b,a),t=e.store(),n=[],g={},r=q(b),o=r.next();!o.done;g={Hc:g.Hc},o=r.next())c=o.value,g.Hc=t.add(c),g.Hc.onsuccess=function(e){return function(){n.push(e.Hc.result)}}(g);return I(d,e.promise(),2)}return d.return(n)}))},rd.prototype.destroy=function(){return this.a.destroy()},rd.prototype.getAll=function(){var b,e,a=this;return B((function(t){return 1==t.a?(b=Ql(a.a,"session-ids","readonly"),e=[],I(t,Yl(b,(function(t,n){e.push(n)})),2)):3!=t.a?I(t,b.promise(),3):t.return(e)}))},rd.prototype.add=function(a){for(var b=Jl(this.a,"session-ids"),e=b.store(),t=(a=q(a)).next();!t.done;t=a.next())e.add(t.value);return b.promise()},rd.prototype.remove=function(a){var e,b=this;return B((function(t){return 1==t.a?I(t,Yl(e=Jl(b.a,"session-ids"),(function(e,t,g){a.includes(t.sessionId)&&g.delete()})),2):I(t,e.promise(),0)}))},ad.prototype.destroy=function(){for(var a=[],b=q(this.a.values()),e=b.next();!e.done;e=b.next())a.push(e.value.destroy());return this.a.clear(),Promise.all(a)},ad.prototype.init=function(){var a=this;ud.forEach((function(e,t){var g=e();g&&a.a.set(t,g)}));for(var b=[],e=q(this.a.values()),t=e.next();!t.done;t=e.next())b.push(t.value.init());return Promise.all(b)},H("shaka.offline.StorageMuxer",ad),ad.unregister=function(a){ud.delete(a)},ad.register=sd,ad.prototype.destroy=ad.prototype.destroy;var ud=new Map;function cd(){Zl.apply(this,arguments)}function ld(a,b){!function(a){var b=a.streams.filter((function(e){return"audio"==e.contentType}));if(a=a.streams.filter((function(e){return"video"==e.contentType})),!b.every((function(e){return e.variantIds}))||!a.every((function(e){return e.variantIds}))){for(var e=q(b),t=e.next();!t.done;t=e.next())t.value.variantIds=[];for(e=q(a),t=e.next();!t.done;t=e.next())t.value.variantIds=[];if(e=0,a.length&&!b.length){var n=e++,r=q(a);for(t=r.next();!t.done;t=r.next())t.value.variantIds.push(n)}if(!a.length&&b.length)for(n=e++,r=q(b),t=r.next();!t.done;t=r.next())t.value.variantIds.push(n);if(a.length&&b.length)for(b=q(b),t=b.next();!t.done;t=b.next())for(t=t.value,n=q(a),r=n.next();!r.done;r=n.next()){r=r.value;var g=e++;t.variantIds.push(g),r.variantIds.push(g)}}}(a);for(var e=q(a.streams),t=e.next();!t.done;t=e.next());return a.streams.map((function(e){return function(a,b,e){var t=a.initSegmentUri?fd(a.initSegmentUri):null,n=b+a.presentationTimeOffset,r=b+e;return{id:a.id,originalId:null,primary:a.primary,type:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:void 0,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,initSegmentKey:t,encrypted:a.encrypted,keyIds:new Set([a.keyId]),segments:a.segments.map((function(g){var e=fd(g.uri);return{startTime:b+g.startTime,endTime:b+g.endTime,dataKey:e,initSegmentKey:t,appendWindowStart:b,appendWindowEnd:r,timestampOffset:n}})),variantIds:a.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}(e,a.startTime,b)}))}function fd(a){var b;if((b=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a))||(b=/^offline:segment\/([0-9]+)$/.exec(a)))return Number(b[1]);throw new it(2,9,9004,"Could not parse uri "+a)}function hd(){Zl.apply(this,arguments)}function pd(a,b,e){return{id:a.id,originalId:a.originalId,primary:a.primary,type:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,encrypted:a.encrypted,keyIds:new Set([a.keyId]),segments:a.segments.map((function(t){return{startTime:b+t.startTime,endTime:b+t.endTime,initSegmentKey:a.initSegmentKey,appendWindowStart:b,appendWindowEnd:e,timestampOffset:b-a.presentationTimeOffset,dataKey:t.dataKey}})),variantIds:a.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}function md(){Zl.apply(this,arguments)}function vd(){this.l=this.f=this.c=this.b=this.a=this.g=null}function gd(a,b,e,t){this.a=a,this.g=b,this.f=e,this.c=t,this.b=["offline:",a,"/",b,"/",e,"/",t].join("")}function yd(a){if(null==(a=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a)))return null;var b=a[1];if("manifest"!=b&&"segment"!=b)return null;var e=a[2];if(!e)return null;var t=a[3];return t&&null!=b?new gd(b,e,t,Number(a[4])):null}function bd(a,b){this.b=a,this.a=b}function Ed(a,b){var e=new Lr(null,0);e.Qa(b.duration);var t=b.streams.filter((function(e){return"audio"==e.type})),n=b.streams.filter((function(e){return"video"==e.type}));t=function(a,b,e,t){for(var n=new Set,r=q(b),g=r.next();!g.done;g=r.next()){var o=q(g.value.variantIds);for(g=o.next();!g.done;g=o.next())n.add(g.value)}for(r=q(e),g=r.next();!g.done;g=r.next())for(o=q(g.value.variantIds),g=o.next();!g.done;g=o.next())n.add(g.value);for(r=new Map,n=q(n),g=n.next();!g.done;g=n.next())g=g.value,r.set(g,{id:g,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0});for(b=q(b),n=b.next();!n.done;n=b.next())for(n=n.value,g=Td(a,n,t),o=q(n.variantIds),n=o.next();!n.done;n=o.next())(n=r.get(n.value)).language=g.language,n.primary=n.primary||g.primary,n.audio=g;for(e=q(e),b=e.next();!b.done;b=e.next())for(n=b.value,b=Td(a,n,t),g=q(n.variantIds),n=g.next();!n.done;n=g.next())(n=r.get(n.value)).primary=n.primary||b.primary,n.video=b;return r}(a,t,n,e),n=b.streams.filter((function(e){return"text"==e.type})).map((function(t){return Td(a,t,e)}));var r=b.drmInfo?[b.drmInfo]:[];if(b.drmInfo)for(var g=q(t.values()),o=g.next();!o.done;o=g.next())(o=o.value).audio&&o.audio.encrypted&&(o.audio.drmInfos=r),o.video&&o.video.encrypted&&(o.video.drmInfos=r);return{presentationTimeline:e,minBufferTime:2,offlineSessionIds:b.sessionIds,variants:Array.from(t.values()),textStreams:n}}function Td(a,b,e){var t=b.segments.map((function(e){return function(a,b){var e=new gd("segment",a.b,a.a,b.dataKey);return new Rr(b.startTime,b.endTime,(function(){return[e.toString()]}),0,null,null!=b.initSegmentKey?function(a,b){var e=new gd("segment",a.b,a.a,b);return new _r((function(){return[e.toString()]}),0,null)}(a,b.initSegmentKey):null,b.timestampOffset,b.appendWindowStart,b.appendWindowEnd)}(a,e)}));return e.Vb(t),{id:b.id,originalId:b.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Zr(t),mimeType:b.mimeType,codecs:b.codecs,width:b.width||void 0,height:b.height||void 0,frameRate:b.frameRate,pixelAspectRatio:b.pixelAspectRatio,kind:b.kind,encrypted:b.encrypted,drmInfos:[],keyIds:b.keyIds,language:b.language,label:b.label,type:b.type,primary:b.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:b.roles,channelsCount:b.channelsCount,audioSamplingRate:b.audioSamplingRate,closedCaptions:b.closedCaptions}}function Ad(){this.a=null}function wd(){}function Sd(a){var b=yd(a);return b&&"manifest"==b.a?a=Lt(a={uri:a,De:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):a=b&&"segment"==b.a?function(a,b){var e=new ad;return Lt(void 0).aa((function(){return e.init()})).aa((function(){return od(e,b.Pa(),b.sa())})).aa((function(e){return e.getSegments([b.key()])})).aa((function(e){return{uri:b,data:e[0].data,headers:{}}})).finally((function(){return e.destroy()}))}(b.key(),b):_t(new it(2,1,9004,a)),a}function Id(a,b,e){var t,n,r,g,o,c;return B((function(l){switch(l.a){case 1:t=[];for(var d=[],f=q(e),h=f.next();!h.done;h=f.next()){h=h.value;for(var u=!1,m=q(d),v=m.next();!v.done;v=m.next())if(xd((v=v.value).info,h)){v.sessionIds.push(h.sessionId),u=!0;break}u||d.push({info:h,sessionIds:[h.sessionId]})}n=q(d),r=n.next();case 2:if(r.done){l.u(4);break}return g=r.value,o=function(a,b,e){var t,n;return B((function(r){switch(r.a){case 1:return t=new Tn({Ub:b,onError:function(){},Vc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),k(r,2),t.configure(a),I(r,function(a,b,e,t,n,r){var g=new Map;return(n={audioCapabilities:n,videoCapabilities:r,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:b}).drmInfos=[{keySystem:b,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:t,initData:null,keyIds:null}],g.set(b,n),_n(a,g)}(t,e.info.keySystem,e.info.licenseUri,e.info.serverCertificate,e.info.audioCapabilities,e.info.videoCapabilities),4);case 4:N(r,3);break;case 2:return M(r),I(r,t.destroy(),5);case 5:return r.return([]);case 3:return k(r,6),I(r,Sn(t),8);case 8:N(r,7);break;case 6:return M(r),I(r,t.destroy(),9);case 9:return r.return([]);case 7:return n=[],I(r,Promise.all(e.sessionIds.map((function(g){return B((function(e){return 1==e.a?(k(e,2),I(e,function(a,b){var e,t,n;return B((function(r){return 1==r.a?I(r,Rn(a,b),2):(e=r.b)?(t=[],(n=a.f.get(e))&&(n.Ra=new at,t.push(n.Ra)),t.push(e.remove()),I(r,Promise.all(t),0)):r.return()}))}(t,g),4)):2!=e.a?(n.push(g),N(e,0)):(M(e),void x(e))}))}))),10);case 10:return I(r,t.destroy(),11);case 11:return r.return(n)}}))}(a,b,g),I(l,o,5);case 5:c=l.b,t=t.concat(c),r=n.next(),l.u(2);break;case 4:return l.return(t)}}))}function xd(a,b){function e(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return a.keySystem==b.keySystem&&a.licenseUri==b.licenseUri&&jt(a.audioCapabilities,b.audioCapabilities,e)&&jt(a.videoCapabilities,b.videoCapabilities,e)}function kd(a,b){var e=Ed(new bd(a.Pa(),a.sa()),b),t=b.appMetadata||{};return e=Cd(e),{offlineUri:a.toString(),originalManifestUri:b.originalManifestUri,duration:b.duration,size:b.size,expiration:b.expiration,tracks:e,appMetadata:t}}function Cd(a){for(var b=[],e=function(a){return a.filter((function(b){return sr(b)}))}(a.variants),t=(e=q(e)).next();!t.done;t=e.next())b.push(nr(t.value));for(e=(a=q(a.textStreams)).next();!e.done;e=a.next())b.push(ir(e.value));return b}function Nd(){this.a={}}function Md(a,b){var e=a.a[b];return null==e&&(e=0),e}function _d(a){var b=this;if(a&&a.constructor!=to)throw new it(2,9,9008);this.T=this.m=null,a?(this.m=a.m,this.T=a.mc()):(this.m=Xa(),this.T=new Vt),this.$c=[],this.xc=[],this.Jd=[],this.a=new Map,this.a.set(null,Promise.resolve(null)),this.b=new Map;var e=!a;this.I=new Qt((function(){var t,n,r,g,o;return B((function(c){switch(c.a){case 1:return I(c,Promise.all(b.Jd.map((function(e){return ql(e)}))),2);case 2:for(t=function(){},n=[],r=q(b.xc),g=r.next();!g.done;g=r.next())o=g.value,n.push(o.then(t,t));return I(c,Promise.all(n),3);case 3:if(!e){c.u(4);break}return I(c,b.T.destroy(),4);case 4:b.m=null,b.T=null,x(c)}}))}))}function Rd(){if(fn())e:{for(var a=q(ud.values()),b=a.next();!b.done;b=a.next())if(b=(b=b.value)()){b.destroy(),a=!0;break e}a=!1}else a=!1;return a}function Ld(a,b){for(var e=[],t=q(a.streams),n=t.next();!n.done;n=t.next())n=n.value,b&&"video"==n.type?e.push({contentType:cn(n.mimeType,n.codecs),robustness:a.drmInfo.videoRobustness}):b||"audio"!=n.type||e.push({contentType:cn(n.mimeType,n.codecs),robustness:a.drmInfo.audioRobustness});return e}function Pd(a,b,e){return B((function(t){return I(t,function(a,b,e,t){var n,r,g;return B((function(o){return 1==o.a?t.drmInfo?(n=function(a){var b=Array.from(a.a.keys());if(!b.length)throw new it(2,9,9e3,"No supported storage mechanisms found");return a.a.get(b[0]).getEmeSessionCell()}(e),r=t.sessionIds.map((function(e){return{sessionId:e,keySystem:t.drmInfo.keySystem,licenseUri:t.drmInfo.licenseServerUri,serverCertificate:t.drmInfo.serverCertificate,audioCapabilities:Ld(t,!1),videoCapabilities:Ld(t,!0)}})),I(o,Id(b,a,r),2)):o.return():3!=o.a?(g=o.b,I(o,n.remove(g),3)):I(o,n.add(r.filter((function(e){return!g.includes(e.sessionId)}))),0)}))}(a.T,a.m.drm,e,b),0)}))}function Dd(a,b,e){function t(){}var n=function(a){for(var b=[],e=(a=q(a.streams)).next();!e.done;e=a.next())for(var t=(e=q(e.value.segments)).next();!t.done;t=e.next())null!=(t=t.value).initSegmentKey&&b.push(t.initSegmentKey),b.push(t.dataKey);return b}(e);return kd(b,e),Promise.all([a.removeSegments(n,t),a.removeManifests([b.key()],t)])}function Od(a,b,e,t,n,r,g){var o={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,kind:r.kind,language:r.language,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,closedCaptions:r.closedCaptions},c=r.id;return function(a,b,e){if(null!=(b=a.segmentIndex.find(b)))for(var t=a.segmentIndex.get(b);t;)e(t),t=a.segmentIndex.get(++b)}(r,n.presentationTimeline.qb(),(function(n){var l=function(a,b,e,t,n,r,g,o){return a.a.has(g)?a.a.get(g):(o=fa(g.c(),g.b,g.a,o.streaming.retryParameters),b=Xl(b,e,o,.5*Md(r,t),!0,(function(e){var t;return B((function(r){return 1==r.a?I(r,n.addSegments([{data:e}]),2):(t=r.b,a.$c.push(t[0]),r.return(t[0]))}))})),a.a.set(g,b),b)}(a,b,c,r.id,e,t,n.f,g),d=function(a,b,e,t,n,r,g,o){var c=[g.c()[0],g.b,g.a].join("-");return a.b.has(c)?a.b.get(c):(o=fa(g.c(),g.b,g.a,o.streaming.retryParameters),b=Xl(b,e,o,function(a,b,e){return e=e.endTime-e.startTime,Md(a,b)*e}(r,t,g),!1,(function(e){var t;return B((function(r){return 1==r.a?I(r,n.addSegments([{data:e}]),2):(t=r.b,a.$c.push(t[0]),r.return(t[0]))}))})),a.b.set(c,b),b)}(a,b,c,r.id,e,t,n,g);!function(a,b,e){Zt(a.I);var t=(a.a.get(b)||Promise.resolve()).then((function(){return B((function(t){return I(t,e(),0)}))}));a.a.set(b,t)}(b,c,(function(){var e,u;return B((function(t){return 1==t.a?I(t,l,2):3!=t.a?(e=t.b,I(t,d,3)):(u=t.b,o.segments.push({initSegmentKey:e,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,dataKey:u}),void x(t))}))}))})),o}function Ud(a){if(a.I.a)throw new it(2,9,7001)}function Bd(){if(!Rd())throw new it(2,9,9e3)}function Fd(a,b){return B((function(e){return 1==e.a?(a.xc.push(b),C(e),I(e,b,4)):2!=e.a?e.return(e.b):(_(e),Ft(a.xc,b),R(e,0))}))}function jd(a){for(var b=new Set,e=q(a.textStreams),t=e.next();!t.done;t=e.next())b.add(t.value);for(e=(a=q(a.variants)).next();!e.done;e=a.next())(e=e.value).audio&&b.add(e.audio),e.video&&b.add(e.video);return b}T(cd,Zl),cd.prototype.updateManifestExpiration=function(a,b){var e,t,n,r=this;return B((function(g){return e=Jl(r.b,r.a),t=e.store(),n=new at,t.get(a).onsuccess=function(e){(e=e.target.result)?(e.expiration=b,t.put(e),n.resolve()):n.reject(new it(2,9,9012,"Could not find values for "+a))},I(g,Promise.all([e.promise(),n]),0)}))},cd.prototype.ic=function(a){var b,e,t,n,r,g;return B((function(o){if(1==o.a){for(b=[],e=0;e<a.periods.length;++e)t=e==a.periods.length-1?a.duration:a.periods[e+1].startTime,n=t-a.periods[e].startTime,r=ld(a.periods[e],n),b.push(r);return I(o,uc(b),2)}return g=o.b,o.return({creationTime:0,originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,expiration:null==a.expiration?1/0:a.expiration,streams:g,sessionIds:a.sessionIds,drmInfo:a.drmInfo,appMetadata:a.appMetadata})}))},cd.prototype.ie=function(a){return{data:a.data}},T(hd,Zl),hd.prototype.ic=function(a){var b,e,t,n,r,g;return B((function(o){if(1==o.a){for(b=[],e=0;e<a.periods.length;++e){t=e==a.periods.length-1?a.duration:a.periods[e+1].startTime,n=t-a.periods[e].startTime;for(var c=a.periods[e],l=[],d=q(c.streams),f=d.next();!f.done;f=d.next())0!=(f=f.value).variantIds.length&&l.push(pd(f,c.startTime,c.startTime+n));r=l,b.push(r)}return I(o,uc(b),2)}return g=o.b,o.return({appMetadata:a.appMetadata,creationTime:0,drmInfo:a.drmInfo,duration:a.duration,expiration:null==a.expiration?1/0:a.expiration,originalManifestUri:a.originalManifestUri,sessionIds:a.sessionIds,size:a.size,streams:g})}))},T(md,Zl),md.prototype.hasFixedKeySpace=function(){return!1},md.prototype.addSegments=function(a){return this.add(this.c,a)},md.prototype.addManifests=function(a){return this.add(this.a,a)},md.prototype.ic=function(a){return null==a.expiration&&(a.expiration=1/0),Promise.resolve(a)},(p=vd.prototype).init=function(){var a=this,b=new at,t=e.indexedDB.open("shaka_offline_db",5);return t.onsuccess=function(){var e=t.result;a.g=e;var n=e.objectStoreNames;n=n.contains("manifest")&&n.contains("segment")?new cd(e,"segment","manifest"):null,a.a=n,n=(n=e.objectStoreNames).contains("manifest-v2")&&n.contains("segment-v2")?new hd(e,"segment-v2","manifest-v2"):null,a.b=n,n=(n=e.objectStoreNames).contains("manifest-v3")&&n.contains("segment-v3")?new hd(e,"segment-v3","manifest-v3"):null,a.c=n,n=(n=e.objectStoreNames).contains("manifest-v5")&&n.contains("segment-v5")?new md(e,"segment-v5","manifest-v5"):null,a.f=n,e=e.objectStoreNames.contains("session-ids")?new rd(e):null,a.l=e,b.resolve()},t.onupgradeneeded=function(){for(var e=t.result,n=q(["segment-v5","manifest-v5","session-ids"]),r=n.next();!r.done;r=n.next())r=r.value,e.objectStoreNames.contains(r)||e.createObjectStore(r,{autoIncrement:!0})},t.onerror=function(e){b.reject(new it(2,9,9001,t.error)),e.preventDefault()},b},p.destroy=function(){var a=this;return B((function(b){switch(b.a){case 1:if(!a.a){b.u(2);break}return I(b,a.a.destroy(),2);case 2:if(!a.b){b.u(4);break}return I(b,a.b.destroy(),4);case 4:if(!a.c){b.u(6);break}return I(b,a.c.destroy(),6);case 6:if(!a.f){b.u(8);break}return I(b,a.f.destroy(),8);case 8:if(!a.l){b.u(10);break}return I(b,a.l.destroy(),10);case 10:a.g&&a.g.close(),x(b)}}))},p.getCells=function(){var a=new Map;return this.a&&a.set("v1",this.a),this.b&&a.set("v2",this.b),this.c&&a.set("v3",this.c),this.f&&a.set("v5",this.f),a},p.getEmeSessionCell=function(){return this.l},p.erase=function(){var a=this;return B((function(b){switch(b.a){case 1:if(!a.a){b.u(2);break}return I(b,a.a.destroy(),2);case 2:if(!a.b){b.u(4);break}return I(b,a.b.destroy(),4);case 4:if(!a.c){b.u(6);break}return I(b,a.c.destroy(),6);case 6:if(!a.f){b.u(8);break}return I(b,a.f.destroy(),8);case 8:return a.g&&a.g.close(),I(b,function(){var a=new at,b=e.indexedDB.deleteDatabase("shaka_offline_db");return b.onblocked=function(){},b.onsuccess=function(){a.resolve()},b.onerror=function(e){a.reject(new it(2,9,9001,b.error)),e.preventDefault()},a}(),10);case 10:return a.g=null,a.a=null,a.b=null,a.c=null,a.f=null,I(b,a.init(),0)}}))},sd("idb",(function(){return gn("CrKey")||!e.indexedDB?null:new vd})),gd.prototype.Pa=function(){return this.g},gd.prototype.sa=function(){return this.f},gd.prototype.key=function(){return this.c},gd.prototype.toString=function(){return this.b},(p=Ad.prototype).configure=function(){},p.start=function(a,b){var e,t,g,n,r,o,c=this;return B((function(l){switch(l.a){case 1:if(e=yd(a),c.a=e,null==e||"manifest"!=e.a)throw new it(2,1,9004,a);return t=new ad,C(l),I(l,t.init(),4);case 4:return I(l,od(t,e.Pa(),e.sa()),5);case 5:return I(l,l.b.getManifests([e.key()]),6);case 6:return g=l.b,n=g[0],r=new bd(e.Pa(),e.sa()),o=Ed(r,n),b.makeTextStreamsForClosedCaptions(o),l.return(o);case 2:return _(l),I(l,t.destroy(),7);case 7:R(l,0)}}))},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(a,b){var e,t,n,g,r,o,c,l=this;return B((function(d){switch(d.a){case 1:return e=l.a,t=new ad,k(d,2,3),I(d,t.init(),5);case 5:return I(d,od(t,e.Pa(),e.sa()),6);case 6:return I(d,(n=d.b).getManifests([e.key()]),7);case 7:if(g=d.b,r=g[0],o=r.sessionIds.includes(a),c=null==r.expiration||r.expiration>b,!o||!c){d.u(3);break}return I(d,n.updateManifestExpiration(e.key(),b),3);case 3:return _(d),I(d,t.destroy(),10);case 10:R(d,0);break;case 2:M(d),d.u(3)}}))},Nr["application/x-offline-manifest"]=function(){return new Ad},H("shaka.offline.OfflineScheme",wd),wd.plugin=Sd,Ht("offline",Sd),(p=_d.prototype).destroy=function(){return this.I.destroy()},p.configure=function(a,b){return 2==arguments.length&&"string"==typeof a&&(a=Ha(a,b)),a.manifest&&a.manifest.dash&&"defaultPresentationDelay"in a.manifest.dash&&(Ae("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),a.manifest.defaultPresentationDelay=a.manifest.dash.defaultPresentationDelay,delete a.manifest.dash.defaultPresentationDelay),li(this.m,a)},p.getConfiguration=function(){var a=Xa();return li(a,this.m,Xa()),a},p.mc=function(){return this.T},p.store=function(a,b,e){var t=this,n=this.getConfiguration(),r=new Hl(this.T);this.Jd.push(r);var g=new Mt(b=function(a,b,e,t,n,r){var g,o,c,l,d,f,u,h,m,v;return B((function(y){switch(y.a){case 1:return Bd(),o=g=null,c=new ad,d=l=null,k(y,2,3),I(y,t(),5);case 5:return g=y.b,I(y,function(a,b,e,t){var n,r,g,o,c;return B((function(l){if(1==l.a)return n=null,r=a.T,g={networkingEngine:r,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){n=e}},e.configure(t.manifest),Ud(a),I(l,e.start(b,g),2);if(3!=l.a)return o=l.b,Ud(a),c=jd(o),I(l,Promise.all(ie(c,(function(e){return e.createSegmentIndex()}))),3);if(Ud(a),n)throw n;return l.return(o)}))}(a,b,g,n),6);case 6:if(f=y.b,Ud(a),!(!f.presentationTimeline.S()&&!f.presentationTimeline.tb()))throw new it(2,9,9005,b);return I(y,function(a,b,e,t){var n;return B((function(r){switch(r.a){case 1:return(n=new Tn({Ub:a.T,onError:e,Vc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(t.drm),I(r,function(a,b,e){return a.A=[],a.C=e,wn(a,b)}(n,b.variants,t.offline.usePersistentLicense),2);case 2:return I(r,Sn(n),3);case 3:return I(r,In(n),4);case 4:return r.return(n)}}))}(a,f,(function(e){d=d||e}),n),7);case 7:if(o=y.b,Ud(a),d)throw d;return I(y,a.Kb(f,o,n),8);case 8:return I(y,c.init(),9);case 9:return Ud(a),I(y,function(a){var b=null;if(a.a.forEach((function(e,t){e.getCells().forEach((function(e,n){e.hasFixedKeySpace()||b||(b={path:{Pa:t,sa:n},sa:e})}))})),b)return b;throw new it(2,9,9013,"Could not find a cell that supports add-operations")}(c),10);case 10:return l=y.b,Ud(a),I(y,function(a,b,e,t,n,r,g,o){var c,l,d,u,f,h,m,v,y,E;return B((function(T){switch(T.a){case 1:return c=function(a,b,e){return{offlineUri:null,originalManifestUri:a,duration:b.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:b=Cd(b),appMetadata:e}}(n,t,r),l=g.offline.progressCallback,function(a,b,e){a.Ce=b,a.Be=e}(o,(function(e,t){c.size=t,l(c,e)}),(function(t,n){f&&g.offline.usePersistentLicense&&h==n&&xn(e,"cenc",t)})),d=t.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})),u=t.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))})),h=null,(f=d&&!u)&&(m=e.c,h=Gd.get(m.keySystem)),C(T),y=v=function(a,b,e,t,n,r,g,o){for(var c=new Nd,l=q(n.variants),d=l.next();!d.done;d=l.next()){var f=c,h=(d=d.value).audio,u=d.video;if(h&&!u&&(f.a[h.id]=h.bandwidth||d.bandwidth),!h&&u&&(f.a[u.id]=u.bandwidth||d.bandwidth),h&&u){var m=h.bandwidth||393216,v=u.bandwidth||d.bandwidth-m;0>=v&&(v=d.bandwidth),f.a[h.id]=m,f.a[u.id]=v}}for(l=q(n.textStreams),f=l.next();!f.done;f=l.next())c.a[f.value.id]=52;for(f=jd(n),l=new Map,f=q(f),d=f.next();!d.done;d=f.next())d=d.value,h=Od(a,b,e,c,n,d,o),l.set(d.id,h);for(a=q(n.variants),d=a.next();!d.done;d=a.next())(b=d.value).audio&&l.get(b.audio.id).variantIds.push(b.id),b.video&&l.get(b.video.id).variantIds.push(b.id);return a=Array.from(l.values()),o=o.offline.usePersistentLicense,(b=t.c)&&o&&(b.initData=[]),{creationTime:Date.now(),originalManifestUri:r,duration:n.presentationTimeline.getDuration(),size:0,expiration:t.lc(),streams:a,sessionIds:o?Nn(t):[],drmInfo:b,appMetadata:g}}(a,o,b,e,t,n,r,g),I(T,function(a){return B((function(b){return 1==b.a?I(b,Promise.all(a.a.values()),2):b.return(a.jc.a)}))}(o),4);case 4:if(y.size=T.b,v.expiration=e.lc(),E=Nn(e),v.sessionIds=g.offline.usePersistentLicense?E:[],d&&g.offline.usePersistentLicense&&!E.length)throw new it(2,9,9007);return T.return(v);case 2:return _(T),I(T,o.destroy(),5);case 5:R(T,0)}}))}(a,l.sa,o,f,b,e,n,r),11);case 11:if(u=y.b,Ud(a),d)throw d;return I(y,l.sa.addManifests([u]),12);case 12:return h=y.b,Ud(a),m=new gd("manifest",l.path.Pa,l.path.sa,h[0]),y.return(kd(m,u));case 3:return _(y),a.$c=[],I(y,c.destroy(),13);case 13:if(!g){y.u(14);break}return I(y,g.stop(),14);case 14:if(!o){y.u(16);break}return I(y,o.destroy(),16);case 16:R(y,0);break;case 2:if(v=M(y),!l){y.u(18);break}return I(y,l.sa.removeSegments(a.$c,(function(){})),18);case 18:throw d||v}}))}(this,a,b||{},(function(){var r;return B((function(o){return 1==o.a?I(o,kr(a,t.T,n.manifest.retryParameters,e||null),2):(r=o.b,o.return(Ne(r)))}))}),n,r),(function(){return ql(r)}));return g.finally((function(){Ft(t.Jd,r)})),g.then=function(e){return Ae("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),g.promise.then(e)},function(a,b){var e=b.promise;return a.xc.push(e),b.finally((function(){Ft(a.xc,e)}))}(this,g)},p.Ef=function(){return Ae("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},p.Kb=function(a,b,e){var t,n,r,g,o,c,l,d,f,h,u,m,v,y,E;return B((function(T){if(1==T.a){for(t={width:1/0,height:1/0},function(a,b,e){a.variants=a.variants.filter((function(t){return Zi(t,b,e)}))}(a,e.restrictions,t),function(a){a.variants=a.variants.filter((function(b){var e=!0;return b.audio&&(e=e&&Oi(b.audio)),b.video&&(e=e&&Oi(b.video)),e}))}(a),function(a,b){a.variants=a.variants.filter((function(e){return Un(b,e)}))}(a,b),n=[],r=e.preferredAudioChannelCount,Qi(a,r),g=q(a.variants),o=g.next();!o.done;o=g.next())c=o.value,n.push(nr(c));for(l=q(a.textStreams),d=l.next();!d.done;d=l.next())f=d.value,n.push(ir(f));return I(T,e.offline.trackSelectionCallback(n),2)}for(h=T.b,u=new Set,m=new Set,v=q(h),y=v.next();!y.done;y=v.next())"variant"==(E=y.value).type&&u.add(E.id),"text"==E.type&&m.add(E.id);a.variants=a.variants.filter((function(e){return u.has(e.id)})),a.textStreams=a.textStreams.filter((function(e){return m.has(e.id)})),function(a){a.variants.map((function(e){return e.video}));var b=new Set(a.variants.map((function(e){return e.audio})));a=a.textStreams;for(var e=q(b),t=e.next();!t.done;t=e.next())for(var n=(t=q(b)).next();!n.done;n=t.next());for(b=q(a),e=b.next();!e.done;e=b.next())for(e=q(a),t=e.next();!t.done;t=e.next());}(a),x(T)}))},p.remove=function(a){return Fd(this,function(a,b){var e,t,n,r,g,o;return B((function(c){switch(c.a){case 1:if(Bd(),null==(e=yd(b))||"manifest"!=e.a)throw new it(2,9,9004,b);return t=e,n=new ad,C(c),I(c,n.init(),4);case 4:return I(c,od(n,t.Pa(),t.sa()),5);case 5:return I(c,(r=c.b).getManifests([t.key()]),6);case 6:return g=c.b,o=g[0],I(c,Promise.all([Pd(a,o,n),Dd(r,t,o)]),2);case 2:return _(c),I(c,n.destroy(),8);case 8:R(c,0)}}))}(this,a))},p.Zf=function(){return Fd(this,function(a){var b,e,t,n,r,g,o,c,l,d;return B((function(f){switch(f.a){case 1:return Bd(),b=a.T,e=a.m.drm,t=new ad,n=!1,C(f),I(f,t.init(),4);case 4:r=[],function(a,b){a.a.forEach((function(e){b(e.getEmeSessionCell())}))}(t,(function(e){return r.push(e)})),g=q(r),o=g.next();case 5:if(o.done){f.u(2);break}return I(f,(c=o.value).getAll(),8);case 8:return l=f.b,I(f,Id(e,b,l),9);case 9:return d=f.b,I(f,c.remove(d),10);case 10:d.length!=l.length&&(n=!0),o=g.next(),f.u(5);break;case 2:return _(f),I(f,t.destroy(),11);case 11:R(f,3);break;case 3:return f.return(!n)}}))}(this))},p.list=function(){return Fd(this,B((function(t){switch(t.a){case 1:return Bd(),a=[],b=new ad,C(t),I(t,b.init(),4);case 4:return e=Promise.resolve(),function(a,b){a.a.forEach((function(e,t){e.getCells().forEach((function(e,n){b({Pa:t,sa:n},e)}))}))}(b,(function(t,n){e=e.then((function(){return B((function(e){if(1==e.a)return I(e,n.getAllManifests(),2);e.b.forEach((function(e,n){var r=kd(new gd("manifest",t.Pa,t.sa,n),e);a.push(r)})),x(e)}))}))})),I(t,e,2);case 2:return _(t),I(t,b.destroy(),6);case 6:R(t,3);break;case 3:return t.return(a)}})));var a,b,e},H("shaka.offline.Storage",_d),_d.deleteAll=function(){var a;return B((function(b){return 1==b.a?(a=new ad,C(b),I(b,function(a){var b,e;return B((function(t){return 1==t.a?(b=Array.from(a.a.values()),(e=0<b.length)||ud.forEach((function(e){(e=e())&&b.push(e)})),I(t,Promise.all(b.map((function(e){return e.erase()}))),2)):e?t.u(0):I(t,Promise.all(b.map((function(e){return e.destroy()}))),0)}))}(a),2)):5!=b.a?(_(b),I(b,a.destroy(),5)):R(b,0)}))},_d.prototype.list=_d.prototype.list,_d.prototype.removeEmeSessions=_d.prototype.Zf,_d.prototype.remove=_d.prototype.remove,_d.prototype.getStoreInProgress=_d.prototype.Ef,_d.prototype.store=_d.prototype.store,_d.prototype.getNetworkingEngine=_d.prototype.mc,_d.prototype.getConfiguration=_d.prototype.getConfiguration,_d.prototype.configure=_d.prototype.configure,_d.prototype.destroy=_d.prototype.destroy,_d.support=Rd;var Gd=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Kd(){}function zd(){for(var a=q(Hd),b=a.next();!b.done;b=a.next()){b=b.value;try{b.Ye()}catch(e){$("Error installing polyfill!",e)}}}function Vd(a,b){for(var e={priority:b||0,Ye:a},t=q(oe(Hd)),n=t.next();!n.done;n=t.next()){var r=(n=n.value).na;if(n.item.priority<e.priority)return void Hd.splice(r,0,e)}Hd.push(e)}hs.offline=Rd,H("shaka.polyfill",Kd),Kd.register=Vd,Kd.installAll=zd;var Hd=[];function qd(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var e=new Event(b,a);else(e=document.createEvent("Event")).initEvent(b,a.bubbles,a.cancelable);a.target.dispatchEvent(e)}function Xd(a,b,e){if("input"==a)switch(this.type){case"range":a="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,a,b,e)}function Wd(){var a=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(b){for(var e=[],t=0;t<arguments.length;++t)e[t]=arguments[t];return(e=a.apply(this,e)).abort=function(){},e}}function Yd(a,b){try{var e=new Qd(a,b);return Promise.resolve(e)}catch(e){return Promise.reject(e)}}function $d(a){var b=this.mediaKeys;return b&&b!=a&&ef(b,null),delete this.mediaKeys,(this.mediaKeys=a)?ef(a,this):Promise.resolve()}function Jd(a){if(tt(a=et(a.initData)).getUint32(0,!0)+4!=a.byteLength)throw new RangeError("Malformed FairPlay init data");a=ft(a=ct(a.subarray(4),!0));var b=new Event("encrypted");b.initDataType="skd",b.initData=Ze(a),this.dispatchEvent(b)}function Qd(a,b){if(this.keySystem=a,a.startsWith("com.apple.fps"))for(var e=q(b),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,g=!1;if(n.audioCapabilities)for(var o=q(n.audioCapabilities),c=o.next();!c.done;c=o.next())(c=c.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.audioCapabilities.push(c),g=!0));if(n.videoCapabilities)for(c=(n=q(n.videoCapabilities)).next();!c.done;c=n.next())(o=c.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),g=!0));r||(g=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=g?t:null}if(t)return void(this.a=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Zd(a){this.a=new WebKitMediaKeys(a),this.b=new en}function ef(a,b){if(a.b.yb(),!b)return Promise.resolve();a.b.h(b,"webkitneedkey",Jd);try{return Fr(b,HTMLMediaElement.HAVE_METADATA,a.b,(function(){b.webkitSetMediaKeys(a.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function tf(a){ne.call(this),this.f=null,this.g=a,this.c=this.a=null,this.b=new en,this.sessionId="",this.expiration=NaN,this.closed=new at,this.keyStatuses=new rf}function nf(a,b){var e=a.keyStatuses;e.size=null==b?0:1,e.a=b,e=new X("keystatuseschange"),a.dispatchEvent(e)}function rf(){this.size=0,this.a=void 0}function af(a,b){try{var e=new sf(a,b);return Promise.resolve(e)}catch(e){return Promise.reject(e)}}function of(a){if(a.initData){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null),b.initDataType="cenc",b.initData=Ze(function(a){if(!a)return a;var b=new gu(a);if(1>=b.data.length)return a;a=[];for(var e={},t=(b=q(b.data)).next();!t.done;e={Dc:e.Dc},t=b.next())e.Dc=t.value,a.some(function(e){return function(t){return Je(t,e.Dc)}}(e))||a.push(e.Dc);return At.apply(vt,f(a))}(a.initData)),this.dispatchEvent(b)}}function sf(a,b){this.keySystem=a;for(var e=!1,t=q(b),n=t.next();!n.done;n=t.next()){var r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(n=n.value).initDataTypes,sessionTypes:["temporary"],label:n.label},g=!1;if(n.audioCapabilities)for(var o=q(n.audioCapabilities),c=o.next();!c.done;c=o.next())(c=c.value).contentType&&(g=!0,MSMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(r.audioCapabilities.push(c),e=!0));if(n.videoCapabilities)for(c=(o=q(n.videoCapabilities)).next();!c.done;c=o.next())(c=c.value).contentType&&(g=!0,MSMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(r.videoCapabilities.push(c),e=!0));if(g||(e=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==n.persistentState&&(e=!1),e)return void(this.a=r)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function uf(a){var b=this.mediaKeys;return b&&b!=a&&lf(b,null),delete this.mediaKeys,(this.mediaKeys=a)?lf(a,this):Promise.resolve()}function cf(a){this.a=new MSMediaKeys(a),this.b=new en}function lf(a,b){if(a.b.yb(),!b)return Promise.resolve();a.b.h(b,"msneedkey",of);try{return Fr(b,HTMLMediaElement.HAVE_METADATA,a.b,(function(){b.msSetMediaKeys(a.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function br(a){ne.call(this),this.f=null,this.g=a,this.c=this.a=null,this.b=new en,this.sessionId="",this.expiration=NaN,this.closed=new at,this.keyStatuses=new ff}function df(a,b){var e=a.keyStatuses;e.size=null==b?0:1,e.a=b,e=new X("keystatuseschange"),a.dispatchEvent(e)}function ff(){this.size=0,this.a=void 0}function hf(){return Promise.reject(Error("The key system specified is not supported."))}function pf(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function mf(){throw new TypeError("Illegal constructor.")}function hr(){throw this.keySystem="",new TypeError("Illegal constructor.")}function vf(a){return xf?xf+a.charAt(0).toUpperCase()+a.slice(1):a}function gf(a,b){try{var e=new bf(a,b);return Promise.resolve(e)}catch(e){return Promise.reject(e)}}function yf(a){var b=this.mediaKeys;return b&&b!=a&&Tf(b,null),delete this.mediaKeys,(this.mediaKeys=a)&&Tf(a,this),Promise.resolve()}function bf(a,b){this.a=this.keySystem=a;var e=!1;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",e=!1);var t=!1,n=document.getElementsByTagName("video");n=n.length?n[0]:document.createElement("video");for(var r=q(b),g=r.next();!g.done;g=r.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(g=g.value).initDataTypes,sessionTypes:["temporary"],label:g.label},c=!1;if(g.audioCapabilities)for(var l=q(g.audioCapabilities),d=l.next();!d.done;d=l.next())(d=d.value).contentType&&(c=!0,n.canPlayType(d.contentType.split(";")[0],this.a)&&(o.audioCapabilities.push(d),t=!0));if(g.videoCapabilities)for(d=(l=q(g.videoCapabilities)).next();!d.done;d=l.next())(d=d.value).contentType&&(c=!0,n.canPlayType(d.contentType,this.a)&&(o.videoCapabilities.push(d),t=!0));if(c||(t=n.canPlayType("video/mp4",this.a)||n.canPlayType("video/webm",this.a)),"required"==g.persistentState&&(e?(o.persistentState="required",o.sessionTypes=["persistent-license"]):t=!1),t)return void(this.b=o)}throw e="Unsupported keySystem","org.w3.clearkey"!=a&&"com.widevine.alpha"!=a||(e="None of the requested configurations were supported."),(e=Error(e)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Ef(a){this.g=a,this.a=null,this.b=new en,this.c=[],this.f=new Map}function Tf(a,b){a.a=b,a.b.yb();var e=xf;b&&(a.b.h(b,e+"needkey",(function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=Ze(e.initData),a.a.dispatchEvent(t)})),a.b.h(b,e+"keymessage",(function(e){var t=Af(a,e.sessionId);t&&(e=new X("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))})),a.b.h(b,e+"keyadded",(function(e){(e=Af(a,e.sessionId))&&(Sf(e,"usable"),e.a&&e.a.resolve(),e.a=null)})),a.b.h(b,e+"keyerror",(function(e){var t=Af(a,e.sessionId);t&&t.handleError(e)})))}function Af(a,b){var e=a.f.get(b);return e||((e=a.c.shift())?(e.sessionId=b,a.f.set(b,e),e):null)}function wf(a,b,e){ne.call(this),this.f=a,this.l=!1,this.a=this.b=null,this.c=b,this.g=e,this.sessionId="",this.expiration=NaN,this.closed=new at,this.keyStatuses=new If}function tr(a,b,e){if(a.l)return Promise.reject(Error("The session is already initialized."));a.l=!0;try{if("persistent-license"==a.g)if(e)var t=et(ft("LOAD_SESSION|"+e));else{var n=ft("PERSISTENT|");t=At(n,b)}else t=et(b)}catch(e){return Promise.reject(e)}a.b=new at;var r=vf("generateKeyRequest");try{a.f[r](a.c,t)}catch(e){if("InvalidStateError"!=e.name)return a.b=null,Promise.reject(e);new kt((function(){try{a.f[r](a.c,t)}catch(e){a.b.reject(e),a.b=null}})).P(.01)}return a.b}function Sf(a,b){var e=a.keyStatuses;e.size=null==b?0:1,e.a=b,e=new X("keystatuseschange"),a.dispatchEvent(e)}function If(){this.size=0,this.a=void 0}Vd((function(){kh()}),-1),Vd((function(){if(e.Document){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen,(a=Document.prototype).exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",qd),document.addEventListener("webkitfullscreenerror",qd),document.addEventListener("mozfullscreenchange",qd),document.addEventListener("mozfullscreenerror",qd),document.addEventListener("MSFullscreenChange",qd),document.addEventListener("MSFullscreenError",qd)}})),Vd((function(){gn("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Xd)})),Vd((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Vd((function(){})),Vd((function(){var a=vn();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){var e=b.split(/ *; */);return e.shift(),e.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(b):a(b)}}():a?(function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"mp2t"!=b.split(/ *; */)[0].split("/")[1].toLowerCase()&&a(b)}}(),12>=a?(Wd(),function(){var a=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(b,e){return a.call(this,b,e-.001)}}()):Wd()):(gn("Tizen 2")||gn("Tizen 3")||gn("Tizen 4"))&&function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"opus"!=ln(b)&&a(b)}}())})),Qd.prototype.createMediaKeys=function(){var a=new Zd(this.keySystem);return Promise.resolve(a)},Qd.prototype.getConfiguration=function(){return this.a},Zd.prototype.createSession=function(a){if("temporary"!=(a=a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new tf(this.a,a)},Zd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},T(tf,ne),(p=tf.prototype).generateRequest=function(a,b){var e=this;this.a=new at;try{var t=this.g.createSession("video/mp4",et(b));this.f=t,this.sessionId=t.sessionId||"",this.b.h(this.f,"webkitkeymessage",(function(t){e.a&&(e.a.resolve(),e.a=null),t=new X("message",{messageType:null==e.keyStatuses.a?"license-request":"license-renewal",message:Ze(t.message)}),e.dispatchEvent(t)})),this.b.h(t,"webkitkeyadded",(function(){e.c&&(nf(e,"usable"),e.c.resolve(),e.c=null)})),this.b.h(t,"webkitkeyerror",(function(){var t=Error("EME PatchedMediaKeysApple key error");if(t.errorCode=e.f.error,null!=e.a)e.a.reject(t),e.a=null;else if(null!=e.c)e.c.reject(t),e.c=null;else switch(e.f.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:nf(e,"output-not-allowed");break;default:nf(e,"internal-error")}})),nf(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(a){this.c=new at;try{this.f.update(et(a))}catch(e){this.c.reject(e)}return this.c},p.close=function(){try{this.f.close(),this.closed.resolve(),this.b.yb()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(p=rf.prototype).forEach=function(a){this.a&&a(this.a,Vn.value())},p.get=function(a){if(this.has(a))return this.a},p.has=function(a){var b=Vn.value();return!(!this.a||!Je(a,b))},p.entries=function(){},p.keys=function(){},p.values=function(){},Vd((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$d,e.MediaKeys=Zd,e.MediaKeySystemAccess=Qd,navigator.requestMediaKeySystemAccess=Yd)})),sf.prototype.createMediaKeys=function(){var a=new cf(this.keySystem);return Promise.resolve(a)},sf.prototype.getConfiguration=function(){return this.a},cf.prototype.createSession=function(a){if("temporary"!=(a=a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new br(this.a,a)},cf.prototype.setServerCertificate=function(){return Promise.resolve(!1)},T(br,ne),(p=br.prototype).generateRequest=function(a,b){var e=this;this.a=new at;try{this.f=this.g.createSession("video/mp4",et(b),null),this.b.h(this.f,"mskeymessage",(function(t){e.a&&(e.a.resolve(),e.a=null),t=new X("message",{messageType:null==e.keyStatuses.a?"license-request":"license-renewal",message:Ze(t.message)}),e.dispatchEvent(t)})),this.b.h(this.f,"mskeyadded",(function(){e.a?(df(e,"usable"),e.a.resolve(),e.a=null):e.c&&(df(e,"usable"),e.c.resolve(),e.c=null)})),this.b.h(this.f,"mskeyerror",(function(){var t=Error("EME PatchedMediaKeysMs key error");if(t.errorCode=e.f.error,null!=e.a)e.a.reject(t),e.a=null;else if(null!=e.c)e.c.reject(t),e.c=null;else switch(e.f.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:df(e,"output-not-allowed");break;default:df(e,"internal-error")}})),df(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(a){this.c=new at;try{this.f.update(et(a))}catch(e){this.c.reject(e)}return this.c},p.close=function(){try{this.f.close(),this.closed.resolve(),this.b.yb()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(p=ff.prototype).forEach=function(a){this.a&&a(this.a,Vn.value())},p.get=function(a){if(this.has(a))return this.a},p.has=function(a){var b=Vn.value();return!(!this.a||!Je(a,b))},p.entries=function(){},p.keys=function(){},p.values=function(){},Vd((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=cf,e.MediaKeySystemAccess=sf,navigator.requestMediaKeySystemAccess=af,HTMLMediaElement.prototype.setMediaKeys=uf)})),mf.prototype.createSession=function(){},mf.prototype.setServerCertificate=function(){},hr.prototype.getConfiguration=function(){},hr.prototype.createMediaKeys=function(){},Vd((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=hf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=pf,e.MediaKeys=mf,e.MediaKeySystemAccess=hr)}),-10),bf.prototype.createMediaKeys=function(){var a=new Ef(this.a);return Promise.resolve(a)},bf.prototype.getConfiguration=function(){return this.b},Ef.prototype.createSession=function(a){if("temporary"!=(a=a||"temporary")&&"persistent-license"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");var b=this.a||document.createElement("video");return b.src||(b.src="about:blank"),a=new wf(b,this.g,a),this.c.push(a),a},Ef.prototype.setServerCertificate=function(){return Promise.resolve(!1)},T(wf,ne),(p=wf.prototype).handleError=function(a){var b=Error("EME v0.1b key error"),e=a.errorCode;e.systemCode=a.systemCode,b.errorCode=e,!a.sessionId&&this.b?(45==a.systemCode&&(b.message="Unsupported session type."),this.b.reject(b),this.b=null):a.sessionId&&this.a?(this.a.reject(b),this.a=null):(b=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Sf(this,"output-restricted"):Sf(this,1==b?"expired":"internal-error"))},p.generateRequest=function(a,b){return tr(this,b,null)},p.load=function(a){return"persistent-license"==this.g?tr(this,null,a):Promise.reject(Error("Not a persistent session."))},p.update=function(a){var b=new at;return function e(a,b,t){if(a.a)a.a.then((function(){return e(a,b,t)})).catch((function(){return e(a,b,t)}));else{if(a.a=b,"webkit-org.w3.clearkey"==a.c){var n=ut(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(a.a.reject(Error("Response is not a valid JSON Web Key Set.")),a.a=null),n=bt(r.keys[0].k),r=bt(r.keys[0].kid)}else n=et(t),r=null;var o=vf("addKey");try{a.f[o](a.c,n,r,a.sessionId)}catch(e){a.a.reject(e),a.a=null}}}(this,b,a),b},p.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var a=vf("cancelKeyRequest");try{this.f[a](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},p.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(p=If.prototype).forEach=function(a){this.a&&a(this.a,Vn.value())},p.get=function(a){if(this.has(a))return this.a},p.has=function(a){var b=Vn.value();return!(!this.a||!Je(a,b))},p.entries=function(){},p.keys=function(){},p.values=function(){};var xf="";function kf(a){if("picture-in-picture"==(a=a.target).webkitPresentationMode){document.pictureInPictureElement=a;var b=new Event("enterpictureinpicture");a.dispatchEvent(b)}else document.pictureInPictureElement==a&&(document.pictureInPictureElement=null),b=new Event("leavepictureinpicture"),a.dispatchEvent(b)}function Cf(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Nf(){var a=document.pictureInPictureElement;return a?(a.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Mf(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function _f(a){a?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Rf(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Lf(a,b,t){return new e.TextTrackCue(a,b,t)}function Pf(a,b,t){return new e.TextTrackCue(a+"-"+b+"-"+t,a,b,t)}function Df(){}function Of(a){var b=[];if(!a)return b;for(var e=q(a.childNodes),t=e.next();!t.done;t=e.next())(t=t.value).nodeType==Node.ELEMENT_NODE&&"br"!==t.nodeName&&(t=Of(t),b=b.concat(t));return b.length||b.push(a),b}function Uf(a,b,e,t,n,r,g,o,c,l){if(c&&"br"==a.nodeName)return(a=new hi(0,0,"")).spacer=!0,a;var d=/^[\s\n]*$/.test(a.textContent),f=a.nodeType==Node.ELEMENT_NODE&&!a.hasAttribute("begin")&&!a.hasAttribute("end");if(a.nodeType!=Node.ELEMENT_NODE||f&&d||f&&!c)return null;d=Vf(a.getAttribute("begin"),e),f=Vf(a.getAttribute("end"),e);var h=Vf(a.getAttribute("dur"),e);if(null==f&&null!=h&&(f=d+h),!c&&(null==d||null==f))throw new it(2,2,2001);if(d=c&&null==d?0:d+b,f=c&&null==f?0:f+b,h="",c=[],Array.from(a.childNodes).some((function(e){return e.nodeType==Node.TEXT_NODE&&/\S+/.test(e.textContent)})))h=function e(a,b){for(var t="",n=q(a.childNodes),r=n.next();!r.done;r=n.next())"br"==(r=r.value).nodeName&&a.childNodes[0]!==r?t+="\n":r.childNodes&&0<r.childNodes.length?t+=e(r,b):b?t+=r=(r=r.textContent.trim()).replace(/\s+/g," "):t+=r.textContent;return t}(a,o);else for(var u=q(a.childNodes),m=u.next();!m.done;m=u.next())(m=Uf(m.value,b,e,t,n,r,g,o,!0,l))&&(m.startTime=m.startTime||d,m.endTime=m.endTime||f,c.push(m));if((b=new hi(d,f,h)).nestedCues=c,l&&(b.cellResolution=l),(r=zf(a,"region",r,"")[0])&&r.getAttribute("xml:id")){var v=r.getAttribute("xml:id");b.region=g.filter((function(e){return e.id==v}))[0]}return function(a,b,e,t,n){"rtl"==Ff(b,e,n,"direction")&&(a.direction="rtl");var r=Ff(b,e,n,"writingMode");"tb"==r||"tblr"==r?a.writingMode="vertical-lr":"tbrl"==r?a.writingMode="vertical-rl":"rltb"==r||"rl"==r?a.direction="rtl":r&&(a.direction=Ei),(r=Ff(b,e,n,"textAlign"))?(a.positionAlign=sh[r],a.lineAlign=oh[r],a.textAlign=gi[r.toUpperCase()]):a.textAlign="start",(r=Ff(b,e,n,"displayAlign"))&&(a.displayAlign=bi[r.toUpperCase()]);(r=Ff(b,e,n,"color"))&&(a.color=r);(r=Ff(b,e,n,"backgroundColor"))&&(a.backgroundColor=r);(r=Ff(b,e,n,"border"))&&(a.border=r);(r=Ff(b,e,n,"fontFamily"))&&(a.fontFamily=r);(r=Ff(b,e,n,"fontWeight"))&&"bold"==r&&(a.fontWeight=700),(r=Ff(b,e,n,"wrapOption"))&&"noWrap"==r&&(a.wrapLine=!1),(r=Ff(b,e,n,"lineHeight"))&&r.match(Jf)&&(a.lineHeight=r),(r=Ff(b,e,n,"fontSize"))&&(r.match(Jf)||r.match($f))&&(a.fontSize=r),(r=Ff(b,e,n,"fontStyle"))&&(a.fontStyle=ki[r.toUpperCase()]);if(t){r=t.getAttribute("imagetype");var g=t.getAttribute("encoding");t=t.textContent.trim(),"PNG"==r&&"Base64"==g&&t&&(a.backgroundImage="data:image/png;base64,"+t)}(t=Ff(b,e,n,"letterSpacing"))&&t.match(Jf)&&(a.letterSpacing=t),(t=Ff(b,e,n,"linePadding"))&&t.match(Jf)&&(a.linePadding=t),(t=Ff(b,e,n,"opacity"))&&(a.opacity=parseFloat(t));(e=jf(e,n,"textDecoration"))&&Bf(a,e),(b=Gf(b,n,"textDecoration"))&&Bf(a,b)}(b,a,r,t=zf(a,"backgroundImage",t,"#","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt")[0],n),b}function Bf(a,b){for(var e=q(b.split(" ")),t=e.next();!t.done;t=e.next())switch(t.value){case"underline":a.textDecoration.includes("underline")||a.textDecoration.push("underline");break;case"noUnderline":a.textDecoration.includes("underline")&&Ft(a.textDecoration,"underline");break;case"lineThrough":a.textDecoration.includes("lineThrough")||a.textDecoration.push("lineThrough");break;case"noLineThrough":a.textDecoration.includes("lineThrough")&&Ft(a.textDecoration,"lineThrough");break;case"overline":a.textDecoration.includes("overline")||a.textDecoration.push("overline");break;case"noOverline":a.textDecoration.includes("overline")&&Ft(a.textDecoration,"overline")}}function Ff(a,b,e,t){return(a=Gf(a,e,t))?a:jf(b,e,t)}function jf(a,b,e){if(!a)return null;for(var t=Of(a),n=(t=q(t)).next();!n.done;n=t.next())if(n=Tu(n.value,"http://www.w3.org/ns/ttml#styling",e))return n;return Kf(a,b,e)}function Gf(a,b,e){var t=Tu(a,"http://www.w3.org/ns/ttml#styling",e);return t||Kf(a,b,e)}function Kf(a,b,e){a=zf(a,"style",b,"");for(var t=null,n=0;n<a.length;n++){var r=Tu(a[n],"urn:ebu:tt:style",e);r||(r=Tu(a[n],"http://www.w3.org/ns/ttml#styling",e)),r||(r=Gf(a[n],b,e)),r&&(t=r)}return t}function zf(a,b,e,t,n){var r=[];if(!a||1>e.length)return r;var g=a;for(a=null;g&&!(a=n?Tu(g,n,b):g.getAttribute(b))&&(g=g.parentNode)instanceof Element;);if(b=a)for(n=(b=q(b.split(" "))).next();!n.done;n=b.next())for(n=n.value,g=(a=q(e)).next();!g.done;g=a.next())if(t+(g=g.value).getAttribute("xml:id")==n){r.push(g);break}return r}function Vf(a,b){var e=null;if(Zf.test(a)){e=Zf.exec(a);var t=Number(e[1]),n=Number(e[2]),r=Number(e[3]),g=Number(e[4]);e=(r+=(g+=(Number(e[5])||0)/b.b)/b.frameRate)+60*n+3600*t}else eh.test(a)?e=Hf(eh,a):nh.test(a)?e=Hf(nh,a):ih.test(a)?(e=ih.exec(a),e=Number(e[1])/b.frameRate):rh.test(a)?(e=rh.exec(a),e=Number(e[1])/b.a):ah.test(a)&&(e=Hf(ah,a));return e}function Hf(a,b){var e=a.exec(b);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function qf(a,b,e,t){this.frameRate=Number(a)||30,this.b=Number(b)||1,this.a=Number(t),0==this.a&&(this.a=a?this.frameRate*this.b:1),e&&(a=/^(\d+) (\d+)$/g.exec(e))&&(this.frameRate*=Number(a[1])/Number(a[2]))}Vd((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)xf="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=gf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=yf,e.MediaKeys=Ef,e.MediaKeySystemAccess=bf}})),Vd((function(){if(e.HTMLVideoElement){var a=HTMLVideoElement.prototype;a.requestPictureInPicture&&document.exitPictureInPicture||!a.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,a.requestPictureInPicture=Cf,Object.defineProperty(a,"disablePictureInPicture",{get:Mf,set:_f,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Nf,document.addEventListener("webkitpresentationmodechanged",kf,!0))}})),Vd((function(){if(e.HTMLMediaElement){var a=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var b=a.apply(this);return b&&b.catch((function(){})),b}}})),Vd((function(){if(e.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=Rf)}})),Vd((function(){if(!e.VTTCue&&e.TextTrackCue){var a=null,b=TextTrackCue.length;if(3==b)a=Lf;else if(6==b)a=Pf;else{try{var t=!!Lf(1,2,"")}catch(e){t=!1}t&&(a=Lf)}a&&(e.VTTCue=function(e,t,n){return a(e,t,n)})}})),Df.prototype.parseInit=function(){},Df.prototype.parseMedia=function(a,b){var e=ut(a),t=[],n=new DOMParser,r=null;if(""==e)return t;try{r=n.parseFromString(e,"text/xml")}catch(e){throw new it(2,2,2005,"Failed to parse TTML.")}if(r){if(e=r.getElementsByTagName("parsererror")[0])throw new it(2,2,2005,e.textContent);if(!(n=r.getElementsByTagName("tt")[0]))throw new it(2,2,2005,"TTML does not contain <tt> tag.");var g=Tu(n,"http://www.w3.org/ns/ttml#parameter","frameRate"),o=Tu(n,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),c=Tu(n,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=Tu(n,"http://www.w3.org/ns/ttml#parameter","tickRate"),d=Tu(n,"http://www.w3.org/ns/ttml#parameter","cellResolution");if(r=n.getAttribute("xml:space")||"default",e=Tu(n,"http://www.w3.org/ns/ttml#styling","extent"),"default"!=r&&"preserve"!=r)throw new it(2,2,2005,"Invalid xml:space value: "+r);r="default"==r,g=new qf(g,o,c,l),d=d&&(d=/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,o=Of(n.getElementsByTagName("metadata")[0]),c=Of(n.getElementsByTagName("styling")[0]);for(var f=[],h=q(l=Of(n.getElementsByTagName("layout")[0])),u=h.next();!u.done;u=h.next()){var m=u.value,v=e;u=new Ci;var y,E,T=m.getAttribute("xml:id");if(T)u.id=T,T=null,v&&(T=Yf.exec(v)||Qf.exec(v)),v=T?Number(T[1]):null,T=T?Number(T[2]):null,(y=jf(m,c,"extent"))&&(null!=(y=(E=Yf.exec(y))||Qf.exec(y))&&(u.width=null!=v?100*Number(y[1])/v:Number(y[1]),u.height=null!=T?100*Number(y[2])/T:Number(y[2]),u.widthUnits=E||null!=v?Ni:0,u.heightUnits=E||null!=T?Ni:0)),(m=jf(m,c,"origin"))&&(null!=(y=(E=Yf.exec(m))||Qf.exec(m))&&(u.viewportAnchorX=null!=v?100*Number(y[1])/v:Number(y[1]),u.viewportAnchorY=null!=T?100*Number(y[2])/T:Number(y[2]),u.viewportAnchorUnits=E||null!=v?Ni:0));else u=null;u&&f.push(u)}for(e=function e(a){if(!a)return[];for(var b=[],t=(a=q(a.childNodes)).next();!t.done;t=a.next())(t=t.value)instanceof Element&&(t.hasAttribute("begin")?b.push(t):b=b.concat(e(t)));return b}(n.getElementsByTagName("body")[0]),n=(e=q(e)).next();!n.done;n=e.next())(n=Uf(n.value,b.periodStart,g,o,c,l,f,r,!1,d))&&t.push(n)}return t},H("shaka.text.TtmlTextParser",Df),Df.prototype.parseMedia=Df.prototype.parseMedia,Df.prototype.parseInit=Df.prototype.parseInit;var Xf,Wf,Yf=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,$f=/^(\d{1,2}(?:\.\d+)?|100)%$/,Jf=/^(\d+px|\d+em|\d*\.?\d+c)$/,Qf=/^(\d+)px (\d+)px$/,Zf=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,eh=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,nh=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,ih=/^(\d*(?:\.\d*)?)f$/,rh=/^(\d*(?:\.\d*)?)t$/,ah=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,oh={left:wi,center:"center",right:"end",start:wi,end:"end"},sh={left:"line-left",center:"center",right:"line-right"};function uh(){this.s=new Df}function ch(){}function lh(a,b,e){var t;(t=/^align:(start|middle|center|end|left|right)$/.exec(b))?(b=t[1],a.textAlign="middle"==b?vi:gi[b.toUpperCase()]):(t=/^vertical:(lr|rl)$/.exec(b))?a.writingMode="lr"==t[1]?"vertical-lr":"vertical-rl":(t=/^size:([\d.]+)%$/.exec(b))?a.size=Number(t[1]):(t=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))?(a.position=Number(t[1]),t[2]&&(b=t[2],a.positionAlign="line-left"==b||"start"==b?"line-left":"line-right"==b||"end"==b?"line-right":"center")):(t=/^region:(.*)$/.exec(b))?(b=function(a,b){var e=a.filter((function(e){return e.id==b}));return e.length?e[0]:null}(e,t[1]))&&(a.region=b):(e=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b))?(a.lineInterpretation=1,a.line=Number(e[1]),e[2]&&(a.lineAlign=Si[e[2].toUpperCase()])):(e=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))&&(a.lineInterpretation=Ai,a.line=Number(e[1]),e[2]&&(a.lineAlign=Si[e[2].toUpperCase()]))}function dh(a){if(null==(a=Xc(a,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var b=Number(a[2]),e=Number(a[3]);return 59<b||59<e?null:Number(a[4])/1e3+e+60*b+3600*(Number(a[1])||0)}function fh(){this.a=null}function hh(a,b,e){var t,n,r;return(new Wn).box("payl",Jn((function(g){t=ut(g)}))).box("iden",Jn((function(g){n=ut(g)}))).box("sttg",Jn((function(g){r=ut(g)}))).parse(a),t?function(a,b,e,t,n){if(a=new hi(t,n,a),b&&(a.id=b),e)for(b=new Hc(e),e=Wc(b);e;)lh(a,e,[]),qc(b),e=Wc(b);return a}(t,n,r,b,e):null}function ph(){}function mh(){Xf?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Xf=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=vh):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function vh(a,b){var e,t=this;return B((function(n){return 1==n.a?(console.assert(t==navigator,'bad "this" for requestMediaKeySystemAccess'),I(n,Xf.call(t,a,b),2)):Ih(e=n.b)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Xf,n.return(e)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=gh,n.return(gh.call(t,a,b)))}))}function gh(a,b){var e,t,n,g,r,o,c,l,d,f,h=this;return B((function(u){if(1==u.a){for(console.assert(h==navigator,'bad "this" for requestMediaKeySystemAccess'),e=Sh(a),t=[],n=q(b),g=n.next();!g.done;g=n.next())r=g.value,o=yh(r.videoCapabilities,e),c=yh(r.audioCapabilities,e),r.videoCapabilities&&r.videoCapabilities.length&&!o.length||r.audioCapabilities&&r.audioCapabilities.length&&!c.length||((l=Object.assign({},r)).videoCapabilities=o,l.audioCapabilities=c,t.push(l));if(!t.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return I(u,Xf.call(h,a,t),2)}return f=u.b,u.return(new wh(f,e))}))}function yh(a,b){return a?a.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==b})):a}function bh(){}function Eh(){Wf?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Wf=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Th):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Th(a){var e,b=this;return B((function(t){return 1==t.a?(console.assert(b==navigator.mediaCapabilities,'bad "this" for decodingInfo'),I(t,Wf.call(b,a),2)):(e=t.b,a.keySystemConfiguration&&e.keySystemAccess?Ih(e.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Wf,t.return(e)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Ah,t.return(Ah.call(b,a))):t.return(e))}))}function Ah(a){var e,t,n,r,g,o,c,b=this;return B((function(l){return 1==l.a?(console.assert(b==navigator.mediaCapabilities,'bad "this" for decodingInfo'),e=null,a.keySystemConfiguration&&(t=a.keySystemConfiguration,n=t.keySystem,r=t.audio&&t.audio.encryptionScheme,g=t.video&&t.video.encryptionScheme,e=Sh(n),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:a},r&&r!=e||g&&g!=e)?l.return(o):I(l,Wf.call(b,a),2)):((c=l.b).keySystemAccess&&(c.keySystemAccess=new wh(c.keySystemAccess,e)),l.return(c))}))}function wh(a,b){this.b=a,this.a=b,this.keySystem=a.keySystem}function Sh(a){return a.startsWith("com.widevine")||a.startsWith("com.microsoft")||a.startsWith("com.adobe")||a.startsWith("org.w3")?"cenc":a.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",a,"Please contribute!"),null)}function Ih(a){var b=(a=a.getConfiguration()).audioCapabilities&&a.audioCapabilities[0];return!(!(a=a.videoCapabilities&&a.videoCapabilities[0]||b)||void 0===a.encryptionScheme)}function xh(){}function kh(){mh(),Eh()}Pi["application/ttml+xml"]=function(){return new Df},uh.prototype.parseInit=function(a){var b=!1;if((new Wn).box("moov",Yn).box("trak",Yn).box("mdia",Yn).box("minf",Yn).box("stbl",Yn).ba("stsd",$n).box("stpp",(function(e){b=!0,e.parser.stop()})).parse(a),!b)throw new it(2,2,2007)},uh.prototype.parseMedia=function(a,b){var e=this,t=!1,n=[];if((new Wn).box("mdat",Jn((function(r){t=!0,n=n.concat(e.s.parseMedia(r,b))}))).parse(a,!1),!t)throw new it(2,2,2007);return n},H("shaka.text.Mp4TtmlParser",uh),uh.prototype.parseMedia=uh.prototype.parseMedia,uh.prototype.parseInit=uh.prototype.parseInit,Pi['application/mp4; codecs="stpp"']=function(){return new uh},Pi['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new uh},Pi['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new uh},ch.prototype.parseInit=function(){},ch.prototype.parseMedia=function(a,b){var e=ut(a),t=(e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(t[0]))throw new it(2,2,2e3);if(e=b.periodStart,t[0].includes("X-TIMESTAMP-MAP")){var n=t[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=t[0].match(/MPEGTS:(\d+)/m);if(n&&r){if(null==(e=dh(new Hc(n[1]))))throw new it(2,2,2e3);for(r=Number(r[1]),n=b.segmentStart;95443.7176888889<=n;)n-=95443.7176888889,r+=8589934592;e=b.periodStart+r/9e4-e}}r=[];for(var g=(n=q(t[0].split("\n"))).next();!g.done;g=n.next())if(g=g.value,/^Region:/.test(g)){g=new Hc(g);var o=new Ci;Wc(g),qc(g);for(var c=Wc(g);c;){var l=o,d=c;(c=/^id=(.*)$/.exec(d))?l.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(d))?l.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(d))?(l.height=Number(c[1]),l.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(l.regionAnchorX=Number(c[1]),l.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(l.viewportAnchorX=Number(c[1]),l.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(d)&&(l.scroll="up"),qc(g),c=Wc(g)}r.push(o)}for(n=[],g=(t=q(t.slice(1))).next();!g.done;g=t.next()){if(c=e,1==(l=g.value.split("\n")).length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])g=null;else{g=null,l[0].includes("--\x3e")||(g=l[0],l.splice(0,1)),d=dh(o=new Hc(l[0]));var f=Xc(o,/[ \t]+--\x3e[ \t]+/g),h=dh(o);if(null==d||null==f||null==h)throw new it(2,2,2001);for(l=new hi(d+c,h+c,l.slice(1).join("\n").trim()),qc(o),c=Wc(o);c;)lh(l,c,r),qc(o),c=Wc(o);null!=g&&(l.id=g),g=l}g&&n.push(g)}return n},H("shaka.text.VttTextParser",ch),ch.prototype.parseMedia=ch.prototype.parseMedia,ch.prototype.parseInit=ch.prototype.parseInit,Pi["text/vtt"]=function(){return new ch},Pi['text/vtt; codecs="vtt"']=function(){return new ch},Pi['text/vtt; codecs="wvtt"']=function(){return new ch},fh.prototype.parseInit=function(a){var b=this,e=!1;if((new Wn).box("moov",Yn).box("trak",Yn).box("mdia",Yn).ba("mdhd",(function(e){0==e.version?(e.reader.skip(4),e.reader.skip(4),b.a=e.reader.N(),e.reader.skip(4)):(e.reader.skip(8),e.reader.skip(8),b.a=e.reader.N(),e.reader.skip(8)),e.reader.skip(4)})).box("minf",Yn).box("stbl",Yn).ba("stsd",$n).box("wvtt",(function(){e=!0})).parse(a),!this.a)throw new it(2,2,2008);if(!e)throw new it(2,2,2008)},fh.prototype.parseMedia=function(a,b){if(!this.a)throw new it(2,2,2008);var e,t=0,n=[],r=[],g=!1,o=!1,c=!1,l=null;if((new Wn).box("moof",Yn).box("traf",Yn).ba("tfdt",(function(e){g=!0,t=0==e.version?e.reader.N():e.reader.Yb()})).ba("tfhd",(function(e){var t=e.flags;(e=e.reader).skip(4),1&t&&e.skip(8),2&t&&e.skip(4),l=8&t?e.N():null})).ba("trun",(function(e){o=!0;var t=e.version,r=e.flags,c=(e=e.reader).N();1&r&&e.skip(4),4&r&&e.skip(4);for(var l=[],d=(c=q(ae(c))).next();!d.done;d=c.next())d={duration:null,sampleSize:null,Wd:null},256&r&&(d.duration=e.N()),512&r&&(d.sampleSize=e.N()),1024&r&&e.skip(4),2048&r&&(d.Wd=0==t?e.N():e.Ee()),l.push(d);n=l})).box("mdat",Jn((function(t){c=!0,e=t}))).parse(a,!1),!c&&!g&&!o)throw new it(2,2,2008);for(var d=t,f=new Hn(e,0),h=q(n),u=h.next();!u.done;u=h.next()){var m=(u=u.value).duration||l,v=u.Wd?t+u.Wd:d;d=v+(m||0);var y=0;do{var E=f.N();y+=E;var T=null;"vttc"==Zn(f.N())?8<E&&(T=f.xb(E-8)):f.skip(E-8),m&&T&&(E=hh(T,b.periodStart+v/this.a,b.periodStart+d/this.a),r.push(E))}while(u.sampleSize&&y<u.sampleSize)}return r.filter(Ce)},H("shaka.text.Mp4VttParser",fh),fh.prototype.parseMedia=fh.prototype.parseMedia,fh.prototype.parseInit=fh.prototype.parseInit,Pi['application/mp4; codecs="wvtt"']=function(){return new fh},H("EmeEncryptionSchemePolyfill",ph),ph.install=mh,H("McEncryptionSchemePolyfill",bh),bh.install=Eh,wh.prototype.getConfiguration=function(){var a=this.b.getConfiguration();if(a.videoCapabilities)for(var b=q(a.videoCapabilities),e=b.next();!e.done;e=b.next())e.value.encryptionScheme=this.a;if(a.audioCapabilities)for(e=(b=q(a.audioCapabilities)).next();!e.done;e=b.next())e.value.encryptionScheme=this.a;return a},wh.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},H("EncryptionSchemePolyfills",xh),xh.install=kh,void 0!==n&&n.exports&&(n.exports=xh);for(var Ch={ach:{i:"Lwo",j:"Acholi"},ady:{i:"",j:"Adyghe"},af:{i:"Afrikaans",j:"Afrikaans"},"af-NA":{i:"Afrikaans (Namibia)",j:"Afrikaans (Namibia)"},"af-ZA":{i:"Afrikaans (South Africa)",j:"Afrikaans (South Africa)"},ak:{i:"Ti",j:"Akan"},ar:{i:"",j:"Arabic"},"ar-AR":{i:"",j:"Arabic"},"ar-MA":{i:"",j:"Arabic (Morocco)"},"ar-SA":{i:" ()",j:"Arabic (Saudi Arabia)"},"ay-BO":{i:"Aymar aru",j:"Aymara"},az:{i:"Azrbaycan dili",j:"Azerbaijani"},"az-AZ":{i:"Azrbaycan dili",j:"Azerbaijani"},"be-BY":{i:"",j:"Belarusian"},bg:{i:"",j:"Bulgarian"},"bg-BG":{i:"",j:"Bulgarian"},bn:{i:"",j:"Bengali"},"bn-IN":{i:" ()",j:"Bengali (India)"},"bn-BD":{i:"()",j:"Bengali (Bangladesh)"},"bs-BA":{i:"Bosanski",j:"Bosnian"},ca:{i:"Catal",j:"Catalan"},"ca-ES":{i:"Catal",j:"Catalan"},cak:{i:"Maya Kaqchikel",j:"Kaqchikel"},"ck-US":{i:" (tsalagi)",j:"Cherokee"},cs:{i:"etina",j:"Czech"},"cs-CZ":{i:"etina",j:"Czech"},cy:{i:"Cymraeg",j:"Welsh"},"cy-GB":{i:"Cymraeg",j:"Welsh"},da:{i:"Dansk",j:"Danish"},"da-DK":{i:"Dansk",j:"Danish"},de:{i:"Deutsch",j:"German"},"de-AT":{i:"Deutsch (sterreich)",j:"German (Austria)"},"de-DE":{i:"Deutsch (Deutschland)",j:"German (Germany)"},"de-CH":{i:"Deutsch (Schweiz)",j:"German (Switzerland)"},dsb:{i:"Dolnoserbina",j:"Lower Sorbian"},el:{i:"",j:"Greek"},"el-GR":{i:"",j:"Greek (Greece)"},en:{i:"English",j:"English"},"en-GB":{i:"English (UK)",j:"English (UK)"},"en-AU":{i:"English (Australia)",j:"English (Australia)"},"en-CA":{i:"English (Canada)",j:"English (Canada)"},"en-IE":{i:"English (Ireland)",j:"English (Ireland)"},"en-IN":{i:"English (India)",j:"English (India)"},"en-PI":{i:"English (Pirate)",j:"English (Pirate)"},"en-UD":{i:"English (Upside Down)",j:"English (Upside Down)"},"en-US":{i:"English (US)",j:"English (US)"},"en-ZA":{i:"English (South Africa)",j:"English (South Africa)"},"en@pirate":{i:"English (Pirate)",j:"English (Pirate)"},eo:{i:"Esperanto",j:"Esperanto"},"eo-EO":{i:"Esperanto",j:"Esperanto"},es:{i:"Espaol",j:"Spanish"},"es-AR":{i:"Espaol (Argentine)",j:"Spanish (Argentina)"},"es-419":{i:"Espaol (Latinoamrica)",j:"Spanish (Latin America)"},"es-CL":{i:"Espaol (Chile)",j:"Spanish (Chile)"},"es-CO":{i:"Espaol (Colombia)",j:"Spanish (Colombia)"},"es-EC":{i:"Espaol (Ecuador)",j:"Spanish (Ecuador)"},"es-ES":{i:"Espaol (Espaa)",j:"Spanish (Spain)"},"es-LA":{i:"Espaol (Latinoamrica)",j:"Spanish (Latin America)"},"es-NI":{i:"Espaol (Nicaragua)",j:"Spanish (Nicaragua)"},"es-MX":{i:"Espaol (Mxico)",j:"Spanish (Mexico)"},"es-US":{i:"Espaol (Estados Unidos)",j:"Spanish (United States)"},"es-VE":{i:"Espaol (Venezuela)",j:"Spanish (Venezuela)"},et:{i:"eesti keel",j:"Estonian"},"et-EE":{i:"Eesti (Estonia)",j:"Estonian (Estonia)"},eu:{i:"Euskara",j:"Basque"},"eu-ES":{i:"Euskara",j:"Basque"},fa:{i:"",j:"Persian"},"fa-IR":{i:"",j:"Persian"},"fb-LT":{i:"Leet Speak",j:"Leet"},ff:{i:"Fulah",j:"Fulah"},fi:{i:"Suomi",j:"Finnish"},"fi-FI":{i:"Suomi",j:"Finnish"},"fo-FO":{i:"Froyskt",j:"Faroese"},fr:{i:"Franais",j:"French"},"fr-CA":{i:"Franais (Canada)",j:"French (Canada)"},"fr-FR":{i:"Franais (France)",j:"French (France)"},"fr-BE":{i:"Franais (Belgique)",j:"French (Belgium)"},"fr-CH":{i:"Franais (Suisse)",j:"French (Switzerland)"},"fy-NL":{i:"Frysk",j:"Frisian (West)"},ga:{i:"Gaeilge",j:"Irish"},"ga-IE":{i:"Gaeilge (Gaelic)",j:"Irish (Gaelic)"},gl:{i:"Galego",j:"Galician"},"gl-ES":{i:"Galego",j:"Galician"},"gn-PY":{i:"Avae'",j:"Guarani"},"gu-IN":{i:"",j:"Gujarati"},"gx-GR":{i:" ",j:"Classical Greek"},he:{i:"",j:"Hebrew"},"he-IL":{i:"",j:"Hebrew"},hi:{i:"",j:"Hindi"},"hi-IN":{i:"",j:"Hindi"},hr:{i:"Hrvatski",j:"Croatian"},"hr-HR":{i:"Hrvatski",j:"Croatian"},hsb:{i:"Hornjoserbina",j:"Upper Sorbian"},ht:{i:"Kreyl",j:"Haitian Creole"},hu:{i:"Magyar",j:"Hungarian"},"hu-HU":{i:"Magyar",j:"Hungarian"},"hy-AM":{i:"",j:"Armenian"},id:{i:"Bahasa Indonesia",j:"Indonesian"},"id-ID":{i:"Bahasa Indonesia",j:"Indonesian"},is:{i:"slenska",j:"Icelandic"},"is-IS":{i:"slenska (Iceland)",j:"Icelandic (Iceland)"},it:{i:"Italiano",j:"Italian"},"it-IT":{i:"Italiano",j:"Italian"},ja:{i:"",j:"Japanese"},"ja-JP":{i:"",j:"Japanese"},"jv-ID":{i:"Basa Jawa",j:"Javanese"},"ka-GE":{i:"",j:"Georgian"},"kk-KZ":{i:"",j:"Kazakh"},km:{i:"",j:"Khmer"},"km-KH":{i:"",j:"Khmer"},kab:{i:"Taqbaylit",j:"Kabyle"},kn:{i:"",j:"Kannada"},"kn-IN":{i:" (India)",j:"Kannada (India)"},ko:{i:"",j:"Korean"},"ko-KR":{i:" ()",j:"Korean (Korea)"},ku:{i:"Kurd",j:"Kurdish"},"ku-TR":{i:"Kurd",j:"Kurdish"},la:{i:"Latin",j:"Latin"},"la-VA":{i:"Latin",j:"Latin"},lb:{i:"Ltzebuergesch",j:"Luxembourgish"},"li-NL":{i:"Lmbrgs",j:"Limburgish"},lt:{i:"Lietuvi",j:"Lithuanian"},"lt-LT":{i:"Lietuvi",j:"Lithuanian"},lv:{i:"Latvieu",j:"Latvian"},"lv-LV":{i:"Latvieu",j:"Latvian"},mai:{i:", ",j:"Maithili"},"mg-MG":{i:"Malagasy",j:"Malagasy"},mk:{i:"",j:"Macedonian"},"mk-MK":{i:" ()",j:"Macedonian (Macedonian)"},ml:{i:"",j:"Malayalam"},"ml-IN":{i:"",j:"Malayalam"},"mn-MN":{i:"",j:"Mongolian"},mr:{i:"",j:"Marathi"},"mr-IN":{i:"",j:"Marathi"},ms:{i:"Bahasa Melayu",j:"Malay"},"ms-MY":{i:"Bahasa Melayu",j:"Malay"},mt:{i:"Malti",j:"Maltese"},"mt-MT":{i:"Malti",j:"Maltese"},my:{i:"",j:"Burmese"},nb:{i:"Norsk (bokml)",j:"Norwegian (bokmal)"},"nb-NO":{i:"Norsk (bokml)",j:"Norwegian (bokmal)"},ne:{i:"",j:"Nepali"},"ne-NP":{i:"",j:"Nepali"},nl:{i:"Nederlands",j:"Dutch"},"nl-BE":{i:"Nederlands (Belgi)",j:"Dutch (Belgium)"},"nl-NL":{i:"Nederlands (Nederland)",j:"Dutch (Netherlands)"},"nn-NO":{i:"Norsk (nynorsk)",j:"Norwegian (nynorsk)"},no:{i:"Norsk",j:"Norwegian"},oc:{i:"Occitan",j:"Occitan"},"or-IN":{i:"",j:"Oriya"},pa:{i:"",j:"Punjabi"},"pa-IN":{i:" ( )",j:"Punjabi (India)"},pl:{i:"Polski",j:"Polish"},"pl-PL":{i:"Polski",j:"Polish"},"ps-AF":{i:"",j:"Pashto"},pt:{i:"Portugus",j:"Portuguese"},"pt-BR":{i:"Portugus (Brasil)",j:"Portuguese (Brazil)"},"pt-PT":{i:"Portugus (Portugal)",j:"Portuguese (Portugal)"},"qu-PE":{i:"Qhichwa",j:"Quechua"},"rm-CH":{i:"Rumantsch",j:"Romansh"},ro:{i:"Romn",j:"Romanian"},"ro-RO":{i:"Romn",j:"Romanian"},ru:{i:"",j:"Russian"},"ru-RU":{i:"",j:"Russian"},"sa-IN":{i:"",j:"Sanskrit"},"se-NO":{i:"Davvismegiella",j:"Northern Smi"},"si-LK":{i:"",j:"Sinhala (Sri Lanka)"},sk:{i:"Slovenina",j:"Slovak"},"sk-SK":{i:"Slovenina (Slovakia)",j:"Slovak (Slovakia)"},sl:{i:"Slovenina",j:"Slovenian"},"sl-SI":{i:"Slovenina",j:"Slovenian"},"so-SO":{i:"Soomaaliga",j:"Somali"},sq:{i:"Shqip",j:"Albanian"},"sq-AL":{i:"Shqip",j:"Albanian"},sr:{i:"",j:"Serbian"},"sr-RS":{i:" (Serbia)",j:"Serbian (Serbia)"},su:{i:"Basa Sunda",j:"Sundanese"},sv:{i:"Svenska",j:"Swedish"},"sv-SE":{i:"Svenska",j:"Swedish"},sw:{i:"Kiswahili",j:"Swahili"},"sw-KE":{i:"Kiswahili",j:"Swahili (Kenya)"},ta:{i:"",j:"Tamil"},"ta-IN":{i:"",j:"Tamil"},te:{i:"",j:"Telugu"},"te-IN":{i:"",j:"Telugu"},tg:{i:" ",j:"Tajik"},"tg-TJ":{i:"",j:"Tajik"},th:{i:"",j:"Thai"},"th-TH":{i:" ()",j:"Thai (Thailand)"},tl:{i:"Filipino",j:"Filipino"},"tl-PH":{i:"Filipino",j:"Filipino"},tlh:{i:"tlhIngan-Hol",j:"Klingon"},tr:{i:"Trke",j:"Turkish"},"tr-TR":{i:"Trke",j:"Turkish"},"tt-RU":{i:"",j:"Tatar"},uk:{i:"",j:"Ukrainian"},"uk-UA":{i:"",j:"Ukrainian"},ur:{i:"",j:"Urdu"},"ur-PK":{i:"",j:"Urdu"},uz:{i:"O'zbek",j:"Uzbek"},"uz-UZ":{i:"O'zbek",j:"Uzbek"},vi:{i:"Ting Vit",j:"Vietnamese"},"vi-VN":{i:"Ting Vit",j:"Vietnamese"},"xh-ZA":{i:"isiXhosa",j:"Xhosa"},yi:{i:"",j:"Yiddish"},"yi-DE":{i:" (German)",j:"Yiddish (German)"},zh:{i:"",j:"Chinese"},"zh-HANS":{i:"",j:"Chinese Simplified"},"zh-HANT":{i:"",j:"Chinese Traditional"},"zh-CN":{i:"",j:"Chinese Simplified (China)"},"zh-HK":{i:"",j:"Chinese Traditional (Hong Kong)"},"zh-SG":{i:"",j:"Chinese Simplified (Singapore)"},"zh-TW":{i:"",j:"Chinese Traditional (Taiwan)"},"zu-ZA":{i:"isiZulu",j:"Zulu"}},Nh=q(Object.keys(Ch)),Mh=Nh.next();!Mh.done;Mh=Nh.next()){var _h=Mh.value;Ch[_h.toLowerCase()]=Ch[_h]}function Rh(a,b){var e=this;this.parent=a,this.controls=b,this.eventManager=new en,this.localization=this.controls.Ka,this.player=this.controls.Ob(),this.video=this.controls.rc(),this.adManager=this.player.Pc(),this.ad=b.getAd(),this.eventManager.h(this.adManager,"ad-started",(function(t){e.ad=t.ad})),this.eventManager.h(this.adManager,"ad-stopped",(function(){e.ad=null}))}function Lh(a){return Ph(a,"shaka-back-to-overflow-button")}function Ph(a,b){var e=a.getElementsByClassName(b);return e.length?e[0]:null}function Dh(a){a&&(a=Ph(a,"shaka-chosen-item"))&&a.parentElement.focus()}function Oh(){var a=Pa("i");return a.classList.add("material-icons-round"),a.classList.add("shaka-chosen-item"),a.textContent="done",a.setAttribute("aria-hidden","true"),a}function Uh(a,b){a&&(b?a.classList.remove("shaka-hidden"):a.classList.add("shaka-hidden"))}function Bh(a,b){var e=Math.floor(a/3600),t=Math.floor(a/60%60),n=Math.floor(a%60);return 10>n&&(n="0"+n),n=t+":"+n,b&&(10>t&&(n="0"+n),n=e+":"+n),n}function Fh(a,b){Rh.call(this,a,b);var e=this;this.c=Pa("div"),this.c.classList.add("shaka-ad-counter"),this.parent.appendChild(this.c),this.b=Pa("span"),this.b.classList.add("shaka-ad-counter-span"),this.c.appendChild(this.b),this.a=new kt((function(){var t=Math.round(e.ad.getRemainingTime()),n=e.ad.getDuration();-1!=t&&-1!=n&&(0<t?(t=Bh(n-t,!1)+" / "+Bh(n,!1),1<e.ad.getSequenceLength()?e.b.textContent=t:(n=e.localization.resolve("AD_TIME"),e.b.textContent=n.replace("[AD_TIME]",t))):(e.a.stop(),e.b.textContent=""))})),this.eventManager.h(this.localization,"locale-updated",(function(){})),this.eventManager.h(this.localization,"locale-changed",(function(){})),this.eventManager.h(this.adManager,"ad-started",(function(){e.a.ua(),e.a.Z(.5)})),this.eventManager.h(this.adManager,"ad-stopped",(function(){e.a.stop(),e.b.textContent=""})),this.ad&&(this.a.ua(),this.a.Z(.5))}function jh(a,b){Rh.call(this,a,b);var e=this;this.a=Pa("div"),this.a.classList.add("shaka-ad-position"),Uh(this.a,!1),this.parent.appendChild(this.a),this.b=Pa("span"),this.b.classList.add("shaka-ad-position-span"),this.a.appendChild(this.b),this.eventManager.h(this.localization,"locale-updated",(function(){e.ad&&Gh(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){e.ad&&Gh(e)})),this.eventManager.h(this.adManager,"ad-started",(function(){Gh(e)})),this.eventManager.h(this.adManager,"ad-stopped",(function(){e.b.textContent="",Uh(e.a,!1)})),this.ad&&Gh(this)}function Gh(a){var b=a.ad.getSequenceLength();if(1<b){var e=a.ad.getPositionInSequence();a.b.textContent=a.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(e)).replace("[NUM_ADS]",String(b)),Uh(a.a,!0)}}function Kh(a,b){Rh.call(this,a,b);var e=this;this.button=Da(),this.parent.appendChild(this.button),this.eventManager.h(this.localization,"locale-updated",(function(){zh(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){zh(e)})),this.eventManager.h(this.video,"play",(function(){zh(e),e.a()})),this.eventManager.h(this.video,"pause",(function(){zh(e),e.a()})),this.eventManager.h(this.adManager,"ad-paused",(function(){zh(e),e.a()})),this.eventManager.h(this.adManager,"ad-resumed",(function(){zh(e),e.a()})),this.eventManager.h(this.adManager,"ad-started",(function(){zh(e),e.a()})),this.eventManager.h(this.button,"click",(function(){e.ad?np(e.controls):tp(e.controls)})),this.ad&&(zh(this),this.a())}function zh(a){var b=a.isPaused()?"PLAY":"PAUSE";a.button.setAttribute("aria-label",a.localization.resolve(b))}function Vh(a,b){Kh.call(this,a,b),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.a(),zh(this)}function Hh(a,b,e,t){Rh.call(this,a,b);var n=this;this.container=Pa("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,f(e)),this.a=!1,this.bar=document.createElement("input"),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,f(t)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.h(this.bar,"mousedown",(function(){n.controls.ub()&&(n.a=!0,n.onChangeStart())})),this.eventManager.h(this.bar,"touchstart",(function(e){n.controls.ub()&&(n.a=!0,qh(n,e),n.onChangeStart())})),this.eventManager.h(this.bar,"input",(function(){n.onChange()})),this.eventManager.h(this.bar,"touchmove",(function(e){n.a&&(qh(n,e),n.onChange())})),this.eventManager.h(this.bar,"touchend",(function(e){n.a&&(n.a=!1,qh(n,e),n.onChangeEnd())})),this.eventManager.h(this.bar,"mouseup",(function(){n.a&&(n.a=!1,n.onChangeEnd())}))}function qh(a,b){b.preventDefault();var e=b.changedTouches[0],t=a.bar.getBoundingClientRect(),n=parseFloat(a.bar.min),r=parseFloat(a.bar.max);(e=n+(r-n)/t.width*(e.clientX-t.left))<n?e=n:e>r&&(e=r),a.bar.value=e}function Xh(a,b){Hh.call(this,a,b,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var e=this;this.f=Pa("div"),this.f.classList.add("shaka-ad-markers"),this.container.insertBefore(this.f,this.container.childNodes[0]),this.m=this.controls.m,this.b=new kt((function(){e.video.currentTime=e.getValue()})),this.g=new kt((function(){Yh(e)})),this.l=!1,this.c=[],this.eventManager.h(this.localization,"locale-updated",(function(){return Qh(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){return Qh(e)})),this.eventManager.h(this.adManager,"ad-started",(function(){Uh(e.container,!1)})),this.eventManager.h(this.adManager,"ad-stopped",(function(){Jh(e)&&Uh(e.container,!0)})),this.eventManager.h(this.adManager,"ad-cue-points-changed",(function(t){e.c=t.cuepoints,$h(e)})),this.eventManager.h(this.player,"unloading",(function(){e.c=[],$h(e)})),this.setValue(this.video.currentTime),Wh(this),Qh(this),this.ad&&Uh(this.container,!1)}function Wh(a){var b=a.m.seekBarColors,e=a.getValue(),t=a.video.buffered.length,n=t?a.video.buffered.start(0):0,r=t?a.video.buffered.end(t-1):0,g=a.player.Ia(),o=g.end-g.start;a.setRange(g.start,g.end),Jh(a)?(Uh(a.container,!0),0==t?a.container.style.background=b.base:(t=(Math.max(n,g.start)-g.start)/o||0,r=(Math.min(r,g.end)-g.start)/o||0,e=(Math.min(Math.max(e,g.start),g.end)-g.start)/o||0,a.container.style.background="linear-gradient("+["to right",(a.m.showUnbufferedStart?b.base:b.played)+" "+100*t+"%",b.played+" "+100*t+"%",b.played+" "+100*e+"%",b.buffered+" "+100*e+"%",b.buffered+" "+100*r+"%",b.base+" "+100*r+"%"].join()+")")):Uh(a.container,!1)}function Yh(a){if(a.c.length){for(var b=a.player.Ia(),e=b.end-b.start,t=["to right"],n=[],r=a.m.seekBarColors.adBreaks,g=!1,o=q(a.c),c=o.next();!c.done;c=o.next())if(-1!=(c=c.value).start||c.end||(g=!0),c.start>=b.start&&c.start<b.end&&!(c.end&&c.end>b.end)){var l=(c.start-b.start)/e||0,d=l+.01;c.end&&(d=(c.end-b.start)/e||0),n.push({start:l,end:d})}for(c=(b=q(n)).next();!c.done;c=b.next())e=c.value,t.push("transparent "+100*e.start+"%"),t.push(r+" "+100*e.start+"%"),t.push(r+" "+100*e.end+"%"),t.push("transparent "+100*e.end+"%");g&&(t.push("transparent 99%"),t.push(r+" 99%")),a.f.style.background="linear-gradient("+t.join(",")+")"}else a.f.style.background="transparent"}function $h(a){Yh(a);var b=a.player.Ia();b=b.end-b.start,a.player.S()&&5<b&&a.g.Z(1)}function Jh(a){var b=a.player.Ia();return b=b.end-b.start,!(a.player.S()&&5>b)&&null==a.ad}function Qh(a){a.bar.setAttribute("aria-label",a.localization.resolve("SEEK"))}function Zh(a,b,t,n){ne.call(this);var r=this;this.X=!0,this.m=n,this.l=new Ys(t,a,this.m.castReceiverAppId),this.bb=!0,this.a=this.l.rc(),this.s=t,this.C=this.l.Ob(),this.Sa=a,this.f=b,this.kb=this.C.Pc(),this.o=this.g=null,this.R=!1,this.A=[],this.Jb=[],this.jb=!1,this.V=new kt((function(){r.f.style.cursor="none",r.jb=!1,ap(r)})),this.ia=new kt((function(){r.c.removeAttribute("shown"),r.F.P(2)})),this.F=new kt((function(){for(var e=q(r.A),g=e.next();!g.done;g=e.next())Uh(g.value,!1)})),this.Ta=new kt((function(){r.ub()&&cp(r)})),this.G=null,this.M=[],this.Ka=function(){var a=new Ke("en");return a.Y("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),a.Y("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),a.Y("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),a.Y("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),a.Y("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),a.Y("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),a.Y("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_TIME","Annonce: [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),a.Y("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),a.Y("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),a.Y("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),a.Y("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),a.Y("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),a.Y("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anncio: [AD_TIME]"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),a.Y("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),a.Y("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),a.Y("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),a.Y("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),a.Y("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),a.fe(navigator.languages||[]),a}(),this.b=new en,this.configure(this.m),function(a){a.b.h(a.C,"buffering",(function(){a.X&&Uh(a.$,a.C.vc())})),a.X&&Uh(a.$,a.C.vc()),a.b.h(e,"keydown",(function(b){!function(a,b){a.ka.add(b.key);var t=a.Kc();"Tab"==b.key&&(a.c.classList.add("shaka-keyboard-navigation"),ap(a),a.b.h(e,"mousedown",(function(){a.b.Da(e,"mousedown")}))),"Escape"==b.key&&a.F.ua(),t&&a.ka.has("Tab")&&function(a,b){var e=a.A.filter((function(e){return!e.classList.contains("shaka-hidden")}))[0];if(e.childNodes.length){for(var t=e.firstElementChild;t&&t.classList.contains("shaka-hidden");)t=t.nextElementSibling;for(e=e.lastElementChild;e&&e.classList.contains("shaka-hidden");)e=e.previousElementSibling;var n=document.activeElement;a.ka.has("Shift")?n==t&&(b.preventDefault(),e.focus()):n==e&&(b.preventDefault(),t.focus())}}(a,b)}(a,b)})),a.b.h(e,"click",(function(){return a.tc()})),a.b.h(a.a,"play",(function(){sp(a)})),a.b.h(a.a,"pause",(function(){sp(a)})),a.b.h(a.a,"ended",(function(){sp(a)})),a.b.h(a.f,"mousemove",(function(b){ip(a,b)})),a.b.h(a.f,"touchmove",(function(b){ip(a,b)}),{passive:!0}),a.b.h(a.f,"touchend",(function(b){ip(a,b)}),{passive:!0}),a.b.h(a.f,"mouseleave",(function(){a.G||a.V.ua()})),a.b.h(a.l,"caststatuschanged",(function(){op(a)})),a.b.h(a.f,"keyup",(function(b){var e=document.activeElement,t=!(!e||!e.classList)&&e.classList.contains("shaka-volume-bar"),n=e&&e.classList&&e.classList.contains("shaka-seek-bar");if(a.c.contains(e)&&ip(a,b),a.ka.delete(b.key),a.m.enableKeyboardPlaybackControls)switch(b.key){case"ArrowLeft":t||up(a,a.a.currentTime-5);break;case"ArrowRight":t||up(a,a.a.currentTime+5);break;case"Home":up(a,a.C.Ia().start);break;case"End":up(a,a.C.Ia().end);break;case" ":n&&(a.g?np(a):tp(a))}})),a.b.h(a.kb,"ad-started",(function(b){a.g=b.ad,a.Oe()})),a.b.h(a.kb,"ad-stopped",(function(){a.g=null,a.re()})),screen.orientation&&a.b.h(screen.orientation,"change",(function(){return B((function(b){return I(b,function(a){return B((function(b){return a.a&&0!=a.a.readyState&&!a.l.ea()&&a.m.enableFullscreenOnRotation?screen.orientation.type.includes("landscape")&&!document.fullscreenElement?I(b,a.f.requestFullscreen({navigationUI:"hide"}),0):screen.orientation.type.includes("portrait")&&document.fullscreenElement?I(b,document.exitFullscreen(),0):b.u(0):b.return()}))}(a),0)}))})),a.b.h(document,"fullscreenchange",(function(){a.g&&a.g.resize(a.s.offsetWidth,a.s.offsetHeight)}))}(this),this.ka=new Set,op(this),this.Ta.Z(.125),this.b.h(this.Ka,"locale-changed",(function(e){r.kb.setLocale(e.locales[0])}))}function dt(a){for(var b=q(a.M),e=b.next();!e.done;e=b.next())e.value.release();a.M=[]}function ep(a,b){lp.set(a,b)}function tp(a){a.X&&a.a.duration&&(a.C.ce(),a.a.paused&&!a.R?a.a.play():a.a.pause())}function np(a){a.g&&a.g.isPaused()?a.g.play():a.g&&a.g.pause()}function ip(a,b){"mousemove"==b.type&&(a.c.classList.remove("shaka-keyboard-navigation"),ap(a)),"touchstart"==b.type||"touchmove"==b.type||"touchend"==b.type||"keyup"==b.type?a.G=Date.now():a.G+1e3<Date.now()&&(a.G=null),a.G&&"mousemove"==b.type||(a.f.style.cursor="",a.jb=!0,a.F.stop(),a.ub()||(cp(a),ap(a)),a.V.stop(),"touchend"!=b.type&&"keyup"!=b.type&&a.G||a.V.P(3))}function ap(a){var b=!!a.g&&a.g.isPaused(),t=a.a.paused&&!a.R,n=a.c.classList.contains("shaka-keyboard-navigation");b||!a.g&&t||a.jb||n||function(a){return!!e.matchMedia("hover: hover").matches&&a.Jb.some((function(b){return b.matches(":hover")}))}(a)?(cp(a),a.c.setAttribute("shown","true"),a.ia.stop()):a.ia.P(a.m.fadeDelay)}function op(a){var b=a.l.ea();a.dispatchEvent(new X("caststatuschanged",{Qf:b})),b?a.c.setAttribute("casting","true"):a.c.removeAttribute("casting")}function sp(a){a.a.ended&&!a.a.paused&&a.a.pause(),ap(a)}function up(a,b){a.a.currentTime=b,a.ub()&&cp(a)}function cp(a){if(a.o)if(a.o.setValue(a.a.currentTime),Wh(a.o),a.o.container.classList.contains("shaka-hidden")){var b=q(a.A);for(e=b.next();!e.done;e=b.next())e.value.classList.add("shaka-low-position")}else for(var e=(b=q(a.A)).next();!e.done;e=b.next())e.value.classList.remove("shaka-low-position");a.dispatchEvent(new X("timeandseekrangeupdated"))}Rh.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},H("shaka.ui.Element",Rh),Rh.prototype.release=Rh.prototype.release,T(Fh,Rh),Fh.prototype.release=function(){this.a.stop(),this.a=null,Rh.prototype.release.call(this)},H("shaka.ui.AdCounter",Fh),T(jh,Rh),H("shaka.ui.AdPosition",jh),T(Kh,Rh),Kh.prototype.isPaused=function(){if(this.ad)var a=this.ad.isPaused();else a=(a=this.controls).a.paused&&!a.R;return a},Kh.prototype.a=function(){},H("shaka.ui.PlayButton",Kh),T(Vh,Kh),Vh.prototype.a=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},H("shaka.ui.BigPlayButton",Vh),T(Hh,Rh),(p=Hh.prototype).setRange=function(a,b){this.bar.min=a,this.bar.max=b},p.onChangeStart=function(){},p.onChange=function(){},p.onChangeEnd=function(){},p.getValue=function(){return parseFloat(this.bar.value)},p.setValue=function(a){this.a||(this.bar.value=a)},H("shaka.ui.RangeElement",Hh),Hh.prototype.setValue=Hh.prototype.setValue,Hh.prototype.getValue=Hh.prototype.getValue,Hh.prototype.onChangeEnd=Hh.prototype.onChangeEnd,Hh.prototype.onChange=Hh.prototype.onChange,Hh.prototype.onChangeStart=Hh.prototype.onChangeStart,Hh.prototype.setRange=Hh.prototype.setRange,T(Xh,Hh),Xh.prototype.release=function(){this.b&&(this.b.stop(),this.b=null,this.g.stop(),this.g=null),Hh.prototype.release.call(this)},Xh.prototype.onChangeStart=function(){this.l=!this.video.paused,this.controls.Rd(!0),this.video.pause()},Xh.prototype.onChange=function(){this.video.duration&&(Wh(this),this.b.P(.125))},Xh.prototype.onChangeEnd=function(){this.b.ua(),this.controls.Rd(!1),this.l&&this.video.play()},H("shaka.ui.SeekBar",Xh),T(Zh,ne),(p=Zh.prototype).destroy=function(){var a=this;return B((function(b){switch(b.a){case 1:if(a.b&&(a.b.release(),a.b=null),a.V&&(a.V.stop(),a.V=null),a.ia&&(a.ia.stop(),a.ia=null),a.F&&(a.F.stop(),a.F=null),a.Ta&&(a.Ta.stop(),a.Ta=null),dt(a),a.c&&(a.f.removeChild(a.c),a.c=null),!a.l){b.u(2);break}return I(b,a.l.destroy(),3);case 3:a.l=null;case 2:if(!a.Sa){b.u(4);break}return I(b,a.Sa.destroy(),5);case 5:a.Sa=null;case 4:a.C=null,a.s=null,a.a=null,a.Ka=null,a.ka.clear(),x(b)}}))},p.Xe=function(a){this.bb=a,op(this)},p.Mf=function(){sp(this)},p.configure=function(a){this.m=a,this.l.ge(a.castReceiverAppId),this.o&&(this.o=null),this.ib&&(this.ib=null),this.c?(Oa(this.c),dt(this)):(function(a){a.c=Pa("div"),a.c.classList.add("shaka-controls-container"),a.f.appendChild(a.c),a.f.setAttribute("shaka-controls","true"),a.b.h(a.c,"touchstart",(function(b){a.a.duration&&(a.ub()?a.G=Date.now():(ip(a,b),b.preventDefault()))}),{passive:!1}),a.b.h(a.c,"click",(function(){a.X&&(a.Kc()?a.F.ua():a.g?np(a):tp(a))})),a.b.h(a.c,"dblclick",(function(){a.m.doubleClickForFullscreen&&a.Xd()}))}(this),this.cb=Pa("div"),this.cb.classList.add("shaka-client-side-ad-container"),this.f.appendChild(this.cb)),function(a){a.f.classList.add("shaka-video-container"),a.s.classList.add("shaka-video");var b=Pa("div");if(b.classList.add("shaka-scrim-container"),a.c.appendChild(b),a.m.addBigPlayButton&&((b=Pa("div")).classList.add("shaka-play-button-container"),a.c.appendChild(b),a.ib=new Vh(b,a),a.M.push(a.ib)),!a.$){a.$=Pa("div"),a.$.classList.add("shaka-spinner-container"),a.f.appendChild(a.$);var e=Pa("div");e.classList.add("shaka-spinner"),a.$.appendChild(e),(b=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class","shaka-spinner-svg"),b.setAttribute("viewBox","0 0 30 30"),e.appendChild(b),(e=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("class","shaka-spinner-path"),e.setAttribute("cx","15"),e.setAttribute("cy","15"),e.setAttribute("r","14.5"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","1"),e.setAttribute("stroke-miterlimit","10"),b.appendChild(e)}if(a.eb=Pa("div"),a.eb.classList.add("shaka-server-side-ad-container"),a.c.appendChild(a.eb),function(a){a.L=Pa("div"),a.L.classList.add("shaka-bottom-controls"),a.L.classList.add("shaka-no-propagation"),a.c.appendChild(a.L),a.b.h(a.L,"click",(function(){a.tc()})),function(a){a.J=Pa("div"),a.J.classList.add("shaka-ad-controls"),Uh(a.J,null!=a.g),a.L.appendChild(a.J);var b=new jh(a.J,a);a.M.push(b),b=new Fh(a.J,a),a.M.push(b)}(a),a.Ja=Pa("div"),a.Ja.classList.add("shaka-controls-button-panel"),a.Ja.classList.add("shaka-show-controls-on-mouse-over"),a.L.appendChild(a.Ja);for(var b={},e=q(a.m.controlPanelElements),t=e.next();!t.done;b={bc:b.bc},t=e.next())t=t.value,lp.get(t)?("function"!=typeof(t=lp.get(t).create(a.Ja,a)).release&&(Ae("shaka.extern.IUIElement","Please update UI elements to have a release() method."),b.bc=t,b.bc.release=function(e){return function(){e.bc.destroy&&e.bc.destroy()}}(b)),a.M.push(t)):$("Unrecognized control panel element requested:",t)}(a),a.A=Array.from(a.f.getElementsByClassName("shaka-settings-menu")),a.A.push.apply(a.A,f(Array.from(a.f.getElementsByClassName("shaka-overflow-menu")))),a.m.addSeekBar)a.o=new Xh(a.L,a),a.M.push(a.o);else for(b=q(a.A),e=b.next();!e.done;e=b.next())e.value.classList.add("shaka-low-position");a.Jb=Array.from(a.f.getElementsByClassName("shaka-show-controls-on-mouse-over"))}(this),sp(this);for(var b=(a=q(this.f.getElementsByClassName("shaka-no-propagation"))).next();!b.done;b=a.next()){b=b.value;var e=function(e){return e.stopPropagation()};this.b.h(b,"click",e),this.b.h(b,"dblclick",e)}},p.Od=function(a){(this.X=a)?(this.f.setAttribute("shaka-controls","true"),this.s.tabIndex=-1,this.s.controls=!1):this.f.removeAttribute("shaka-controls"),sp(this)},p.Le=function(a){this.s.controls=a,this.s.tabIndex=a?0:-1,a&&this.Od(!1)},p.getAd=function(){return this.g},p.gf=function(){return this.l},p.tf=function(){return this.Ka},p.Hf=function(){return this.f},p.rc=function(){return this.a},p.sf=function(){return this.s},p.Ob=function(){return this.C},p.rf=function(){return this.Sa},p.lf=function(){return this.c},p.Cf=function(){return this.eb},p.hf=function(){return this.cb},p.jf=function(){return this.m},p.Lf=function(){return this.R},p.Rd=function(a){this.R=a},p.Jf=function(){return this.bb},p.pe=function(){return this.o?this.o.getValue():this.a.currentTime},p.Me=function(a){this.G=a},p.Kc=function(){return this.A.some((function(a){return!a.classList.contains("shaka-hidden")}))},p.tc=function(){this.F.ua()},p.Xd=function(){var b,a=this;return B((function(e){switch(e.a){case 1:if(document.fullscreenElement)return I(e,document.exitFullscreen(),0);if(k(e,4),!document.pictureInPictureElement){e.u(6);break}return I(e,document.exitPictureInPicture(),6);case 6:return I(e,a.f.requestFullscreen({navigationUI:"hide"}),8);case 8:N(e,0);break;case 4:b=M(e),a.dispatchEvent(new X("error",{detail:b})),e.u(0)}}))},p.Oe=function(){Uh(this.J,!0),this.c.setAttribute("ad-active","true")},p.re=function(){Uh(this.J,!1),this.c.removeAttribute("ad-active")},p.ub=function(){return!!this.X&&(null!=this.c.getAttribute("shown")||null!=this.c.getAttribute("casting"))},H("shaka.ui.Controls",Zh),Zh.prototype.isOpaque=Zh.prototype.ub,Zh.prototype.hideAdUI=Zh.prototype.re,Zh.prototype.showAdUI=Zh.prototype.Oe,Zh.prototype.toggleFullScreen=Zh.prototype.Xd,Zh.prototype.hideSettingsMenus=Zh.prototype.tc,Zh.prototype.anySettingsMenusAreOpen=Zh.prototype.Kc,Zh.prototype.setLastTouchEventTime=Zh.prototype.Me,Zh.prototype.getDisplayTime=Zh.prototype.pe,Zh.prototype.isCastAllowed=Zh.prototype.Jf,Zh.prototype.setSeeking=Zh.prototype.Rd,Zh.prototype.isSeeking=Zh.prototype.Lf,Zh.prototype.getConfig=Zh.prototype.jf,Zh.prototype.getClientSideAdContainer=Zh.prototype.hf,Zh.prototype.getServerSideAdContainer=Zh.prototype.Cf,Zh.prototype.getControlsContainer=Zh.prototype.lf,Zh.prototype.getLocalPlayer=Zh.prototype.rf,Zh.prototype.getPlayer=Zh.prototype.Ob,Zh.prototype.getLocalVideo=Zh.prototype.sf,Zh.prototype.getVideo=Zh.prototype.rc,Zh.prototype.getVideoContainer=Zh.prototype.Hf,Zh.prototype.getLocalization=Zh.prototype.tf,Zh.prototype.getCastProxy=Zh.prototype.gf,Zh.prototype.getAd=Zh.prototype.getAd,Zh.prototype.setEnabledNativeControls=Zh.prototype.Le,Zh.prototype.setEnabledShakaControls=Zh.prototype.Od,Zh.prototype.configure=Zh.prototype.configure,Zh.prototype.loadComplete=Zh.prototype.Mf,Zh.prototype.allowCast=Zh.prototype.Xe,Zh.registerElement=ep,Zh.prototype.destroy=Zh.prototype.destroy;var lp=new Map;function rt(a,b,e){this.b=a,this.m=dp(this),b.dataset.shakaPlayerContainer="",b.ui=this,this.yd()&&b.classList.add("shaka-mobile"),this.a=new Zh(a,b,e,this.m),this.configure({}),e.controls||a.Ud(b),b.ui=this,e.ui=this}function dp(a){var b={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),addSeekBar:!0,addBigPlayButton:!1,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:mp,fadeDelay:0,doubleClickForFullscreen:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0};return a.yd()&&(b.addBigPlayButton=!0,b.controlPanelElements=b.controlPanelElements.filter((function(e){return"play_pause"!=e&&"volume"!=e}))),b}function fp(){var a,b,e,t,n,r,o,c,l,d,f,h;return B((function(u){switch(u.a){case 1:if(zd(),!io())return hp("shaka-ui-load-failed",vp),u.return();if(a=document.querySelectorAll("[data-shaka-player-container]"),!(b=document.querySelectorAll("[data-shaka-player]")).length&&!a.length){u.u(2);break}if(b.length&&!a.length){for(e=q(b),t=e.next();!t.done;t=e.next())(n=t.value).ui||(r=document.createElement("div"),n.parentElement.replaceChild(r,n),r.appendChild(n),pp(r,n));u.u(2);break}o=q(a),c=o.next();case 4:if(c.done){u.u(2);break}if((l=c.value).ui){u.u(5);break}for(d=null,f=q(b),t=f.next();!t.done;t=f.next())if((h=t.value).parentElement==l){d=h;break}return d||((d=document.createElement("video")).setAttribute("playsinline",""),l.appendChild(d)),k(u,7),I(u,pp(l,d),9);case 9:N(u,5);break;case 7:return M(u),hp("shaka-ui-load-failed",gp),u.return();case 5:c=o.next(),u.u(4);break;case 2:hp("shaka-ui-loaded"),x(u)}}))}function hp(a,b){var e=document.createEvent("CustomEvent"),t=null;null!=b&&(t={reasonCode:b}),e.initCustomEvent(a,!1,!1,t),document.dispatchEvent(e)}function pp(a,b){var e,t,n,r,g,o,c,l;return B((function(d){switch(d.a){case 1:e=new to(b),t=new rt(e,a,b),n="",a.dataset&&a.dataset.shakaPlayerCastReceiverId?n=a.dataset.shakaPlayerCastReceiverId:b.dataset&&b.dataset.shakaPlayerCastReceiverId&&(n=b.dataset.shakaPlayerCastReceiverId),n.length&&t.configure({castReceiverAppId:n}),b.controls&&t.a.Le(!0),(r=b.getAttribute("src"))&&((g=document.createElement("source")).setAttribute("src",r),b.appendChild(g),b.removeAttribute("src")),o=q(b.querySelectorAll("source")),c=o.next();case 2:if(c.done){d.u(0);break}return l=c.value,k(d,5),I(d,t.a.Ob().load(l.getAttribute("src")),7);case 7:d.u(0);break;case 5:M(d);case 3:c=o.next(),d.u(2)}}))}(p=rt.prototype).destroy=function(){var a=this;return B((function(b){return 1==b.a?a.a?I(b,a.a.destroy(),2):b.u(2):4!=b.a?(a.a=null,a.b?I(b,a.b.destroy(),4):b.u(4)):(a.b=null,void x(b))}))},p.yd=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||mn()&&1<navigator.maxTouchPoints},p.getConfiguration=function(){var a=dp(this);return Va(a,this.m,dp(this),{},""),a},p.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=Ha(a,b)),Va(this.m,a,dp(this),{},""),this.m.castReceiverAppId&&!this.m.overflowMenuButtons.includes("cast")&&this.m.overflowMenuButtons.push("cast"),this.a.configure(this.m),this.a.dispatchEvent(new X("uiupdated"))},p.kf=function(){return this.a},p.jg=function(a){this.a.Od(a)},H("shaka.ui.Overlay",rt),rt.prototype.setEnabled=rt.prototype.jg,rt.prototype.getControls=rt.prototype.kf,rt.prototype.configure=rt.prototype.configure,rt.prototype.getConfiguration=rt.prototype.getConfiguration,rt.prototype.isMobile=rt.prototype.yd,rt.prototype.destroy=rt.prototype.destroy;var mp=0;rt.TrackLabelFormat={LANGUAGE:mp,ROLE:1,LANGUAGE_ROLE:2};var vp=0,gp=1;function yp(a,b,e,t,n,r,g){function o(e,t){return e+": "+t}function c(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var l=a.filter((function(e){return 1==e.active}))[0],d=Lh(b);Oa(b),b.appendChild(d),d=new Map;for(var f=q(a),h=f.next();!h.done;h=f.next())h=h.value,d.has(h.language)||d.set(h.language,new Set),d.get(h.language).add(c(h));for(d=new Set,l=l?o(l.language,c(l)):"",f={},h=(a=q(a)).next();!h.done;f={Hb:f.Hb},h=a.next()){f.Hb=h.value,h=f.Hb.language;var u=c(f.Hb),m=o(h,u);if(!d.has(m)){d.add(m);var v=Da();v.addEventListener("click",function(t){return function(){e(t.Hb)}}(f));var y=Pa("span");switch(v.appendChild(y),y.textContent=bp(h,r),g){case 1:u?y.textContent=u:($("Track #"+f.Hb.id+" does not have a role, but the UI is configured to only show role."),y.textContent="?");break;case 2:u&&(y.textContent+=": "+u)}t&&m==l&&(v.appendChild(Oh()),y.classList.add("shaka-chosen-item"),v.setAttribute("aria-selected","true"),n.textContent=y.textContent),b.appendChild(v)}}}function bp(a,b){if(!a&&!b)return"";switch(a){case"mul":return b.resolve("MULTIPLE_LANGUAGES");case"und":return b.resolve("UNDETERMINED_LANGUAGE");case"zxx":return b.resolve("NOT_APPLICABLE")}var e=Be(a);return a in Ch?Ch[a].i:e in Ch?Ch[e].i+" ("+a+")":b.resolve("UNRECOGNIZED_LANGUAGE")+" ("+a+")"}function Ep(a,b){Rh.call(this,a,b);var e=this;this.m=this.controls.m,this.f=this.controls.c,this.c=[],this.b=Da(),this.b.classList.add("shaka-overflow-menu-button"),this.b.classList.add("shaka-no-propagation"),this.b.classList.add("material-icons-round"),this.b.textContent="more_vert",this.parent.appendChild(this.b),this.a=Pa("div"),this.a.classList.add("shaka-overflow-menu"),this.a.classList.add("shaka-no-propagation"),this.a.classList.add("shaka-show-controls-on-mouse-over"),this.a.classList.add("shaka-hidden"),this.f.appendChild(this.a),function(a){for(var b=q(a.m.overflowMenuButtons),e=b.next();!e.done;e=b.next())e=e.value,Sp.get(e)?(e=Sp.get(e),a.c.push(e.create(a.a,a.controls))):$("Unrecognized overflow menu element requested:",e)}(this);for(var t=q(this.controls.f.getElementsByClassName("shaka-back-to-overflow-button")),n=t.next();!n.done;n=t.next())this.eventManager.h(n.value,"click",(function(){e.controls.tc(),Uh(e.a,!0),e.a.childNodes.length&&e.a.childNodes[0].focus(),ap(e.controls)}));this.eventManager.h(this.localization,"locale-updated",(function(){Ap(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Ap(e)})),this.eventManager.h(this.adManager,"ad-started",(function(){Uh(e.b,!1)})),this.eventManager.h(this.adManager,"ad-stopped",(function(){Uh(e.b,!0)})),this.eventManager.h(this.controls,"submenuopen",(function(){Uh(e.a,!1)})),this.eventManager.h(this.a,"touchstart",(function(t){e.controls.Me(Date.now()),t.stopPropagation()})),this.eventManager.h(this.b,"click",(function(){!function(a){if(a.controls.Kc())a.controls.tc();else{Uh(a.a,!0),ap(a.controls);var b=function(e){return 0==e.classList.contains("shaka-hidden")};(function(a,b){for(var e=q(a),t=e.next();!t.done;t=e.next())if(b(t.value))return!0;return!1})(a.a.childNodes,b)&&re(a.a.childNodes,b)[0].focus()}}(e)})),Ap(this),this.ad&&Uh(this.b,!1)}function Tp(a,b){Sp.set(a,b)}function Ap(a){a.b.setAttribute("aria-label",a.localization.resolve("MORE_SETTINGS"))}function wp(){}rt.FailReasonCode={NO_BROWSER_SUPPORT:vp,PLAYER_FAILED_TO_LOAD:gp},"complete"==document.readyState?B((function(a){if(1==a.a)return I(a,Promise.resolve(),2);fp(),x(a)})):e.addEventListener("load",fp),T(Ep,Rh),Ep.prototype.release=function(){this.f=null;for(var a=q(this.c),b=a.next();!b.done;b=a.next())b.value.release();this.c=[],Rh.prototype.release.call(this)},H("shaka.ui.OverflowMenu",Ep),Ep.registerElement=Tp,wp.prototype.create=function(a,b){return new Ep(a,b)},ep("overflow_menu",new wp);var Sp=new Map;function Ip(a,b,e){Rh.call(this,a,b);var t=this;!function(a,b){a.button=Da(),a.icon=Pa("i"),a.icon.classList.add("material-icons-round"),a.icon.textContent=b,a.button.appendChild(a.icon);var e=Pa("label");e.classList.add("shaka-overflow-button-label"),a.nameSpan=Pa("span"),e.appendChild(a.nameSpan),a.currentSelection=Pa("span"),a.currentSelection.classList.add("shaka-current-selection-span"),e.appendChild(a.currentSelection),a.button.appendChild(e),a.parent.appendChild(a.button)}(this,e),function(a){a.menu=Pa("div"),a.menu.classList.add("shaka-no-propagation"),a.menu.classList.add("shaka-show-controls-on-mouse-over"),a.menu.classList.add("shaka-settings-menu"),a.menu.classList.add("shaka-hidden"),a.backButton=Da(),a.backButton.classList.add("shaka-back-to-overflow-button"),a.menu.appendChild(a.backButton);var b=Pa("i");b.classList.add("material-icons-round"),b.textContent="arrow_back",a.backButton.appendChild(b),a.backSpan=Pa("span"),a.backButton.appendChild(a.backSpan),a.controls.c.appendChild(a.menu)}(this),this.eventManager.h(this.button,"click",(function(){t.controls.dispatchEvent(new X("submenuopen")),Uh(t.menu,!0),Dh(t.menu)}))}function xp(a,b){Ip.call(this,a,b,"language");var e=this;this.button.classList.add("shaka-language-button"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.h(this.localization,"locale-updated",(function(){Cp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Cp(e)})),this.eventManager.h(this.player,"trackschanged",(function(){var t=0<e.player.Rb().length;Uh(e.button,t),kp(e)})),this.eventManager.h(this.player,"variantchanged",(function(){kp(e)})),Cp(this),kp(this)}function kp(a){yp(a.player.Rb(),a.menu,(function(e){a.player.bd(e.language,e.roles[0])}),!0,a.currentSelection,a.localization,a.controls.m.trackLabelFormat),Dh(a.menu),a.controls.dispatchEvent(new X("languageselectionupdated"))}function Cp(a){a.backButton.setAttribute("aria-label",a.localization.resolve("BACK")),a.button.setAttribute("aria-label",a.localization.resolve("LANGUAGE")),a.nameSpan.textContent=a.localization.resolve("LANGUAGE"),a.backSpan.textContent=a.localization.resolve("LANGUAGE")}function Np(){}function Mp(a,b){Rh.call(this,a,b);var e=this;this.b=this.controls.l,this.a=Da(),this.a.classList.add("shaka-cast-button"),this.a.setAttribute("aria-pressed","false"),this.c=Pa("i"),this.c.classList.add("material-icons-round"),this.c.textContent="cast",this.a.appendChild(this.c);var t=Pa("label");t.classList.add("shaka-overflow-button-label"),this.g=Pa("span"),t.appendChild(this.g),this.f=Pa("span"),this.f.classList.add("shaka-current-selection-span"),t.appendChild(this.f),this.a.appendChild(t),this.parent.appendChild(this.a),Lp(this),_p(this),this.eventManager.h(this.localization,"locale-updated",(function(){Lp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Lp(e)})),this.eventManager.h(this.a,"click",(function(){!function(a){var b;B((function(e){return 1==e.a?a.b.ea()?(a.b.Pe(),e.u(0)):(k(e,3),a.a.disabled=!0,I(e,a.b.cast(),5)):3!=e.a?(a.a.disabled=!1,N(e,0)):(b=M(e),a.a.disabled=!1,8004!=b.code&&a.controls.dispatchEvent(new X("error",{detail:b})),void x(e))}))}(e)})),this.eventManager.h(this.controls,"caststatuschanged",(function(){_p(e)}))}function _p(a){var b=a.b.be()&&a.controls.bb,e=a.b.ea();Uh(a.a,b),a.c.textContent=e?"cast_connected":"cast",b&&(e?a.a.setAttribute("aria-pressed","true"):a.a.setAttribute("aria-pressed","false")),Rp(a)}function Rp(a){a.f.textContent=a.b.ea()?a.b.Zc():a.localization.resolve("OFF")}function Lp(a){a.a.setAttribute("aria-label",a.localization.resolve("CAST")),a.g.textContent=a.localization.resolve("CAST"),Rp(a)}function Pp(){}function Dp(a,b){Rh.call(this,a,b);var e=this;this.a=Da(),this.a.classList.add("material-icons-round"),this.a.classList.add("shaka-fast-forward-button"),this.a.textContent="fast_forward",this.parent.appendChild(this.a),Op(this),this.eventManager.h(this.localization,"locale-updated",(function(){Op(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Op(e)})),this.eventManager.h(this.a,"click",(function(){if(e.video.duration){var t=e.player.nc();e.player.Zd(0>t||4<t?1:2*t)}}))}function Op(a){a.a.setAttribute("aria-label",a.localization.resolve("FAST_FORWARD"))}function Up(){}function Bp(a,b){Rh.call(this,a,b);var e=this;this.a=Da(),this.a.classList.add("shaka-fullscreen-button"),this.a.classList.add("material-icons-round"),document.fullscreenEnabled||this.a.classList.add("shaka-hidden"),this.a.textContent="fullscreen",this.parent.appendChild(this.a),Fp(this),this.eventManager.h(this.localization,"locale-updated",(function(){Fp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Fp(e)})),this.eventManager.h(this.a,"click",(function(){return B((function(t){return I(t,e.controls.Xd(),0)}))})),this.eventManager.h(document,"fullscreenchange",(function(){e.a.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen",Fp(e)}))}function Fp(a){a.a.setAttribute("aria-label",a.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN"))}function jp(){}function Gp(a,b){Rh.call(this,a,b);var e=this;this.a=Da(),this.a.classList.add("shaka-loop-button"),this.f=Pa("i"),this.f.classList.add("material-icons-round"),this.f.textContent="loop",this.a.appendChild(this.f);var t=Pa("label");t.classList.add("shaka-overflow-button-label"),this.g=Pa("span"),this.g.textContent=this.localization.resolve("LOOP"),t.appendChild(this.g),this.c=Pa("span"),this.c.classList.add("shaka-current-selection-span"),t.appendChild(this.c),this.a.appendChild(t),Kp(this),this.parent.appendChild(this.a),this.eventManager.h(this.localization,"locale-updated",(function(){Kp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Kp(e)})),this.eventManager.h(this.a,"click",(function(){e.video.loop=!e.video.loop,e.b.ua(),e.b.Z(1)})),this.l=this.video.loop,this.b=new kt((function(){e.l!=e.video.loop&&(Kp(e),e.l=e.video.loop)})),this.b.Z(1)}function Kp(a){a.g.textContent=a.localization.resolve("LOOP"),a.c.textContent=a.localization.resolve(a.video.loop?"ON":"OFF"),a.a.setAttribute("aria-label",a.localization.resolve(a.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE"))}function zp(){}function Vp(a,b){Rh.call(this,a,b);var e=this;this.a=Da(),this.a.classList.add("shaka-mute-button"),this.a.classList.add("material-icons-round"),this.a.textContent="volume_up",this.parent.appendChild(this.a),Hp(this),this.eventManager.h(this.localization,"locale-updated",(function(){Hp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Hp(e)})),this.eventManager.h(this.a,"click",(function(){e.ad?e.ad.setMuted(!e.ad.isMuted()):e.video.muted=!e.video.muted})),this.eventManager.h(this.video,"volumechange",(function(){Hp(e),qp(e)})),this.eventManager.h(this.adManager,"ad-volume-changed",(function(){Hp(e),qp(e)})),this.eventManager.h(this.adManager,"ad-muted",(function(){Hp(e),qp(e)})),this.eventManager.h(this.adManager,"ad-stopped",(function(){e.ad=null,Hp(e),qp(e)}))}function Hp(a){var b=a.ad?a.ad.isMuted()?"UNMUTE":"MUTE":a.video.muted?"UNMUTE":"MUTE";a.a.setAttribute("aria-label",a.localization.resolve(b))}function qp(a){var b=a.ad?a.ad.isMuted()?"volume_off":"volume_up":a.video.muted?"volume_off":"volume_up";a.a.textContent=b}function Xp(){}function Wp(a,b){Rh.call(this,a,b);var e=this;this.g=this.controls.s,this.a=Da(),this.a.classList.add("shaka-pip-button"),this.c=Pa("i"),this.c.classList.add("material-icons-round"),this.c.textContent="picture_in_picture_alt",this.a.appendChild(this.c);var t=Pa("label");t.classList.add("shaka-overflow-button-label"),this.f=Pa("span"),this.f.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),t.appendChild(this.f),this.b=Pa("span"),this.b.classList.add("shaka-current-selection-span"),t.appendChild(this.b),this.a.appendChild(t),Yp(this),this.parent.appendChild(this.a),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||Uh(this.a,!1),this.eventManager.h(this.localization,"locale-updated",(function(){Yp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Yp(e)})),this.eventManager.h(this.a,"click",(function(){!function(a){var b;B((function(e){return 1==e.a?(k(e,2),document.pictureInPictureElement?I(e,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),I(e,a.video.requestPictureInPicture(),5))):2!=e.a?N(e,0):(b=M(e),a.controls.dispatchEvent(new X("error",{detail:b})),void x(e))}))}(e)})),this.eventManager.h(this.g,"enterpictureinpicture",(function(){e.c.textContent="branding_watermark",e.a.setAttribute("aria-label",e.localization.resolve("EXIT_PICTURE_IN_PICTURE")),e.b.textContent=e.localization.resolve("ON")})),this.eventManager.h(this.g,"leavepictureinpicture",(function(){e.c.textContent="picture_in_picture_alt",e.a.setAttribute("aria-label",e.localization.resolve("ENTER_PICTURE_IN_PICTURE")),e.b.textContent=e.localization.resolve("OFF")})),this.eventManager.h(this.controls,"caststatuschanged",(function(t){t.newStatus?document.pictureInPictureEnabled&&!e.video.disablePictureInPicture&&Uh(e.a,!1):document.pictureInPictureEnabled&&!e.video.disablePictureInPicture&&Uh(e.a,!0)})),this.eventManager.h(this.player,"trackschanged",(function(){!function(a){B((function(b){return!document.pictureInPictureEnabled||a.video.disablePictureInPicture?(Uh(a.a,!1),b.u(0)):a.player&&a.player.ue()?(Uh(a.a,!1),document.pictureInPictureElement?I(b,document.exitPictureInPicture(),0):b.u(0)):(Uh(a.a,!0),b.u(0))}))}(e)}))}function Yp(a){a.f.textContent=a.localization.resolve("PICTURE_IN_PICTURE"),a.a.setAttribute("aria-label",a.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE")),a.b.textContent=a.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function $p(){}function Jp(a,b){Ip.call(this,a,b,"slow_motion_video");var e=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.eventManager.h(this.localization,"locale-updated",(function(){Qp(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Qp(e)})),this.eventManager.h(this.player,"ratechange",(function(){Zp(e,e.player.nc())})),this.a=new Map([["0.5x",.5],["0.75x",.75],["1x",1],["1.25x",1.25],["1.5x",1.5],["1.75x",1.75],["2x",2]]),Qp(this),function(a){for(var b={},e=q(a.a.keys()),t=e.next();!t.done;b={Gc:b.Gc},t=e.next()){b.Gc=t.value,t=Da();var n=Pa("span");n.textContent=b.Gc,t.appendChild(n),a.eventManager.h(t,"click",function(e){return function(){a.video.playbackRate=a.a.get(e.Gc)}}(b)),a.menu.appendChild(t)}Dh(a.menu)}(this),Zp(this,this.player.nc())}function Qp(a){a.backButton.setAttribute("aria-label",a.localization.resolve("BACK")),a.button.setAttribute("aria-label",a.localization.resolve("PLAYBACK_RATE")),a.nameSpan.textContent=a.localization.resolve("PLAYBACK_RATE"),a.backSpan.textContent=a.localization.resolve("PLAYBACK_RATE")}function Zp(a,b){var e=Ph(a.menu,"material-icons-round shaka-chosen-item");if(e){var t=e.parentElement;t.removeAttribute("aria-selected"),t.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),t.removeChild(e)}(e=Array.from(a.menu.querySelectorAll("span")).find((function(e){return a.a.get(e.textContent)==b})))&&((t=e.parentElement).appendChild(Oh()),t.setAttribute("aria-selected","true"),e.classList.add("shaka-chosen-item")),a.currentSelection.textContent=b+"x"}function tm(){}function nm(a,b){Rh.call(this,a,b);var e=this;this.a=Da(),this.a.classList.add("shaka-current-time"),im(this,"0:00"),this.parent.appendChild(this.a),this.eventManager.h(this.a,"click",(function(){e.player.S()&&(e.video.currentTime=e.player.Ia().end)})),this.eventManager.h(this.controls,"timeandseekrangeupdated",(function(){var t=e.controls.R,n=e.controls.pe(),r=e.video.duration,g=e.player.Ia(),o=g.end-g.start;e.player.S()?(r=3600<=o,1<=(n=Math.max(0,Math.floor(g.end-n)))||t?(im(e,"- "+Bh(n,r)),e.a.disabled=!1):(im(e,e.localization.resolve("LIVE")),e.a.disabled=!0)):(n=Bh(n,t=3600<=r),r&&(n+=" / "+Bh(r,t)),im(e,n),e.a.disabled=!0)})),this.eventManager.h(this.player,"trackschanged",(function(){e.player.S()&&e.a.setAttribute("aria-label",e.localization.resolve("SKIP_TO_LIVE"))}))}function im(a,b){b!=a.a.textContent&&(a.a.textContent=b)}function rm(){}function am(a,b){Ip.call(this,a,b,"settings");var e=this;this.button.classList.add("shaka-resolution-button"),this.menu.classList.add("shaka-resolutions"),this.eventManager.h(this.localization,"locale-updated",(function(){sm(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){sm(e)})),this.eventManager.h(this.player,"variantchanged",(function(){om(e)})),this.eventManager.h(this.player,"trackschanged",(function(){om(e)})),this.eventManager.h(this.player,"abrstatuschanged",(function(){om(e)})),om(this),sm(this)}function om(a){var b=a.player.Rb();if(b.length&&!b[0].height)Uh(a.menu,!1),Uh(a.button,!1);else{Uh(a.button,!0),b.sort((function(e,t){return t.height-e.height}));var e=b.find((function(e){return e.active}));e&&(b=b.filter((function(t){return t.language==e.language&&t.channelsCount==e.channelsCount}))),b=b.filter((function(e,t){return b.findIndex((function(t){return t.height==e.height}))==t}));var t=Lh(a.menu);Oa(a.menu),a.menu.appendChild(t),t=a.player.getConfiguration().abr.enabled;for(var n={},r=q(b),g=r.next();!g.done;n={ec:n.ec},g=r.next()){n.ec=g.value,(g=Da()).classList.add("explicit-resolution"),a.eventManager.h(g,"click",function(e){return function(){var t=e.ec;a.player.configure({abr:{enabled:!1}}),a.player.Je(t,a.controls.m.clearBufferOnQualityChange)}}(n));var o=Pa("span");o.textContent=n.ec.height+"p",g.appendChild(o),t||n.ec!=e||(g.setAttribute("aria-selected","true"),g.appendChild(Oh()),o.classList.add("shaka-chosen-item"),a.currentSelection.textContent=o.textContent),a.menu.appendChild(g)}(n=Da()).classList.add("shaka-enable-abr-button"),a.eventManager.h(n,"click",(function(){a.player.configure({abr:{enabled:!0}}),om(a)})),a.a=Pa("span"),a.a.classList.add("shaka-auto-span"),a.a.textContent=a.localization.resolve("AUTO_QUALITY"),n.appendChild(a.a),t&&(n.setAttribute("aria-selected","true"),n.appendChild(Oh()),a.a.classList.add("shaka-chosen-item"),a.currentSelection.textContent=a.localization.resolve("AUTO_QUALITY")),a.menu.appendChild(n),Dh(a.menu),a.controls.dispatchEvent(new X("resolutionselectionupdated"))}}function sm(a){a.button.setAttribute("aria-label",a.localization.resolve("RESOLUTION")),a.backButton.setAttribute("aria-label",a.localization.resolve("RESOLUTION")),a.backSpan.textContent=a.localization.resolve("RESOLUTION"),a.nameSpan.textContent=a.localization.resolve("RESOLUTION"),a.a.textContent=a.localization.resolve("AUTO_QUALITY"),a.player.getConfiguration().abr.enabled&&(a.currentSelection.textContent=a.localization.resolve("AUTO_QUALITY"))}function um(){}function cm(a,b){Rh.call(this,a,b);var e=this;this.a=Da(),this.a.classList.add("material-icons-round"),this.a.classList.add("shaka-rewind-button"),this.a.textContent="fast_rewind",this.parent.appendChild(this.a),lm(this),this.eventManager.h(this.localization,"locale-updated",(function(){lm(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){lm(e)})),this.eventManager.h(this.a,"click",(function(){if(e.video.duration){var t=e.player.nc();e.player.Zd(0<t||-4>t?-1:2*t)}}))}function lm(a){a.a.setAttribute("aria-label",a.localization.resolve("REWIND"))}function dm(){}function fm(a,b){Rh.call(this,a,b);var e=this;this.f=Pa("div"),this.f.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.f),this.b=Pa("div"),this.b.classList.add("shaka-skip-ad-counter"),Uh(this.b,!1),this.f.appendChild(this.b),this.a=Da(),this.a.classList.add("shaka-skip-ad-button"),this.a.disabled=!0,Uh(this.a,!1),this.a.classList.add("shaka-no-propagation"),this.f.appendChild(this.a),hm(this),this.c=new kt((function(){var t=Math.round(e.ad.getTimeUntilSkippable());0<t?e.b.textContent=t:(e.c.stop(),Uh(e.b,!1))})),this.eventManager.h(this.localization,"locale-updated",(function(){hm(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){hm(e)})),this.eventManager.h(this.adManager,"ad-started",(function(){pm(e)})),this.eventManager.h(this.adManager,"ad-skip-state-changed",(function(){e.ad.canSkipNow()&&(e.a.disabled=!1,e.c.stop(),Uh(e.b,!1))})),this.eventManager.h(this.adManager,"ad-stopped",(function(){e.c.stop(),e.a.disabled=!0,Uh(e.a,!1),Uh(e.b,!1)})),this.eventManager.h(this.a,"click",(function(){e.ad.skip()})),this.ad&&pm(this)}function hm(a){a.a.textContent=a.localization.resolve("SKIP_AD")}function pm(a){a.ad.isSkippable()&&(Uh(a.a,!0),Uh(a.b,!0),a.b.textContent="",a.c.ua(),a.c.Z(.5))}function mm(a,b){Kh.call(this,a,b),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.a(),zh(this)}function vm(){}function gm(a,b){Rh.call(this,a,b);var e=Pa("div");e.classList.add("shaka-spacer"),e.setAttribute("aria-hidden",!0),this.parent.appendChild(e)}function ym(){}function bm(a,b){Ip.call(this,a,b,"closed_caption");var e=this;this.button.classList.add("shaka-caption-button"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.vb()?this.button.setAttribute("aria-pressed","true"):this.button.setAttribute("aria-pressed","false"),function(a){var b=Da();b.setAttribute("aria-selected","true"),a.menu.appendChild(b),b.appendChild(Oh()),a.a=Pa("span"),a.a.classList.add("shaka-auto-span"),b.appendChild(a.a)}(this),this.eventManager.h(this.localization,"locale-updated",(function(){Am(e),Tm(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){Am(e),Tm(e)})),this.eventManager.h(this.player,"texttrackvisibility",(function(){Em(e)})),this.eventManager.h(this.player,"textchanged",(function(){Tm(e)})),this.eventManager.h(this.player,"trackschanged",(function(){wm(e)})),Em(this),Am(this),Tm(this),wm(this)}function Em(a){a.player.vb()?(a.icon.classList.add("shaka-captions-on"),a.icon.classList.remove("shaka-captions-off"),a.button.setAttribute("aria-pressed","true")):(a.icon.classList.add("shaka-captions-off"),a.icon.classList.remove("shaka-captions-on"),a.button.setAttribute("aria-pressed","false")),a.controls.dispatchEvent(new X("captionselectionupdated"))}function Tm(a){var b=a.player.Qb();yp(b,a.menu,(function(e){return function(a,b){return B((function(e){return a.player.cd(b.language,b.roles[0]),I(e,a.player.Td(!0),0)}))}(a,e)}),a.player.vb(),a.currentSelection,a.localization,a.controls.m.trackLabelFormat),(b=Da()).classList.add("shaka-turn-captions-off-button"),a.eventManager.h(b,"click",(function(){a.player.Td(!1),Tm(a)})),b.appendChild(a.a),a.menu.appendChild(b),a.player.vb()||(b.setAttribute("aria-selected","true"),b.appendChild(Oh()),a.a.classList.add("shaka-chosen-item"),a.currentSelection.textContent=a.localization.resolve("OFF")),Dh(a.menu),a.controls.dispatchEvent(new X("captionselectionupdated"))}function Am(a){a.button.setAttribute("aria-label",a.localization.resolve("CAPTIONS")),a.backButton.setAttribute("aria-label",a.localization.resolve("BACK")),a.nameSpan.textContent=a.localization.resolve("CAPTIONS"),a.backSpan.textContent=a.localization.resolve("CAPTIONS"),a.a.textContent=a.localization.resolve("OFF")}function wm(a){var b=0<a.player.Qb().length;Uh(a.button,b),Tm(a)}function Sm(){}function Im(a,b){Hh.call(this,a,b,["shaka-volume-bar-container"],["shaka-volume-bar"]);var e=this;this.m=this.controls.m,this.eventManager.h(this.video,"volumechange",(function(){return xm(e)})),this.eventManager.h(this.adManager,"ad-volume-changed",(function(){return km(e)})),this.eventManager.h(this.adManager,"ad-muted",(function(){return km(e)})),this.eventManager.h(this.adManager,"ad-stopped",(function(){return xm(e)})),this.eventManager.h(this.localization,"locale-updated",(function(){return Nm(e)})),this.eventManager.h(this.localization,"locale-changed",(function(){return Nm(e)})),xm(this),Nm(this),this.ad&&this.onChange()}function xm(a){a.video.muted?a.setValue(0):a.setValue(a.video.volume),Cm(a)}function km(a){var b=a.ad.getVolume();a.setValue(b),Cm(a)}function Cm(a){var b=a.m.volumeBarColors,e=["to right"];e.push(b.level+100*a.getValue()+"%"),e.push(b.base+100*a.getValue()+"%"),e.push(b.base+"100%"),a.container.style.background="linear-gradient("+e.join(",")+")"}function Nm(a){a.bar.setAttribute("aria-label",a.localization.resolve("VOLUME"))}function Mm(){}T(Ip,Rh),H("shaka.ui.SettingsMenu",Ip),T(xp,Ip),H("shaka.ui.AudioLanguageSelection",xp),Np.prototype.create=function(a,b){return new xp(a,b)},Tp("language",new Np),T(Mp,Rh),H("shaka.ui.CastButton",Mp),Pp.prototype.create=function(a,b){return new Mp(a,b)},Tp("cast",new Pp),T(Dp,Rh),H("shaka.ui.FastForwardButton",Dp),Up.prototype.create=function(a,b){return new Dp(a,b)},ep("fast_forward",new Up),T(Bp,Rh),H("shaka.ui.FullscreenButton",Bp),jp.prototype.create=function(a,b){return new Bp(a,b)},ep("fullscreen",new jp),T(Gp,Rh),Gp.prototype.release=function(){this.b.stop(),this.b=null,Rh.prototype.release.call(this)},H("shaka.ui.LoopButton",Gp),zp.prototype.create=function(a,b){return new Gp(a,b)},Tp("loop",new zp),T(Vp,Rh),H("shaka.ui.MuteButton",Vp),Xp.prototype.create=function(a,b){return new Vp(a,b)},ep("mute",new Xp),T(Wp,Rh),H("shaka.ui.PipButton",Wp),$p.prototype.create=function(a,b){return new Wp(a,b)},Tp("picture_in_picture",new $p),T(Jp,Ip),H("shaka.ui.PlaybackRateSelection",Jp),tm.prototype.create=function(a,b){return new Jp(a,b)},Tp("playback_rate",new tm),T(nm,Rh),H("shaka.ui.PresentationTimeTracker",nm),rm.prototype.create=function(a,b){return new nm(a,b)},ep("time_and_duration",new rm),T(am,Ip),H("shaka.ui.ResolutionSelection",am),um.prototype.create=function(a,b){return new am(a,b)},Tp("quality",new um),T(cm,Rh),H("shaka.ui.RewindButton",cm),dm.prototype.create=function(a,b){return new cm(a,b)},ep("rewind",new dm),T(fm,Rh),fm.prototype.release=function(){this.c.stop(),this.c=null,Rh.prototype.release.call(this)},H("shaka.ui.SkipAdButton",fm),T(mm,Kh),mm.prototype.a=function(){this.button.textContent=this.isPaused()?"play_arrow":"pause"},H("shaka.ui.SmallPlayButton",mm),vm.prototype.create=function(a,b){return new mm(a,b)},ep("play_pause",new vm),T(gm,Rh),H("shaka.ui.Spacer",gm),ym.prototype.create=function(a,b){return new gm(a,b)},ep("spacer",new ym),T(bm,Ip),H("shaka.ui.TextSelection",bm),Sm.prototype.create=function(a,b){return new bm(a,b)},Tp("captions",new Sm),T(Im,Hh),Im.prototype.onChange=function(){this.ad?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=0==this.video.volume)},H("shaka.ui.VolumeBar",Im),Mm.prototype.create=function(a,b){return new Im(a,b)},ep("volume",new Mm)}.call(r,n,n,void 0),r.shaka)t[o]=r.shaka[o]}()}).call(this,n(23))}}]);